{"version":3,"file":"moveable.cjs.js","sources":["../src/ables/AbleManager.ts","../src/consts.ts","../src/gesto/CustomGesto.ts","../src/gesto/GestoUtils.ts","../src/gesto/GestoData.ts","../src/utils.tsx","../src/ables/Pinchable.ts","../src/groupUtils.ts","../src/ables/snappable/utils.ts","../src/ables/snappable/snap.ts","../src/ables/snappable/innerBounds.ts","../src/ables/snappable/bounds.ts","../src/ables/snappable/render.tsx","../src/ables/snappable/snapBounds.ts","../src/ables/snappable/getTotalGuidelines.ts","../src/ables/Snappable.tsx","../src/renderDirections.tsx","../src/ables/Draggable.tsx","../src/ables/Resizable.ts","../src/ables/Rotatable.tsx","../src/ables/Scalable.ts","../src/ables/Warpable.tsx","../src/classNames.ts","../src/ables/DragArea.tsx","../src/ables/Origin.tsx","../src/ables/Scrollable.ts","../src/ables/Default.ts","../src/ables/Padding.tsx","../src/ables/roundable/borderRadius.tsx","../src/ables/clippable/utils.tsx","../src/ables/Clippable.tsx","../src/ables/OriginDraggable.tsx","../src/ables/Roundable.tsx","../src/ables/BeforeRenderable.ts","../src/ables/Renderable.ts","../src/gesto/getAbleGesto.ts","../src/EventManager.ts","../src/utils/getMatrixStackInfo.ts","../src/utils/calculateMatrixStack.ts","../src/utils/getElementInfo.ts","../src/utils/getMoveableTargetInfo.ts","../src/utils/persist.ts","../src/MoveableManager.tsx","../src/ables/Groupable.tsx","../src/ables/Clickable.ts","../src/ables/edgeDraggable.tsx","../src/ables/IndividualGroupable.tsx","../src/ables/consts.ts","../src/Snappable/utils.ts","../src/MoveableGroup.tsx","../src/MoveableIndividualGroup.tsx","../src/InitialMoveable.tsx","../src/Moveable.tsx","../src/makeMoveable.ts","../src/index.umd.ts"],"sourcesContent":["import { Able, DefaultProps } from \"../types\";\n\nexport function makeAble<\n    Name extends string,\n    AbleObject extends Partial<Able<any, any>>,\n    Props extends DefaultProps<Name, AbleObject>,\n>(name: Name, able: AbleObject) {\n    return {\n        events: {} as const,\n        props: {\n            [name]: Boolean,\n        } as Props,\n        name,\n        ...able,\n    } as const;\n}\n","import getAgent from \"@egjs/agent\";\nimport { IObject } from \"@daybrush/utils\";\nimport { MoveableInterface } from \"./types\";\n\nfunction getSVGCursor(scale: number, degree: number) {\n    return `data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${32 * scale}px\" height=\"${32 * scale}px\" viewBox=\"0 0 32 32\" ><path d=\"M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z\" stroke-linejoin=\"round\" stroke-width=\"1.2\" fill=\"black\" stroke=\"white\" style=\"transform:rotate(${degree}deg);transform-origin: 16px 16px\"></path></svg>`;\n}\nfunction getCursorCSS(degree: number) {\n    const x1 = getSVGCursor(1, degree);\n    // const x2 = getSVGCursor(2, degree);\n    const degree45 = (Math.round(degree / 45) * 45) % 180;\n    let defaultCursor = \"ns-resize\";\n\n    if (degree45 === 135) {\n        defaultCursor = \"nwse-resize\";\n    } else if (degree45 === 45) {\n        defaultCursor = \"nesw-resize\";\n    } else if (degree45 === 90) {\n        defaultCursor = \"ew-resize\";\n    }\n\n    // tslint:disable-next-line: max-line-length\n    return `cursor:${defaultCursor};cursor: url('${x1}') 16 16, ${defaultCursor};`;\n}\n\nexport const agent = getAgent();\nexport const IS_WEBKIT = agent.browser.webkit;\nexport const IS_WEBKIT605 = IS_WEBKIT && (() => {\n    const navi = typeof window === \"undefined\" ? { userAgent: \"\" } : window.navigator;\n    const res = /applewebkit\\/([^\\s]+)/g.exec(navi.userAgent.toLowerCase());\n\n    return res ? parseFloat(res[1]) < 605 : false;\n})();\n\nexport const IS_FIREFOX = agent.browser.name === \"firefox\";\nexport const IS_SAFARI_ABOVE15\n    = parseInt(agent.browser.webkitVersion, 10) >= 612\n    || parseInt(agent.browser.version, 10) >= 15;\n\nexport const PREFIX = \"moveable-\";\nexport const MOVEABLE_CSS = `\n{\n\tposition: absolute;\n\twidth: 1px;\n\theight: 1px;\n\tleft: 0;\n\ttop: 0;\n    z-index: 3000;\n    --moveable-color: #4af;\n    --zoom: 1;\n    --zoompx: 1px;\n    will-change: transform;\n    outline: 1px solid transparent;\n}\n.control-box {\n    z-index: 0;\n}\n.line, .control {\n    position: absolute;\n\tleft: 0;\n    top: 0;\n    will-change: transform;\n}\n.control {\n\twidth: 14px;\n\theight: 14px;\n\tborder-radius: 50%;\n\tborder: 2px solid #fff;\n\tbox-sizing: border-box;\n    background: #4af;\n    background: var(--moveable-color);\n\tmargin-top: -7px;\n    margin-left: -7px;\n    border: 2px solid #fff;\n    z-index: 10;\n}\n.padding {\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    width: 100px;\n    height: 100px;\n    transform-origin: 0 0;\n}\n.line {\n\twidth: 1px;\n    height: 1px;\n    background: #4af;\n    background: var(--moveable-color);\n\ttransform-origin: 0px 50%;\n}\n.line.edge {\n    z-index: 1;\n    background: transparent;\n}\n.line.dashed {\n    box-sizing: border-box;\n    background: transparent;\n}\n.line.dashed.horizontal {\n    border-top: 1px dashed #4af;\n    border-top-color: #4af;\n    border-top-color: var(--moveable-color);\n}\n.line.dashed.vertical {\n    border-left: 1px dashed #4af;\n    border-left-color: #4af;\n    border-left-color: var(--moveable-color);\n}\n.line.vertical {\n    transform: translateX(-50%);\n}\n.line.horizontal {\n    transform: translateY(-50%);\n}\n.line.vertical.bold {\n    width: 2px;\n}\n.line.horizontal.bold {\n    height: 2px;\n}\n\n.control.origin {\n\tborder-color: #f55;\n\tbackground: #fff;\n\twidth: 12px;\n\theight: 12px;\n\tmargin-top: -6px;\n    margin-left: -6px;\n\tpointer-events: none;\n}\n${[0, 15, 30, 45, 60, 75, 90, 105, 120, 135, 150, 165].map(degree => `\n.direction[data-rotation=\"${degree}\"], :global .view-control-rotation${degree} {\n\t${getCursorCSS(degree)}\n}\n`).join(\"\\n\")}\n\n.line.direction:before {\n    content: \"\";\n    position: absolute;\n    width: 100%;\n    height: calc(var(--moveable-line-padding, 0) * 1px);\n    bottom: 0;\n    left: 0;\n}\n.group {\n    z-index: -1;\n}\n.area {\n    position: absolute;\n}\n.area-pieces {\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: none;\n}\n.area.avoid, .area.pass {\n    pointer-events: none;\n}\n.area.avoid+.area-pieces {\n    display: block;\n}\n.area-piece {\n    position: absolute;\n}\n\n${IS_WEBKIT605 ? `:global svg *:before {\n\tcontent:\"\";\n\ttransform-origin: inherit;\n}` : \"\"}\n`;\nexport const DRAGGER_EVENTS = [\"dragstart\", \"drag\", \"dragend\", \"pinchstart\", \"pinch\", \"pinchend\"];\n\nexport const NEARBY_POS = [\n    [0, 1, 2],\n    [1, 0, 3],\n    [2, 0, 3],\n    [3, 1, 2],\n];\n\nexport const FLOAT_POINT_NUM = 0.0001;\nexport const TINY_NUM = 0.0000001;\nexport const MIN_SCALE = 0.000000001;\nexport const MAX_NUM = Math.pow(10, 10);\nexport const MIN_NUM = -MAX_NUM;\n\n\nexport const DIRECTIONS4 = [\"n\", \"w\", \"s\", \"e\"];\nexport const DIRECTIONS = [\"n\", \"w\", \"s\", \"e\", \"nw\", \"ne\", \"sw\", \"se\"];\n\nexport const DIRECTION_REGION_TO_DIRECTION: Record<string, number[]> = {\n    n: [0, -1],\n    e: [1, 0],\n    s: [0, 1],\n    w: [-1, 0],\n    nw: [-1, -1],\n    ne: [1, -1],\n    sw: [-1, 1],\n    se: [1, 1],\n};\n\nexport const DIRECTION_INDEXES: IObject<number[]> = {\n    n: [0, 1],\n    e: [1, 3],\n    s: [3, 2],\n    w: [2, 0],\n    nw: [0],\n    ne: [1],\n    sw: [2],\n    se: [3],\n};\nexport const DIRECTION_ROTATIONS: IObject<number> = {\n    n: 0,\n    s: 180,\n    w: 270,\n    e: 90,\n    nw: 315,\n    ne: 45,\n    sw: 225,\n    se: 135,\n};\n\nexport const MOVEABLE_METHODS: Array<keyof MoveableInterface> = [\n    \"isMoveableElement\",\n    \"updateRect\",\n    \"updateTarget\",\n    \"destroy\",\n    \"dragStart\",\n    \"isInside\",\n    \"hitTest\",\n    \"setState\",\n    \"getRect\",\n    \"request\",\n    \"isDragging\",\n    \"getManager\",\n    \"forceUpdate\",\n    \"waitToChangeTarget\",\n    \"updateSelectors\",\n    \"getTargets\",\n    \"stopDrag\",\n];\n","import { MoveableManagerState, OnCustomDrag } from \"../types\";\nimport { convertDragDist } from \"../utils\";\n\nexport function setCustomDrag(\n    e: any,\n    state: MoveableManagerState<any>,\n    delta: number[],\n    isPinch: boolean,\n    isConvert: boolean,\n    ableName = \"draggable\",\n) {\n    const result = state.gestos[ableName]?.move(delta, e.inputEvent) ?? {};\n    const datas = result.originalDatas || result.datas;\n    const ableDatas = datas[ableName] || (datas[ableName] = {});\n\n    return {\n        ...(isConvert ? convertDragDist(state, result) : result),\n        isPinch: !!isPinch,\n        parentEvent: true,\n        datas: ableDatas,\n        originalDatas: e.originalDatas,\n    };\n}\n\nexport default class CustomGesto {\n    private prevX = 0;\n    private prevY = 0;\n    private startX = 0;\n    private startY = 0;\n    private isDrag = false;\n    private isFlag = false;\n    private datas: any = {\n        draggable: {},\n    };\n    constructor(private ableName = \"draggable\") {\n        this.datas = {\n            [ableName]: {},\n        };\n    }\n\n    public dragStart(client: number[], e: any) {\n        this.isDrag = false;\n        this.isFlag = false;\n        const originalDatas = e.originalDatas;\n\n        this.datas = originalDatas;\n        if (!originalDatas[this.ableName]) {\n            originalDatas[this.ableName] = {};\n        }\n        return {\n            ...this.move(client, e.inputEvent),\n            type: \"dragstart\",\n        };\n    }\n    public drag(client: number[], inputEvent: any) {\n        return this.move([\n            client[0] - this.prevX,\n            client[1] - this.prevY,\n        ], inputEvent);\n    }\n    public move(delta: number[], inputEvent: any): OnCustomDrag {\n        let clientX!: number;\n        let clientY!: number;\n        let isFirstDrag = false;\n\n        if (!this.isFlag) {\n            this.prevX = delta[0];\n            this.prevY = delta[1];\n            this.startX = delta[0];\n            this.startY = delta[1];\n\n            clientX = delta[0];\n            clientY = delta[1];\n\n            this.isFlag = true;\n        } else {\n            const isPrevDrag = this.isDrag;\n\n            clientX = this.prevX + delta[0];\n            clientY = this.prevY + delta[1];\n\n            if (delta[0] || delta[1]) {\n                this.isDrag = true;\n            }\n\n            if (!isPrevDrag && this.isDrag) {\n                isFirstDrag = true;\n            }\n        }\n\n        this.prevX = clientX;\n        this.prevY = clientY;\n\n        return {\n            type: \"drag\",\n            clientX,\n            clientY,\n            inputEvent,\n            isFirstDrag,\n            isDrag: this.isDrag,\n            distX: clientX - this.startX,\n            distY: clientY - this.startY,\n            deltaX: delta[0],\n            deltaY: delta[1],\n            datas: this.datas[this.ableName],\n            originalDatas: this.datas,\n            parentEvent: true,\n            parentGesto: this,\n        };\n    }\n}\n","\nimport {\n    invert, calculate, minus, plus,\n    convertPositionMatrix,\n    createScaleMatrix, multiply, fromTranslation, convertDimension,\n} from \"@scena/matrix\";\nimport {\n    calculatePoses, getAbsoluteMatrix, getAbsolutePosesByState,\n    calculatePosition, calculateInversePosition, calculateMoveablePosition, convertTransformInfo, fillCSSObject,\n} from \"../utils\";\nimport { splitUnit, isArray, splitSpace, findIndex, dot, find } from \"@daybrush/utils\";\nimport {\n    MoveableManagerState, ResizableProps, MoveableManagerInterface,\n    OnTransformEvent, OnTransformStartEvent, DraggableProps, OnDrag,\n} from \"../types\";\nimport { setCustomDrag } from \"./CustomGesto\";\nimport { parse, parseMat } from \"css-to-mat\";\nimport { Draggable } from \"../index.esm\";\n\nexport function calculatePointerDist(moveable: MoveableManagerInterface, e: any) {\n    const { clientX, clientY, datas } = e;\n    const {\n        moveableClientRect,\n        rootMatrix,\n        is3d,\n        pos1,\n    } = moveable.state;\n    const { left, top } = moveableClientRect;\n    const n = is3d ? 4 : 3;\n    const [posX, posY] = minus(calculateInversePosition(rootMatrix, [clientX - left, clientY - top], n), pos1);\n    const [distX, distY] = getDragDist({ datas, distX: posX, distY: posY });\n\n    return [distX, distY];\n}\n\nexport function setDragStart(moveable: MoveableManagerInterface<any>, { datas }: any) {\n    const {\n        allMatrix,\n        beforeMatrix,\n        is3d,\n        left,\n        top,\n        origin,\n        offsetMatrix,\n        targetMatrix,\n        transformOrigin,\n    } = moveable.state;\n    const n = is3d ? 4 : 3;\n\n    datas.is3d = is3d;\n    datas.matrix = allMatrix;\n    datas.targetMatrix = targetMatrix;\n    datas.beforeMatrix = beforeMatrix;\n    datas.offsetMatrix = offsetMatrix;\n    datas.transformOrigin = transformOrigin;\n    datas.inverseMatrix = invert(allMatrix, n);\n    datas.inverseBeforeMatrix = invert(beforeMatrix, n);\n    datas.absoluteOrigin = convertPositionMatrix(plus([left, top], origin), n);\n    datas.startDragBeforeDist = calculate(datas.inverseBeforeMatrix, datas.absoluteOrigin, n);\n    datas.startDragDist = calculate(datas.inverseMatrix, datas.absoluteOrigin, n);\n}\nexport function getTransformDirection(e: any) {\n    return calculateMoveablePosition(e.datas.beforeTransform, [50, 50], 100, 100).direction;\n}\nexport function resolveTransformEvent(event: any, functionName: string) {\n    const {\n        datas,\n        originalDatas: {\n            beforeRenderable: originalDatas,\n        },\n    } = event;\n\n    const index = datas.transformIndex;\n\n\n    const nextTransforms = originalDatas.nextTransforms as string[];\n    const length = nextTransforms.length;\n    const nextTransformAppendedIndexes: any[] = originalDatas.nextTransformAppendedIndexes;\n    let nextIndex = 0;\n\n    if (index === -1) {\n        // translate => rotate => scale\n        if (functionName === \"translate\") {\n            nextIndex = 0;\n        } else if (functionName === \"rotate\") {\n            nextIndex = findIndex(nextTransforms, text => text.match(/scale\\(/g,));\n        }\n        if (nextIndex === -1) {\n            nextIndex = nextTransforms.length;\n        }\n        datas.transformIndex = nextIndex;\n    } else if (find(nextTransformAppendedIndexes, info => info.index === index && info.functionName === functionName)) {\n        nextIndex = index;\n    } else {\n        nextIndex = index + nextTransformAppendedIndexes.filter(info => info.index < index).length;\n    }\n\n    const result = convertTransformInfo(nextTransforms, nextIndex);\n    const targetFunction = result.targetFunction;\n    const matFunctionName = functionName === \"rotate\" ? \"rotateZ\" : functionName;\n\n    datas.beforeFunctionTexts = result.beforeFunctionTexts;\n    datas.afterFunctionTexts = result.afterFunctionTexts;\n    datas.beforeTransform = result.beforeFunctionMatrix;\n    datas.beforeTransform2 = result.beforeFunctionMatrix2;\n    datas.targetTansform = result.targetFunctionMatrix;\n    datas.afterTransform = result.afterFunctionMatrix;\n    datas.afterTransform2 = result.afterFunctionMatrix2;\n    datas.targetAllTransform = result.allFunctionMatrix;\n\n    if (targetFunction.functionName === matFunctionName) {\n        datas.afterFunctionTexts.splice(0, 1);\n        datas.isAppendTransform = false;\n    } else if (length > nextIndex) {\n        datas.isAppendTransform = true;\n\n        originalDatas.nextTransformAppendedIndexes = [...nextTransformAppendedIndexes, {\n            functionName,\n            index: nextIndex,\n            isAppend: true,\n        }];\n    }\n}\n\nexport function convertTransformFormat(datas: any, value: any, dist: any) {\n    return `${datas.beforeFunctionTexts.join(\" \")} ${datas.isAppendTransform ? dist : value} ${datas.afterFunctionTexts.join(\" \")}`;\n}\nexport function getTransformDist({ datas, distX, distY }: any) {\n    const [bx, by] = getBeforeDragDist({ datas, distX, distY });\n    // B * [tx, ty] * A = [bx, by] * targetMatrix;\n    // [tx, ty] = B-1 * [bx, by] * targetMatrix * A-1 * [0, 0];\n\n    const res = getTransfromMatrix(datas, fromTranslation([bx, by], 4));\n\n    return calculate(res, convertPositionMatrix([0, 0, 0], 4), 4);\n}\nexport function getTransfromMatrix(datas: any, targetMatrix: number[], isAfter?: boolean) {\n    const {\n        beforeTransform,\n        afterTransform,\n        beforeTransform2,\n        afterTransform2,\n        targetAllTransform,\n    } = datas;\n\n    // B * afterTargetMatrix * A = (targetMatrix * targetAllTransform)\n    // afterTargetMatrix = B-1 * targetMatrix * targetAllTransform * A-1\n    // nextTargetMatrix = (targetMatrix * targetAllTransform)\n    const nextTargetMatrix\n        = isAfter\n            ? multiply(targetAllTransform, targetMatrix, 4)\n            : multiply(targetMatrix, targetAllTransform, 4);\n\n    // res1 = B-1 * nextTargetMatrix\n    const res1 = multiply(invert(isAfter ? beforeTransform2 : beforeTransform, 4), nextTargetMatrix, 4);\n\n    // res3 = res2 * A-1\n    const afterTargetMatrix = multiply(res1, invert(isAfter ? afterTransform2 : afterTransform, 4), 4);\n\n    return afterTargetMatrix;\n}\nexport function getBeforeDragDist({ datas, distX, distY }: any) {\n    // TT = BT\n    const {\n        inverseBeforeMatrix,\n        is3d,\n        startDragBeforeDist,\n        absoluteOrigin,\n    } = datas;\n    const n = is3d ? 4 : 3;\n\n    // ABS_ORIGIN * [distX, distY] = BM * (ORIGIN + [tx, ty])\n    // BM -1 * ABS_ORIGIN * [distX, distY] - ORIGIN = [tx, ty]\n    return minus(\n        calculate(\n            inverseBeforeMatrix,\n            plus(absoluteOrigin, [distX, distY]),\n            n,\n        ),\n        startDragBeforeDist,\n    );\n}\nexport function getDragDist({ datas, distX, distY }: any, isBefore?: boolean) {\n    const {\n        inverseBeforeMatrix,\n        inverseMatrix,\n        is3d,\n        startDragBeforeDist,\n        startDragDist,\n        absoluteOrigin,\n    } = datas;\n    const n = is3d ? 4 : 3;\n\n    return minus(\n        calculate(\n            isBefore ? inverseBeforeMatrix : inverseMatrix,\n            plus(absoluteOrigin, [distX, distY]),\n            n,\n        ),\n        isBefore ? startDragBeforeDist : startDragDist,\n    );\n}\nexport function getInverseDragDist({ datas, distX, distY }: any, isBefore?: boolean) {\n    const {\n        beforeMatrix,\n        matrix,\n        is3d,\n        startDragBeforeDist,\n        startDragDist,\n        absoluteOrigin,\n    } = datas;\n    const n = is3d ? 4 : 3;\n\n    return minus(\n        calculate(\n            isBefore ? beforeMatrix : matrix,\n            plus(isBefore ? startDragBeforeDist : startDragDist, [distX, distY]),\n            n,\n        ),\n        absoluteOrigin,\n    );\n}\n\nexport function calculateTransformOrigin(\n    transformOrigin: string[],\n    width: number,\n    height: number,\n    prevWidth: number = width,\n    prevHeight: number = height,\n    prevOrigin: number[] = [0, 0],\n) {\n\n    if (!transformOrigin) {\n        return prevOrigin;\n    }\n    return transformOrigin.map((pos, i) => {\n        const { value, unit } = splitUnit(pos);\n\n        const prevSize = (i ? prevHeight : prevWidth);\n        const size = (i ? height : width);\n        if (pos === \"%\" || isNaN(value)) {\n            // no value but %\n\n            const measureRatio = prevSize ? prevOrigin[i] / prevSize : 0;\n\n            return size * measureRatio;\n        } else if (unit !== \"%\") {\n            return value;\n        }\n        return size * value / 100;\n    });\n}\nexport function getPosIndexesByDirection(direction: number[]) {\n    const indexes: number[] = [];\n\n    if (direction[1] >= 0) {\n        if (direction[0] >= 0) {\n            indexes.push(3);\n        }\n        if (direction[0] <= 0) {\n            indexes.push(2);\n        }\n    }\n    if (direction[1] <= 0) {\n        if (direction[0] >= 0) {\n            indexes.push(1);\n        }\n        if (direction[0] <= 0) {\n            indexes.push(0);\n        }\n    }\n    return indexes;\n}\nexport function getPosesByDirection(\n    poses: number[][],\n    direction: number[],\n) {\n    /*\n    [-1, -1](pos1)       [0, -1](pos1,pos2)       [1, -1](pos2)\n    [-1, 0](pos1, pos3)                           [1, 0](pos2, pos4)\n    [-1, 1](pos3)        [0, 1](pos3, pos4)       [1, 1](pos4)\n    */\n    return getPosIndexesByDirection(direction).map(index => poses[index]);\n}\nexport function getPosByDirection(\n    poses: number[][],\n    direction: number[],\n) {\n    const xRatio = (direction[0] + 1) / 2;\n    const yRatio = (direction[1] + 1) / 2;\n\n    const top = [\n        dot(poses[0][0], poses[1][0], xRatio, 1 - xRatio),\n        dot(poses[0][1], poses[1][1], xRatio, 1 - xRatio),\n    ];\n    const bottom = [\n        dot(poses[2][0], poses[3][0], xRatio, 1 - xRatio),\n        dot(poses[2][1], poses[3][1], xRatio, 1 - xRatio),\n    ];\n    return [\n        dot(top[0], bottom[0], yRatio, 1 - yRatio),\n        dot(top[1], bottom[1], yRatio, 1 - yRatio),\n    ];\n}\n\nfunction getDist(\n    startPos: number[],\n    matrix: number[],\n    width: number,\n    height: number,\n    n: number,\n    fixedDirection: number[],\n) {\n    const poses = calculatePoses(matrix, width, height, n);\n    const fixedPos = getPosByDirection(poses, fixedDirection);\n    const distX = startPos[0] - fixedPos[0];\n    const distY = startPos[1] - fixedPos[1];\n\n    return [distX, distY];\n}\nexport function getNextMatrix(\n    offsetMatrix: number[],\n    targetMatrix: number[],\n    origin: number[],\n    n: number,\n) {\n    return multiply(\n        offsetMatrix,\n        getAbsoluteMatrix(targetMatrix, n, origin),\n        n,\n    );\n}\nexport function getNextTransformMatrix(\n    state: MoveableManagerState<any>,\n    datas: any,\n    transform: string,\n) {\n    const {\n        transformOrigin,\n        offsetMatrix,\n        is3d,\n    } = state;\n    const {\n        beforeTransform,\n        afterTransform,\n    } = datas;\n    const n = is3d ? 4 : 3;\n    const targetTransform = parseMat([transform]);\n\n    return getNextMatrix(\n        offsetMatrix,\n        convertDimension(multiply(multiply(beforeTransform, targetTransform as any, 4), afterTransform, 4), 4, n),\n        transformOrigin,\n        n,\n    );\n}\nexport function scaleMatrix(\n    state: MoveableManagerState<any>,\n    scale: number[],\n) {\n    const {\n        transformOrigin,\n        offsetMatrix,\n        is3d,\n        targetMatrix,\n    } = state;\n    const n = is3d ? 4 : 3;\n\n    return getNextMatrix(\n        offsetMatrix,\n        multiply(targetMatrix, createScaleMatrix(scale, n), n),\n        transformOrigin,\n        n,\n    );\n}\n\nexport function fillTransformStartEvent(e: any): OnTransformStartEvent {\n    const originalDatas = getBeforeRenderableDatas(e);\n    return {\n        setTransform: (transform: string | string[], index = -1) => {\n            originalDatas.startTransforms = isArray(transform) ? transform : splitSpace(transform);\n            setTransformIndex(e, index);\n        },\n        setTransformIndex: (index: number) => {\n            setTransformIndex(e, index);\n        },\n    };\n}\nexport function setDefaultTransformIndex(e: any, property: string) {\n    const originalDatas = getBeforeRenderableDatas(e);\n    const startTransforms = originalDatas.startTransforms;\n\n    setTransformIndex(e, findIndex<string>(startTransforms, func => func.indexOf(`${property}(`) === 0));\n}\nexport function setTransformIndex(e: any, index: number) {\n    const originalDatas = getBeforeRenderableDatas(e);\n    const datas = e.datas;\n\n    datas.transformIndex = index;\n    if (index === -1) {\n        return;\n    }\n    const transform = originalDatas.startTransforms[index];\n\n    if (!transform) {\n        return;\n    }\n    const info = parse([transform]);\n\n    datas.startValue = info[0].functionValue;\n}\nexport function fillOriginalTransform(\n    e: any,\n    transform: string,\n) {\n    const originalDatas = getBeforeRenderableDatas(e);\n\n    originalDatas.nextTransforms = splitSpace(transform);\n    // originalDatas.nextTargetMatrix = parseMat(transform);\n}\nexport function getBeforeRenderableDatas(e: any) {\n    return e.originalDatas.beforeRenderable;\n}\nexport function getNextTransforms(e: any) {\n    const {\n        originalDatas: {\n            beforeRenderable: originalDatas,\n        },\n    } = e;\n\n    return originalDatas.nextTransforms;\n}\nexport function getNextTransformText(e: any) {\n    return getNextTransforms(e).join(\" \");\n}\n\nexport function getNextStyle(e: any) {\n    return getBeforeRenderableDatas(e).nextStyle;\n}\n\nexport function fillTransformEvent(\n    moveable: MoveableManagerInterface<DraggableProps>,\n    nextTransform: string,\n    delta: number[],\n    isPinch: boolean,\n    e: any,\n): OnTransformEvent {\n    fillOriginalTransform(e, nextTransform);\n\n    const drag = Draggable.drag!(\n        moveable,\n        setCustomDrag(e, moveable.state, delta, isPinch, false),\n    ) as OnDrag;\n    const afterTransform = drag ? drag.transform : nextTransform;\n    return {\n        transform: nextTransform,\n        drag: drag as OnDrag,\n        ...fillCSSObject({\n            transform: afterTransform,\n        }, e),\n        afterTransform,\n    };\n}\nexport function getTranslateDist(\n    moveable: MoveableManagerInterface<any>,\n    transform: string,\n    fixedDirection: number[],\n    fixedPosition: number[],\n    datas: any,\n) {\n    const state = moveable.state;\n    const {\n        left,\n        top,\n    } = state;\n\n    const groupable = moveable.props.groupable;\n    const nextMatrix = getNextTransformMatrix(moveable.state, datas, transform);\n    const groupLeft = groupable ? left : 0;\n    const groupTop = groupable ? top : 0;\n    const nextFixedPosition = getDirectionOffset(moveable, fixedDirection, nextMatrix);\n    const dist = minus(fixedPosition, nextFixedPosition);\n    return minus(dist, [groupLeft, groupTop]);\n}\nexport function getScaleDist(\n    moveable: MoveableManagerInterface<any>,\n    scaleDist: number[],\n    fixedDirection: number[],\n    fixedPosition: number[],\n    datas: any,\n) {\n    const dist = getTranslateDist(\n        moveable,\n        `scale(${scaleDist.join(\", \")})`,\n        fixedDirection,\n        fixedPosition,\n        datas,\n    );\n\n    return dist;\n}\nexport function getOriginDirection(moveable: MoveableManagerInterface<any>) {\n    const {\n        width,\n        height,\n        transformOrigin,\n    } = moveable.state;\n    return [\n        -1 + transformOrigin[0] / (width / 2),\n        -1 + transformOrigin[1] / (height / 2),\n    ];\n}\nexport function getDirectionByPos(\n    pos: number[],\n    width: number,\n    height: number,\n) {\n    return [\n        -1 + pos[0] / (width / 2),\n        -1 + pos[1] / (height / 2),\n    ];\n}\nexport function getDirectionOffset(\n    moveable: MoveableManagerInterface, direction: number[],\n    nextMatrix: number[] = moveable.state.allMatrix,\n) {\n    const {\n        width,\n        height,\n        is3d,\n    } = moveable.state;\n    const n = is3d ? 4 : 3;\n    const nextFixedOffset = [\n        width / 2 * (1 + direction[0]),\n        height / 2 * (1 + direction[1]),\n    ];\n    return calculatePosition(nextMatrix, nextFixedOffset, n);\n}\nexport function getRotateDist(\n    moveable: MoveableManagerInterface<any>,\n    rotateDist: number,\n    datas: any,\n) {\n    const fixedDirection = datas.fixedDirection;\n    const fixedPosition = datas.fixedPosition;\n\n    return getTranslateDist(\n        moveable,\n        `rotate(${rotateDist}deg)`,\n        fixedDirection,\n        fixedPosition,\n        datas,\n    );\n}\nexport function getResizeDist(\n    moveable: MoveableManagerInterface<any>,\n    width: number,\n    height: number,\n    fixedPosition: number[],\n    transformOrigin: string[],\n    datas: any,\n) {\n    const {\n        groupable,\n    } = moveable.props;\n    const state = moveable.state;\n    const {\n        transformOrigin: prevOrigin,\n        offsetMatrix,\n        is3d,\n        width: prevWidth,\n        height: prevHeight,\n        left,\n        top,\n    } = state;\n    const fixedDirection = datas.fixedDirection;\n    const targetMatrix = datas.nextTargetMatrix || state.targetMatrix;\n    const n = is3d ? 4 : 3;\n    const nextOrigin = calculateTransformOrigin(\n        transformOrigin!,\n        width,\n        height,\n        prevWidth,\n        prevHeight,\n        prevOrigin,\n    );\n    const groupLeft = groupable ? left : 0;\n    const groupTop = groupable ? top : 0;\n    const nextMatrix = getNextMatrix(offsetMatrix, targetMatrix, nextOrigin, n);\n    const dist = getDist(fixedPosition, nextMatrix, width, height, n, fixedDirection);\n\n    return minus(dist, [groupLeft, groupTop]);\n}\nexport function getAbsolutePosition(\n    moveable: MoveableManagerInterface<ResizableProps>,\n    direction: number[],\n) {\n    return getPosByDirection(getAbsolutePosesByState(moveable.state), direction);\n}\n","import { MoveableManagerInterface } from \"../types\";\n\nexport function getGestoData(moveable: MoveableManagerInterface, ableName: string) {\n    const targetGesto = moveable.targetGesto;\n    const controlGesto = moveable.controlGesto;\n    let data!: Record<string, any>;\n\n    if (targetGesto?.isFlag()) {\n        data = targetGesto.getEventData()[ableName];\n    }\n\n    if (!data && controlGesto?.isFlag()) {\n        data = controlGesto.getEventData()[ableName];\n    }\n\n    return data || {};\n}\n","import { PREFIX, IS_WEBKIT605, TINY_NUM } from \"./consts\";\nimport { prefixNames, InvertObject } from \"framework-utils\";\nimport {\n    isUndefined, isObject, splitUnit,\n    IObject, hasClass, isArray, isString, getRad,\n    getShapeDirection, isFunction, convertUnitSize, between, getKeys, decamelize,\n} from \"@daybrush/utils\";\nimport {\n    multiply, invert,\n    convertDimension, createIdentityMatrix,\n    createOriginMatrix, convertPositionMatrix, calculate,\n    multiplies,\n    minus,\n    createScaleMatrix,\n    plus,\n    convertMatrixtoCSS,\n    rotate,\n} from \"@scena/matrix\";\nimport {\n    MoveableManagerState, Able, MoveableClientRect,\n    MoveableProps, ArrayFormat, MoveableRefType,\n    MatrixInfo, ExcludeEndParams, ExcludeParams,\n    ElementSizes, MoveablePosition, TransformObject,\n    MoveableRefTargetsResultType, MoveableRefTargetType, MoveableManagerInterface, CSSObject,\n} from \"./types\";\nimport { parse, toMat, calculateMatrixDist, parseMat } from \"css-to-mat\";\nimport { getBeforeRenderableDatas, getDragDist } from \"./gesto/GestoUtils\";\nimport { getGestoData } from \"./gesto/GestoData\";\n\nexport function round(num: number) {\n    return Math.round(num);\n}\nexport function multiply2(pos1: number[], pos2: number[]) {\n    return [\n        pos1[0] * pos2[0],\n        pos1[1] * pos2[1],\n    ];\n}\nexport function prefix(...classNames: string[]) {\n    return prefixNames(PREFIX, ...classNames);\n}\n\nexport function defaultSync(fn: () => void) {\n    fn();\n}\n\nexport function createIdentityMatrix3() {\n    return createIdentityMatrix(3);\n}\n\nexport function getTransformMatrix(transform: string | number[]) {\n    if (!transform || transform === \"none\") {\n        return [1, 0, 0, 1, 0, 0];\n\n    }\n    if (isObject(transform)) {\n        return transform;\n    }\n    return parseMat(transform);\n}\nexport function getAbsoluteMatrix(matrix: number[], n: number, origin: number[]) {\n    return multiplies(\n        n,\n        createOriginMatrix(origin, n),\n        matrix,\n        createOriginMatrix(origin.map(a => -a), n),\n    );\n}\nexport function measureSVGSize(el: SVGElement, unit: string, isHorizontal: boolean) {\n    if (unit === \"%\") {\n        const viewBox = getSVGViewBox(el.ownerSVGElement!);\n\n        return viewBox[isHorizontal ? \"width\" : \"height\"] / 100;\n    }\n    return 1;\n}\nexport function getBeforeTransformOrigin(el: SVGElement) {\n    const relativeOrigin = getTransformOrigin(getComputedStyle(el, \":before\"));\n\n    return relativeOrigin.map((o, i) => {\n        const { value, unit } = splitUnit(o);\n\n        return value * measureSVGSize(el, unit, i === 0);\n    });\n}\nexport function getTransformOrigin(style: CSSStyleDeclaration) {\n    const transformOrigin = style.transformOrigin;\n\n    return transformOrigin ? transformOrigin.split(\" \") : [\"0\", \"0\"];\n}\nexport function getElementTransform(\n    target: HTMLElement | SVGElement,\n    computedStyle = getComputedStyle(target),\n) {\n    const computedTransform = computedStyle.transform;\n\n    if (computedTransform && computedTransform !== \"none\") {\n        return computedStyle.transform;\n    }\n    if (\"transform\" in target) {\n        const list = (target as any).transform as SVGAnimatedTransformList;\n        const baseVal = list.baseVal;\n\n        if (!baseVal) {\n            return \"\";\n        }\n        const length = baseVal.length;\n\n        if (!length) {\n            return \"\";\n        }\n\n        const matrixes: string[] = [];\n\n        for (let i = 0; i < length; ++i) {\n            const matrix = baseVal[i].matrix;\n\n            matrixes.push(`matrix(${([\"a\", \"b\", \"c\", \"d\", \"e\", \"f\"] as const).map(chr => matrix[chr]).join(\", \")})`);\n        }\n        return matrixes.join(\" \");\n\n    }\n    return \"\";\n}\n\nexport function getOffsetInfo(\n    el: SVGElement | HTMLElement | null | undefined,\n    lastParent: SVGElement | HTMLElement | null | undefined,\n    isParent?: boolean,\n    checkZoom?: boolean,\n    targetStyle?: CSSStyleDeclaration,\n) {\n    const doc = el && el.ownerDocument ? el.ownerDocument : document;\n    const documentElement = doc.documentElement || doc.body;\n    let hasSlot = false;\n    let target: HTMLElement | SVGElement | null | undefined;\n    let parentSlotElement: HTMLElement | null | undefined;\n\n    if (!el || isParent) {\n        target = el;\n    } else {\n        const assignedSlotParentElement = el?.assignedSlot?.parentElement;\n        const parentElement = el.parentElement;\n\n        if (assignedSlotParentElement) {\n            hasSlot = true;\n            parentSlotElement = parentElement;\n            target = assignedSlotParentElement;\n        } else {\n            target = parentElement;\n        }\n    }\n\n    let isCustomElement = false;\n    let isEnd = el === lastParent || target === lastParent;\n    let position = \"relative\";\n    let offsetZoom = 1;\n\n\n    const targetZoom = parseFloat((targetStyle as any)?.zoom) || 1;\n    const targetPosition = targetStyle?.position;\n\n\n\n    while (target && target !== documentElement) {\n        if (lastParent === target) {\n            isEnd = true;\n        }\n        const style = getComputedStyle(target);\n        const tagName = target.tagName.toLowerCase();\n        const transform = getElementTransform(target as SVGElement, style);\n        const willChange = style.willChange;\n        const zoom = parseFloat((style as any).zoom) || 1;\n        position = style.position!;\n\n        if (checkZoom && zoom !== 1) {\n            offsetZoom = zoom;\n            break;\n        }\n        if (\n            // offsetParent is the parentElement if the target's zoom is not 1 and not absolute.\n            !isParent && checkZoom && targetZoom !== 1 && targetPosition && targetPosition !== \"absolute\"\n            || tagName === \"svg\"\n            || position !== \"static\"\n            || (transform && transform !== \"none\")\n            || willChange === \"transform\"\n        ) {\n            break;\n        }\n        const slotParentNode = el?.assignedSlot?.parentNode;\n        const targetParentNode = target.parentNode;\n\n        if (slotParentNode) {\n            hasSlot = true;\n            parentSlotElement = targetParentNode as HTMLElement;\n        }\n        const parentNode = slotParentNode || targetParentNode;\n\n\n        if (parentNode && parentNode.nodeType === 11) {\n            // Shadow Root\n            target = (parentNode as ShadowRoot).host as HTMLElement;\n            isCustomElement = true;\n\n            break;\n        }\n        target = parentNode as HTMLElement | SVGElement;\n        position = \"relative\";\n    }\n    return {\n        offsetZoom,\n        hasSlot,\n        parentSlotElement,\n        isCustomElement,\n        isStatic: position === \"static\",\n        isEnd: isEnd || !target || target === documentElement,\n        offsetParent: target as HTMLElement || documentElement,\n    };\n\n}\nexport function getOffsetPosInfo(\n    el: HTMLElement | SVGElement,\n    target: HTMLElement | SVGElement,\n    style: CSSStyleDeclaration,\n) {\n    const tagName = el.tagName.toLowerCase();\n    let offsetLeft = (el as HTMLElement).offsetLeft;\n    let offsetTop = (el as HTMLElement).offsetTop;\n\n    // svg\n    const isSVG = isUndefined(offsetLeft);\n    let hasOffset = !isSVG;\n    let origin: number[];\n    let targetOrigin: number[];\n    // inner svg element\n    if (!hasOffset && tagName !== \"svg\") {\n        origin = IS_WEBKIT605\n            ? getBeforeTransformOrigin(el as SVGElement)\n            : getTransformOrigin(style).map(pos => parseFloat(pos));\n\n        targetOrigin = origin.slice();\n        hasOffset = true;\n\n        [\n            offsetLeft, offsetTop, origin[0], origin[1],\n        ] = getSVGGraphicsOffset(\n            el as SVGGraphicsElement,\n            origin,\n            el === target && target.tagName.toLowerCase() === \"g\",\n        );\n    } else {\n        origin = getTransformOrigin(style).map(pos => parseFloat(pos));\n        targetOrigin = origin.slice();\n    }\n    return {\n        tagName,\n        isSVG,\n        hasOffset,\n        offset: [offsetLeft || 0, offsetTop || 0],\n        origin,\n        targetOrigin,\n    };\n}\nexport function getBodyOffset(\n    el: HTMLElement | SVGElement,\n    isSVG: boolean,\n    style: CSSStyleDeclaration = getComputedStyle(el),\n) {\n    const bodyStyle = getComputedStyle(document.body);\n    const bodyPosition = bodyStyle.position;\n    if (!isSVG && (!bodyPosition || bodyPosition === \"static\")) {\n        return [0, 0];\n    }\n\n    let marginLeft = parseInt(bodyStyle.marginLeft, 10);\n    let marginTop = parseInt(bodyStyle.marginTop, 10);\n\n    if (style.position === \"absolute\") {\n        if (style.top !== \"auto\" || style.bottom !== \"auto\") {\n            marginTop = 0;\n        }\n        if (style.left !== \"auto\" || style.right !== \"auto\") {\n            marginLeft = 0;\n        }\n    }\n\n    return [marginLeft, marginTop];\n}\nexport function convert3DMatrixes(matrixes: MatrixInfo[]) {\n    matrixes.forEach(info => {\n        const matrix = info.matrix;\n\n        if (matrix) {\n            info.matrix = convertDimension(matrix, 3, 4);\n        }\n    });\n}\n\nexport function getBodyScrollPos() {\n    return [\n        document.documentElement.scrollLeft || document.body.scrollLeft,\n        document.documentElement.scrollTop || document.body.scrollTop,\n    ];\n}\n\nexport function getPositionFixedInfo(el: HTMLElement | SVGElement) {\n    let fixedContainer = el.parentElement;\n    let hasTransform = false;\n\n    while (fixedContainer) {\n        const transform = getComputedStyle(fixedContainer).transform;\n\n\n        if (transform && transform !== \"none\") {\n            hasTransform = true;\n            break;\n        }\n        if (fixedContainer === document.body) {\n            break;\n        }\n        fixedContainer = fixedContainer.parentElement;\n    }\n\n    return {\n        fixedContainer: fixedContainer || document.body,\n        hasTransform,\n    };\n}\n\nexport function makeMatrixCSS(matrix: number[], is3d: boolean = matrix.length > 9) {\n    return `${is3d ? \"matrix3d\" : \"matrix\"}(${convertMatrixtoCSS(matrix, !is3d).join(\",\")})`;\n}\nexport function getSVGViewBox(el: SVGSVGElement) {\n    const clientWidth = el.clientWidth;\n    const clientHeight = el.clientHeight;\n\n    if (!el) {\n        return { x: 0, y: 0, width: 0, height: 0, clientWidth, clientHeight };\n    }\n    const viewBox = el.viewBox;\n    const baseVal = (viewBox && viewBox.baseVal) || { x: 0, y: 0, width: 0, height: 0 };\n\n    return {\n        x: baseVal.x,\n        y: baseVal.y,\n        width: baseVal.width || clientWidth,\n        height: baseVal.height || clientHeight,\n        clientWidth,\n        clientHeight,\n    };\n}\nexport function getSVGMatrix(\n    el: SVGSVGElement,\n    n: number,\n) {\n    const {\n        width: viewBoxWidth,\n        height: viewBoxHeight,\n        clientWidth,\n        clientHeight,\n    } = getSVGViewBox(el);\n    const scaleX = clientWidth / viewBoxWidth;\n    const scaleY = clientHeight / viewBoxHeight;\n\n    const preserveAspectRatio = el.preserveAspectRatio.baseVal;\n    // https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/preserveAspectRatio\n    const align = preserveAspectRatio.align;\n    // 1 : meet 2: slice\n    const meetOrSlice = preserveAspectRatio.meetOrSlice;\n    const svgOrigin = [0, 0];\n    const scale = [scaleX, scaleY];\n    const translate = [0, 0];\n\n    if (align !== 1) {\n        const xAlign = (align - 2) % 3;\n        const yAlign = Math.floor((align - 2) / 3);\n\n        svgOrigin[0] = viewBoxWidth * xAlign / 2;\n        svgOrigin[1] = viewBoxHeight * yAlign / 2;\n\n        const scaleDimension = meetOrSlice === 2 ? Math.max(scaleY, scaleX) : Math.min(scaleX, scaleY);\n\n        scale[0] = scaleDimension;\n        scale[1] = scaleDimension;\n\n        translate[0] = (clientWidth - viewBoxWidth) / 2 * xAlign;\n        translate[1] = (clientHeight - viewBoxHeight) / 2 * yAlign;\n    }\n    const scaleMatrix = createScaleMatrix(scale, n);\n    [\n        scaleMatrix[n * (n - 1)],\n        scaleMatrix[n * (n - 1) + 1],\n    ] = translate;\n\n    return getAbsoluteMatrix(\n        scaleMatrix,\n        n,\n        svgOrigin,\n    );\n}\nexport function getSVGGraphicsOffset(\n    el: SVGGraphicsElement,\n    origin: number[],\n    isGTarget?: boolean,\n) {\n    if (!el.getBBox || !isGTarget && el.tagName.toLowerCase() === \"g\") {\n        return [0, 0, 0, 0];\n    }\n    const bbox = el.getBBox();\n    const viewBox = getSVGViewBox(el.ownerSVGElement!);\n    const left = bbox.x - viewBox.x;\n    const top = bbox.y - viewBox.y;\n\n    return [\n        left,\n        top,\n        origin[0] - left,\n        origin[1] - top,\n    ];\n}\nexport function calculatePosition(matrix: number[], pos: number[], n: number) {\n    return calculate(matrix, convertPositionMatrix(pos, n), n);\n}\nexport function calculatePoses(matrix: number[], width: number, height: number, n: number) {\n    return [[0, 0], [width, 0], [0, height], [width, height]].map(pos => calculatePosition(matrix, pos, n));\n}\nexport function getRect(poses: number[][]) {\n    const posesX = poses.map(pos => pos[0]);\n    const posesY = poses.map(pos => pos[1]);\n    const left = Math.min(...posesX);\n    const top = Math.min(...posesY);\n    const right = Math.max(...posesX);\n    const bottom = Math.max(...posesY);\n    const rectWidth = right - left;\n    const rectHeight = bottom - top;\n\n    return {\n        left, top,\n        right, bottom,\n        width: rectWidth,\n        height: rectHeight,\n    };\n}\nexport function calculateRect(matrix: number[], width: number, height: number, n: number) {\n    const poses = calculatePoses(matrix, width, height, n);\n\n    return getRect(poses);\n}\nexport function getSVGOffset(\n    offsetInfo: MatrixInfo,\n    targetInfo: MatrixInfo,\n    container: HTMLElement | SVGElement,\n    n: number,\n    beforeMatrix: number[],\n) {\n    const target = offsetInfo.target;\n    const origin = offsetInfo.origin!;\n    const targetMatrix = targetInfo.matrix!;\n    const {\n        offsetWidth: width,\n        offsetHeight: height,\n    } = getSize(target);\n    const containerClientRect = container.getBoundingClientRect();\n    let margin = [0, 0];\n\n    if (container === document.body) {\n        margin = getBodyOffset(target, true);\n    }\n\n    const rect = target.getBoundingClientRect();\n    const rectLeft\n        = rect.left - containerClientRect.left + container.scrollLeft\n        - (container.clientLeft || 0) + margin[0];\n    const rectTop\n        = rect.top - containerClientRect.top + container.scrollTop\n        - (container.clientTop || 0) + margin[1];\n    const rectWidth = rect.width;\n    const rectHeight = rect.height;\n\n    const mat = multiplies(\n        n,\n        beforeMatrix,\n        targetMatrix,\n    );\n    const {\n        left: prevLeft,\n        top: prevTop,\n        width: prevWidth,\n        height: prevHeight,\n    } = calculateRect(mat, width, height, n);\n    const posOrigin = calculatePosition(mat, origin, n);\n    const prevOrigin = minus(posOrigin, [prevLeft, prevTop]);\n    const rectOrigin = [\n        rectLeft + prevOrigin[0] * rectWidth / prevWidth,\n        rectTop + prevOrigin[1] * rectHeight / prevHeight,\n    ];\n    const offset = [0, 0];\n    let count = 0;\n\n    while (++count < 10) {\n        const inverseBeforeMatrix = invert(beforeMatrix, n);\n        [offset[0], offset[1]] = minus(\n            calculatePosition(inverseBeforeMatrix, rectOrigin, n),\n            calculatePosition(inverseBeforeMatrix, posOrigin, n),\n        );\n        const mat2 = multiplies(\n            n,\n            beforeMatrix,\n            createOriginMatrix(offset, n),\n            targetMatrix,\n        );\n        const {\n            left: nextLeft,\n            top: nextTop,\n        } = calculateRect(mat2, width, height, n);\n        const distLeft = nextLeft - rectLeft;\n        const distTop = nextTop - rectTop;\n\n        if (Math.abs(distLeft) < 2 && Math.abs(distTop) < 2) {\n            break;\n        }\n        rectOrigin[0] -= distLeft;\n        rectOrigin[1] -= distTop;\n    }\n    return offset.map(p => Math.round(p));\n}\n\nexport function calculateMoveableClientPositions(\n    rootMatrix: number[],\n    poses: number[][],\n    rootClientRect: MoveableClientRect,\n) {\n    const is3d = rootMatrix.length === 16;\n    const n = is3d ? 4 : 3;\n    const rootPoses = poses.map(pos => calculatePosition(rootMatrix, pos, n));\n    const { left, top } = rootClientRect;\n\n    return rootPoses.map(pos => {\n        return [pos[0] + left, pos[1] + top];\n    });\n\n}\nexport function calculateMoveablePosition(\n    matrix: number[],\n    origin: number[],\n    width: number,\n    height: number,\n): MoveablePosition {\n    const is3d = matrix.length === 16;\n    const n = is3d ? 4 : 3;\n    const poses = calculatePoses(matrix, width, height, n);\n    let [\n        [x1, y1],\n        [x2, y2],\n        [x3, y3],\n        [x4, y4],\n    ] = poses;\n    let [originX, originY] = calculatePosition(matrix, origin, n);\n\n    const left = Math.min(x1, x2, x3, x4);\n    const top = Math.min(y1, y2, y3, y4);\n    const right = Math.max(x1, x2, x3, x4);\n    const bottom = Math.max(y1, y2, y3, y4);\n\n    x1 = (x1 - left) || 0;\n    x2 = (x2 - left) || 0;\n    x3 = (x3 - left) || 0;\n    x4 = (x4 - left) || 0;\n\n    y1 = (y1 - top) || 0;\n    y2 = (y2 - top) || 0;\n    y3 = (y3 - top) || 0;\n    y4 = (y4 - top) || 0;\n\n    originX = (originX - left) || 0;\n    originY = (originY - top) || 0;\n\n    const direction = getShapeDirection(calculatePoses(matrix, 100, 100, n));\n    return {\n        left,\n        top,\n        right,\n        bottom,\n        origin: [originX, originY],\n        pos1: [x1, y1],\n        pos2: [x2, y2],\n        pos3: [x3, y3],\n        pos4: [x4, y4],\n        direction,\n    };\n}\nexport function getDistSize(vec: number[]) {\n    return Math.sqrt(vec[0] * vec[0] + vec[1] * vec[1]);\n}\nexport function getDiagonalSize(pos1: number[], pos2: number[]) {\n    return getDistSize([\n        pos2[0] - pos1[0],\n        pos2[1] - pos1[1],\n    ]);\n}\nexport function getLineStyle(pos1: number[], pos2: number[], zoom = 1, rad: number = getRad(pos1, pos2)) {\n    const width = getDiagonalSize(pos1, pos2);\n\n    return {\n        transform: `translateY(-50%) translate(${pos1[0]}px, ${pos1[1]}px) rotate(${rad}rad) scaleY(${zoom})`,\n        width: `${width}px`,\n    };\n}\nexport function getControlTransform(rotation: number, zoom: number, ...poses: number[][]) {\n    const length = poses.length;\n\n    const x = poses.reduce((prev, pos) => prev + pos[0], 0) / length;\n    const y = poses.reduce((prev, pos) => prev + pos[1], 0) / length;\n    return {\n        transform: `translateZ(0px) translate(${x}px, ${y}px) rotate(${rotation}rad) scale(${zoom})`,\n    };\n}\nexport function getCSSSize(target: SVGElement | HTMLElement) {\n    const style = getComputedStyle(target);\n\n    return [\n        parseFloat(style.width!),\n        parseFloat(style.height!),\n    ];\n}\n\nexport function getProps<Props>(props: Props, ableName: keyof Props): Props {\n    const self = props[ableName];\n\n    if (isObject(self)) {\n        return {\n            ...props,\n            ...self,\n        };\n    }\n    return props;\n}\n\nexport function getSize(\n    target?: SVGElement | HTMLElement | null,\n    style: CSSStyleDeclaration | null = target ? getComputedStyle(target) : null,\n): ElementSizes {\n    const hasOffset = target && !isUndefined((target as any).offsetWidth);\n\n    let offsetWidth = 0;\n    let offsetHeight = 0;\n    let clientWidth = 0;\n    let clientHeight = 0;\n    let cssWidth = 0;\n    let cssHeight = 0;\n    let contentWidth = 0;\n    let contentHeight = 0;\n\n    let minWidth = 0;\n    let minHeight = 0;\n    let minOffsetWidth = 0;\n    let minOffsetHeight = 0;\n\n    let maxWidth = Infinity;\n    let maxHeight = Infinity;\n    let maxOffsetWidth = Infinity;\n    let maxOffsetHeight = Infinity;\n    let inlineCSSWidth = 0;\n    let inlineCSSHeight = 0;\n    let svg = false;\n\n    if (target) {\n        if (!hasOffset && target!.tagName.toLowerCase() !== \"svg\") {\n            const bbox = (target as SVGGraphicsElement).getBBox();\n\n            svg = true;\n            offsetWidth = bbox.width;\n            offsetHeight = bbox.height;\n            cssWidth = offsetWidth;\n            cssHeight = offsetHeight;\n            contentWidth = offsetWidth;\n            contentHeight = offsetHeight;\n            clientWidth = offsetWidth;\n            clientHeight = offsetHeight;\n        } else {\n            const targetStyle = target.style;\n            const boxSizing = style!.boxSizing === \"border-box\";\n            const borderLeft = parseFloat(style!.borderLeftWidth!) || 0;\n            const borderRight = parseFloat(style!.borderRightWidth!) || 0;\n            const borderTop = parseFloat(style!.borderTopWidth!) || 0;\n            const borderBottom = parseFloat(style!.borderBottomWidth!) || 0;\n            const paddingLeft = parseFloat(style!.paddingLeft!) || 0;\n            const paddingRight = parseFloat(style!.paddingRight!) || 0;\n            const paddingTop = parseFloat(style!.paddingTop!) || 0;\n            const paddingBottom = parseFloat(style!.paddingBottom!) || 0;\n\n            const horizontalPadding = paddingLeft + paddingRight;\n            const verticalPadding = paddingTop + paddingBottom;\n            const horizontalBorder = borderLeft + borderRight;\n            const verticalBorder = borderTop + borderBottom;\n            const horizontalOffset = horizontalPadding + horizontalBorder;\n            const verticalOffset = verticalPadding + verticalBorder;\n            const position = style!.position;\n\n            let containerWidth = 0;\n            let containerHeight = 0;\n\n            // SVGSVGElement, HTMLElement\n            if (\"clientLeft\" in target) {\n                let parentElement: HTMLElement | null = null;\n\n                if (position === \"absolute\") {\n                    const offsetInfo = getOffsetInfo(target, document.body);\n                    parentElement = offsetInfo.offsetParent;\n\n                } else {\n                    parentElement = target.parentElement;\n                }\n                if (parentElement) {\n                    const parentStyle = getComputedStyle(parentElement);\n\n                    containerWidth = parseFloat(parentStyle.width);\n                    containerHeight = parseFloat(parentStyle.height);\n                }\n            }\n            minWidth = Math.max(\n                horizontalPadding,\n                convertUnitSize(style!.minWidth, containerWidth) || 0,\n            );\n            minHeight = Math.max(\n                verticalPadding,\n                convertUnitSize(style!.minHeight, containerHeight) || 0,\n            );\n            maxWidth = convertUnitSize(style!.maxWidth, containerWidth);\n            maxHeight = convertUnitSize(style!.maxHeight, containerHeight);\n\n            if (isNaN(maxWidth)) {\n                maxWidth = Infinity;\n            }\n            if (isNaN(maxHeight)) {\n                maxHeight = Infinity;\n            }\n            inlineCSSWidth = convertUnitSize(targetStyle.width, 0) || 0;\n            inlineCSSHeight = convertUnitSize(targetStyle.height, 0) || 0;\n            cssWidth = parseFloat(style!.width) || 0;\n            cssHeight = parseFloat(style!.height) || 0;\n\n\n            contentWidth = Math.abs(cssWidth - inlineCSSWidth) < 1\n                ? between(minWidth, inlineCSSWidth || cssWidth, maxWidth)\n                : cssWidth;\n            contentHeight = Math.abs(cssHeight - inlineCSSHeight) < 1\n                ? between(minHeight, inlineCSSHeight || cssHeight, maxHeight)\n                : cssHeight;\n\n            offsetWidth = contentWidth;\n            offsetHeight = contentHeight;\n            clientWidth = contentWidth;\n            clientHeight = contentHeight;\n\n            if (boxSizing) {\n                maxOffsetWidth = maxWidth;\n                maxOffsetHeight = maxHeight;\n                minOffsetWidth = minWidth;\n                minOffsetHeight = minHeight;\n                contentWidth = offsetWidth - horizontalOffset;\n                contentHeight = offsetHeight - verticalOffset;\n            } else {\n                maxOffsetWidth = maxWidth + horizontalOffset;\n                maxOffsetHeight = maxHeight + verticalOffset;\n                minOffsetWidth = minWidth + horizontalOffset;\n                minOffsetHeight = minHeight + verticalOffset;\n                offsetWidth = contentWidth + horizontalOffset;\n                offsetHeight = contentHeight + verticalOffset;\n            }\n            clientWidth = contentWidth + horizontalPadding;\n            clientHeight = contentHeight + verticalPadding;\n        }\n    }\n\n    return {\n        svg,\n        offsetWidth,\n        offsetHeight,\n        clientWidth,\n        clientHeight,\n        contentWidth,\n        contentHeight,\n        inlineCSSWidth,\n        inlineCSSHeight,\n        cssWidth,\n        cssHeight,\n        minWidth,\n        minHeight,\n        maxWidth,\n        maxHeight,\n        minOffsetWidth,\n        minOffsetHeight,\n        maxOffsetWidth,\n        maxOffsetHeight,\n    };\n}\nexport function getRotationRad(\n    poses: number[][],\n    direction: number,\n) {\n    return getRad(direction > 0 ? poses[0] : poses[1], direction > 0 ? poses[1] : poses[0]);\n}\n\nexport function resetClientRect(): MoveableClientRect {\n    return {\n        left: 0, top: 0,\n        width: 0, height: 0,\n        right: 0,\n        bottom: 0,\n        clientLeft: 0, clientTop: 0,\n        clientWidth: 0, clientHeight: 0,\n        scrollWidth: 0, scrollHeight: 0,\n    };\n}\n\nexport function getExtendsRect(el: HTMLElement | SVGElement, rect: MoveableClientRect): MoveableClientRect {\n    const isRoot = el === document.body || el === document.documentElement;\n\n\n    const extendsRect =  {\n        clientLeft: el.clientLeft,\n        clientTop: el.clientTop,\n        clientWidth: el.clientWidth,\n        clientHeight: el.clientHeight,\n        scrollWidth: el.scrollWidth,\n        scrollHeight: el.scrollHeight,\n        overflow: false,\n    };\n\n    if (isRoot) {\n        extendsRect.clientHeight = Math.max(rect.height, extendsRect.clientHeight);\n        extendsRect.scrollHeight = Math.max(rect.height, extendsRect.scrollHeight);\n    }\n    extendsRect.overflow = getComputedStyle(el).overflow !== \"visible\";\n\n    return {\n        ...rect,\n        ...extendsRect,\n    };\n}\n\nexport function getClientRectByPosition(\n    position: { left: number, right: number, top: number, bottom: number },\n    base: MoveableClientRect,\n    el?: HTMLElement | SVGElement, isExtends?: boolean,\n) {\n    const {\n        left,\n        right,\n        top,\n        bottom,\n    } = position;\n    const baseTop = base.top;\n    const baseLeft = base.left;\n\n    const rect: MoveableClientRect = {\n        left: baseLeft + left,\n        top: baseTop + top,\n        right: baseLeft + right,\n        bottom: baseTop + bottom,\n        width: right - left,\n        height: bottom - top,\n    };\n\n\n    if (el && isExtends) {\n        return getExtendsRect(el, rect);\n    }\n    return rect;\n}\nexport function getClientRect(el: HTMLElement | SVGElement, isExtends?: boolean) {\n    let left = 0;\n    let top = 0;\n    let width = 0;\n    let height = 0;\n    // let isRoot = false;\n\n    if (el) {\n        // isRoot = el === document.body || el === document.documentElement;\n        // if (isRoot) {\n        //     width = window.innerWidth;\n        //     height = window.innerHeight;\n        //     const scrollPos = getBodyScrollPos();\n\n        //     [left, top] = [-scrollPos[0], -scrollPos[1]];\n        // } else {\n        const clientRect = el.getBoundingClientRect();\n\n        left = clientRect.left;\n        top = clientRect.top;\n        width = clientRect.width;\n        height = clientRect.height;\n        // }\n    }\n\n    const rect: MoveableClientRect = {\n        left,\n        top,\n        width,\n        height,\n        right: left + width,\n        bottom: top + height,\n    };\n\n    if (el && isExtends) {\n        return getExtendsRect(el, rect);\n    }\n    return rect;\n}\nexport function getTotalDirection(\n    parentDirection: number[],\n    isPinch: boolean,\n    inputEvent: any,\n    datas: any,\n) {\n    let direction: number[] | undefined;\n\n    if (parentDirection) {\n        direction = parentDirection;\n    } else if (isPinch) {\n        direction = [0, 0];\n    } else {\n        const target = inputEvent.target;\n\n        direction = getDirection(target, datas);\n    }\n    return direction;\n}\nexport function getDirection(target: SVGElement | HTMLElement, datas: any) {\n    if (!target) {\n        return;\n    }\n    const deg = target.getAttribute(\"data-rotation\") || \"\";\n    const direciton = target.getAttribute(\"data-direction\")!;\n\n    datas.deg = deg;\n\n    if (!direciton) {\n        return;\n    }\n    const dir = [0, 0];\n\n    (direciton.indexOf(\"w\") > -1) && (dir[0] = -1);\n    (direciton.indexOf(\"e\") > -1) && (dir[0] = 1);\n    (direciton.indexOf(\"n\") > -1) && (dir[1] = -1);\n    (direciton.indexOf(\"s\") > -1) && (dir[1] = 1);\n\n    return dir;\n}\nexport function getAbsolutePoses(poses: number[][], dist: number[]) {\n    return [\n        plus(dist, poses[0]),\n        plus(dist, poses[1]),\n        plus(dist, poses[2]),\n        plus(dist, poses[3]),\n    ];\n}\nexport function getAbsolutePosesByState({\n    left,\n    top,\n    pos1,\n    pos2,\n    pos3,\n    pos4,\n}: {\n    left: number,\n    top: number,\n    pos1: number[],\n    pos2: number[],\n    pos3: number[],\n    pos4: number[],\n}) {\n    return getAbsolutePoses([pos1, pos2, pos3, pos4], [left, top]);\n}\n\nexport function roundSign(num: number) {\n    return Math.round(num % 1 === -0.5 ? num - 1 : num);\n}\n\nexport function unset(self: any, name: string) {\n    self[name]?.unset();\n    self[name] = null;\n}\n\nexport function fillCSSObject(style: Record<string, any>, resolvedEvent?: any): CSSObject {\n    if (resolvedEvent) {\n        const originalDatas = getBeforeRenderableDatas(resolvedEvent);\n\n        originalDatas.nextStyle = {\n            ...originalDatas.nextStyle,\n            ...style,\n        };\n    }\n    return {\n        style,\n        cssText: getKeys(style).map(name => `${decamelize(name, \"-\")}: ${style[name]};`).join(\"\"),\n    };\n}\n\nexport function fillAfterTransform(\n    prevEvent: { style: Record<string, string>, transform: string },\n    nextEvent: { style: Record<string, string>, transform: string, afterTransform?: string },\n    resolvedEvent?: any\n): TransformObject {\n    const afterTransform = nextEvent.afterTransform || nextEvent.transform;\n\n    return {\n        ...fillCSSObject({\n            ...prevEvent.style,\n            ...nextEvent.style,\n            transform: afterTransform,\n        }, resolvedEvent),\n        afterTransform,\n        transform: prevEvent.transform,\n    };\n}\n\nexport function fillParams<T extends IObject<any>>(\n    moveable: any,\n    e: any,\n    params: ExcludeParams<T>,\n    isBeforeEvent?: boolean,\n): T {\n    const datas = e.datas;\n\n    if (!datas.datas) {\n        datas.datas = {};\n    }\n    const nextParams = {\n        ...params,\n        target: moveable.state.target,\n        clientX: e.clientX,\n        clientY: e.clientY,\n        inputEvent: e.inputEvent,\n        currentTarget: moveable,\n        moveable,\n        datas: datas.datas,\n        isFirstDrag: !!e.isFirstDrag,\n        isTrusted: e.isTrusted !== false,\n        stopAble() {\n            datas.isEventStart = false;\n        },\n        stopDrag() {\n            e.stop?.();\n        },\n    } as any;\n\n    if (!datas.isStartEvent) {\n        datas.isStartEvent = true;\n    } else if (!isBeforeEvent) {\n        datas.lastEvent = nextParams;\n    }\n    return nextParams;\n}\nexport function fillEndParams<T extends IObject<any>>(\n    moveable: any,\n    e: any,\n    params: ExcludeEndParams<T> & { isDrag?: boolean },\n): T {\n    const datas = e.datas;\n    const isDrag = \"isDrag\" in params ? params.isDrag : e.isDrag;\n\n    if (!datas.datas) {\n        datas.datas = {};\n    }\n\n    return {\n        isDrag,\n        ...params,\n        moveable,\n        target: moveable.state.target,\n        clientX: e.clientX,\n        clientY: e.clientY,\n        inputEvent: e.inputEvent,\n        currentTarget: moveable,\n        lastEvent: datas.lastEvent,\n        isDouble: e.isDouble,\n        datas: datas.datas,\n        isFirstDrag: !!e.isFirstDrag,\n    } as any;\n}\nexport function catchEvent<EventName extends keyof Props, Props extends IObject<any> = MoveableProps>(\n    moveable: any,\n    name: EventName,\n    callback: (e: Props[EventName] extends ((e: infer P) => any) | undefined ? P : IObject<any>) => void,\n): any {\n    moveable._emitter.on(name, callback);\n}\n\nexport function triggerEvent<EventName extends keyof Props, Props extends IObject<any> = MoveableProps>(\n    moveable: any,\n    name: EventName,\n    params: Props[EventName] extends ((e: infer P) => any) | undefined ? P : IObject<any>,\n    isManager?: boolean,\n): any {\n    return moveable.triggerEvent(name, params, isManager);\n}\n\nexport function getComputedStyle(el: Element, pseudoElt?: string | null) {\n    return window.getComputedStyle(el, pseudoElt);\n}\n\nexport function filterAbles(\n    ables: Able[], methods: Array<keyof Able>,\n    triggerAblesSimultaneously?: boolean,\n) {\n    const enabledAbles: IObject<boolean> = {};\n    const ableGroups: IObject<boolean> = {};\n\n    return ables.filter(able => {\n        const name = able.name;\n\n        if (enabledAbles[name] || !methods.some(method => able[method])) {\n            return false;\n        }\n        if (!triggerAblesSimultaneously && able.ableGroup) {\n            if (ableGroups[able.ableGroup]) {\n                return false;\n            }\n            ableGroups[able.ableGroup] = true;\n        }\n        enabledAbles[name] = true;\n        return true;\n    });\n}\n\nexport function equals(a1: any, a2: any) {\n    return a1 === a2 || (a1 == null && a2 == null);\n}\n\nexport function selectValue<T = any>(...values: any[]): T {\n    const length = values.length - 1;\n    for (let i = 0; i < length; ++i) {\n        const value = values[i];\n\n        if (!isUndefined(value)) {\n            return value;\n        }\n    }\n\n    return values[length];\n}\n\nexport function groupBy<T>(arr: T[], func: (el: T, index: number, arr: T[]) => any) {\n    const groups: T[][] = [];\n    const groupKeys: any[] = [];\n\n    arr.forEach((el, index) => {\n        const groupKey = func(el, index, arr);\n        const keyIndex = groupKeys.indexOf(groupKey);\n        const group = groups[keyIndex] || [];\n\n        if (keyIndex === -1) {\n            groupKeys.push(groupKey);\n            groups.push(group);\n        }\n        group.push(el);\n    });\n    return groups;\n}\nexport function groupByMap<T>(arr: T[], func: (el: T, index: number, arr: T[]) => string | number) {\n    const groups: T[][] = [];\n    const groupKeys: IObject<T[]> = {};\n\n    arr.forEach((el, index) => {\n        const groupKey = func(el, index, arr);\n        let group = groupKeys[groupKey];\n\n        if (!group) {\n            group = [];\n            groupKeys[groupKey] = group;\n            groups.push(group);\n        }\n        group.push(el);\n    });\n    return groups;\n}\nexport function flat<T>(arr: T[][]): T[] {\n    return arr.reduce((prev, cur) => {\n        return prev.concat(cur);\n    }, []);\n}\n\nexport function equalSign(a: number, b: number) {\n    return (a >= 0 && b >= 0) || (a < 0 && b < 0);\n}\n\nexport function maxOffset(...args: number[]) {\n    args.sort((a, b) => Math.abs(b) - Math.abs(a));\n\n    return args[0];\n}\nexport function minOffset(...args: number[]) {\n    args.sort((a, b) => Math.abs(a) - Math.abs(b));\n\n    return args[0];\n}\n\nexport function calculateInversePosition(matrix: number[], pos: number[], n: number) {\n    return calculate(\n        invert(matrix, n),\n        convertPositionMatrix(pos, n),\n        n,\n    );\n}\nexport function convertDragDist(state: MoveableManagerState, e: any) {\n    const {\n        is3d,\n        rootMatrix,\n    } = state;\n    const n = is3d ? 4 : 3;\n    [\n        e.distX, e.distY,\n    ] = calculateInversePosition(rootMatrix, [e.distX, e.distY], n);\n\n    return e;\n}\n\nexport function calculatePadding(\n    matrix: number[],\n    pos: number[],\n    transformOrigin: number[],\n    origin: number[],\n    n: number,\n) {\n    return minus(calculatePosition(matrix, plus(transformOrigin, pos), n), origin);\n}\n\nexport function convertCSSSize(value: number, size: number, isRelative?: boolean) {\n    return isRelative ? `${value / size * 100}%` : `${value}px`;\n}\n\nexport function getTinyDist(v: number) {\n    return Math.abs(v) <= TINY_NUM ? 0 : v;\n}\n\nexport function viewDraggingPrefix(ableName: string) {\n    return prefix(`${ableName}-view-dragging`);\n}\nexport function getDirectionViewClassName(ableName: string) {\n    return (moveable: MoveableManagerInterface) => {\n        if (!moveable.isDragging(ableName)) {\n            return \"\";\n        }\n        const data = getGestoData(moveable, ableName);\n        const deg = data.deg;\n        if (!deg) {\n            return \"\";\n        }\n        return prefix(`view-control-rotation${deg}`);\n    };\n}\nexport function getDirectionCondition(ableName: string, checkAbles: string[] = [ableName]) {\n    return (moveable: any, e: any) => {\n        if (e.isRequest) {\n            if (checkAbles.some(name => e.requestAble === name)) {\n                return e.parentDirection!;\n            } else {\n                return false;\n            }\n        }\n        const target = e.inputEvent.target;\n\n        return hasClass(target, prefix(\"direction\")) && (!ableName || hasClass(target, prefix(ableName)));\n    };\n}\n\nexport function invertObject<T extends IObject<any>>(obj: T): InvertObject<T> {\n    const nextObj: IObject<any> = {};\n\n    for (const name in obj) {\n        nextObj[obj[name]] = name;\n    }\n    return nextObj as any;\n}\n\nexport function convertTransformInfo(transforms: string[], index: number) {\n    const beforeFunctionTexts = transforms.slice(0, index < 0 ? undefined : index);\n    const beforeFunctionTexts2 = transforms.slice(0, index < 0 ? undefined : index + 1);\n    const targetFunctionText = transforms[index] || \"\";\n    const afterFunctionTexts = index < 0 ? [] : transforms.slice(index);\n    const afterFunctionTexts2 = index < 0 ? [] : transforms.slice(index + 1);\n\n    const beforeFunctions = parse(beforeFunctionTexts);\n    const beforeFunctions2 = parse(beforeFunctionTexts2);\n    const targetFunctions = parse([targetFunctionText]);\n    const afterFunctions = parse(afterFunctionTexts);\n    const afterFunctions2 = parse(afterFunctionTexts2);\n\n\n    const beforeFunctionMatrix = toMat(beforeFunctions);\n    const beforeFunctionMatrix2 = toMat(beforeFunctions2);\n    const afterFunctionMatrix = toMat(afterFunctions);\n    const afterFunctionMatrix2 = toMat(afterFunctions2);\n    const allFunctionMatrix = multiply(\n        beforeFunctionMatrix,\n        afterFunctionMatrix,\n        4,\n    );\n    return {\n        transforms,\n        beforeFunctionMatrix,\n        beforeFunctionMatrix2,\n        targetFunctionMatrix: toMat(targetFunctions),\n        afterFunctionMatrix,\n        afterFunctionMatrix2,\n        allFunctionMatrix,\n        beforeFunctions,\n        beforeFunctions2,\n        targetFunction: targetFunctions[0],\n        afterFunctions,\n        afterFunctions2,\n        beforeFunctionTexts,\n        beforeFunctionTexts2,\n        targetFunctionText,\n        afterFunctionTexts,\n        afterFunctionTexts2,\n    };\n}\n\nexport function isArrayFormat<T = any>(arr: any): arr is ArrayFormat<T> {\n    if (!arr || !isObject(arr)) {\n        return false;\n    }\n    if (arr instanceof Element) {\n        return false;\n    }\n    return isArray(arr) || \"length\" in arr;\n}\n\nexport function getRefTarget<T extends Element = HTMLElement | SVGElement>(\n    target: MoveableRefType<T>, isSelector: true): T | null;\nexport function getRefTarget<T extends Element = HTMLElement | SVGElement>(\n    target: MoveableRefType<T>, isSelector?: boolean): T | string | null;\nexport function getRefTarget<T extends Element = HTMLElement | SVGElement>(\n    target: MoveableRefType<T>,\n    isSelector?: boolean,\n): any {\n    if (!target) {\n        return null;\n    }\n    if (target instanceof Element) {\n        return target;\n    }\n    if (isString(target)) {\n        if (isSelector) {\n            return document.querySelector(target);\n        }\n        return target;\n    }\n    if (isFunction(target)) {\n        return target();\n    }\n    if (\"current\" in target) {\n        return target.current;\n    }\n    return target;\n}\n\nexport function getRefTargets(\n    targets: MoveableRefTargetType,\n    isSelector: true): Array<HTMLElement | SVGElement | null>;\nexport function getRefTargets(\n    targets: MoveableRefTargetType,\n    isSelector?: boolean): MoveableRefTargetsResultType;\nexport function getRefTargets(targets: MoveableRefTargetType, isSelector?: boolean): any[] {\n    if (!targets) {\n        return [];\n    }\n    const userTargets = isArrayFormat(targets) ? [].slice.call(targets) : [targets];\n\n    return userTargets.reduce((prev, target) => {\n        if (isString(target) && isSelector) {\n            return [...prev, ...[].slice.call(document.querySelectorAll<HTMLElement>(target))];\n        }\n        if (isArray(target)) {\n            prev.push(getRefTargets(target, isSelector));\n        } else {\n            prev.push(getRefTarget(target, isSelector));\n        }\n        return prev;\n    }, [] as MoveableRefTargetsResultType);\n}\n\nexport function minmax(...values: number[]) {\n    return [Math.min(...values), Math.max(...values)];\n}\n\n\nexport function getAbsoluteRotation(pos1: number[], pos2: number[], direction: number) {\n    let deg = getRad(pos1, pos2) / Math.PI * 180;\n\n    deg = direction >= 0 ? deg : 180 - deg;\n    deg = deg >= 0 ? deg : 360 + deg;\n\n    return deg;\n}\n\n\nexport function getDragDistByState(state: MoveableManagerState, dist: number[]) {\n    const {\n        rootMatrix,\n        is3d,\n    } = state;\n    const n = is3d ? 4 : 3;\n\n    let inverseMatrix = invert(rootMatrix, n);\n\n    if (!is3d) {\n        inverseMatrix = convertDimension(inverseMatrix, 3, 4);\n    }\n    inverseMatrix[12] = 0;\n    inverseMatrix[13] = 0;\n    inverseMatrix[14] = 0;\n\n    return calculateMatrixDist(inverseMatrix, dist);\n}\n\nexport function getSizeDistByDist(\n    startSize: number[],\n    dist: number[],\n    ratio: number,\n    direction: number[],\n    keepRatio?: boolean,\n) {\n    const [startOffsetWidth, startOffsetHeight] = startSize;\n    let distWidth = 0;\n    let distHeight = 0;\n\n    if (keepRatio && startOffsetWidth && startOffsetHeight) {\n        const rad = getRad([0, 0], dist);\n        const standardRad = getRad([0, 0], direction);\n        const size = getDistSize(dist);\n        const signSize = Math.cos(rad - standardRad) * size;\n\n        if (!direction[0]) {\n            // top, bottom\n            distHeight = signSize;\n            distWidth = distHeight * ratio;\n        } else if (!direction[1]) {\n            // left, right\n            distWidth = signSize;\n            distHeight = distWidth / ratio;\n        } else {\n            // two-way\n            const startWidthSize = direction[0] * 2 * startOffsetWidth;\n            const startHeightSize = direction[1] * 2 * startOffsetHeight;\n            const distSize = getDistSize([startWidthSize + dist[0], startHeightSize + dist[1]])\n                - getDistSize([startWidthSize, startHeightSize]);\n            const ratioRad = getRad([0, 0], [ratio, 1]);\n\n            distWidth = Math.cos(ratioRad) * distSize;\n            distHeight = Math.sin(ratioRad) * distSize;\n        }\n    } else {\n        distWidth = direction[0] * dist[0];\n        distHeight = direction[1] * dist[1];\n    }\n\n    return [distWidth, distHeight];\n}\nexport function getOffsetSizeDist(\n    sizeDirection: number[],\n    keepRatio: boolean,\n    datas: any,\n    e: any,\n) {\n    const {\n        ratio,\n        startOffsetWidth,\n        startOffsetHeight,\n    } = datas;\n    let distWidth = 0;\n    let distHeight = 0;\n    const {\n        distX,\n        distY,\n        parentDistance,\n        parentDist,\n        parentScale,\n    } = e;\n    const startFixedDirection = datas.fixedDirection;\n    const directionsDists = [0, 1].map(index => {\n        return Math.abs(sizeDirection[index] - startFixedDirection[index]);\n    });\n    const directionRatios = [0, 1].map(index => {\n        let dist = directionsDists[index];\n\n        if (dist !== 0) {\n            dist = 2 / dist;\n        }\n        return dist;\n    });\n    if (parentDist) {\n        distWidth = parentDist[0];\n        distHeight = parentDist[1];\n\n        if (keepRatio) {\n            if (!distWidth) {\n                distWidth = distHeight * ratio;\n            } else if (!distHeight) {\n                distHeight = distWidth / ratio;\n            }\n        }\n    } else if (parentScale) {\n        distWidth = (parentScale[0] - 1) * startOffsetWidth;\n        distHeight = (parentScale[1] - 1) * startOffsetHeight;\n    } else if (parentDistance) {\n        const scaleX = startOffsetWidth * directionsDists[0];\n        const scaleY = startOffsetHeight * directionsDists[1];\n        const ratioDistance = getDistSize([scaleX, scaleY]);\n\n        distWidth = parentDistance / ratioDistance * scaleX * directionRatios[0];\n        distHeight = parentDistance / ratioDistance * scaleY * directionRatios[1];\n    } else {\n        let dist = getDragDist({ datas, distX, distY });\n\n        dist = directionRatios.map((ratio, i) => {\n            return dist[i] * ratio;\n        });\n\n        [distWidth, distHeight] = getSizeDistByDist(\n            [startOffsetWidth, startOffsetHeight],\n            dist,\n            ratio,\n            sizeDirection,\n            keepRatio,\n        );\n    }\n    return {\n        // direction,\n        // sizeDirection,\n        distWidth,\n        distHeight,\n    };\n}\n\nexport function convertTransformUnit(\n    origin: string,\n    xy?: boolean,\n): { x?: string; y?: string; value?: string; } {\n    if (xy) {\n        if (origin === \"left\") {\n            return { x: \"0%\", y: \"50%\" };\n        } else if (origin === \"top\") {\n            return { x: \"50%\", y: \"50%\" };\n        } else if (origin === \"center\") {\n            return { x: \"50%\", y: \"50%\" };\n        } else if (origin === \"right\") {\n            return { x: \"100%\", y: \"50%\" };\n        } else if (origin === \"bottom\") {\n            return { x: \"50%\", y: \"100%\" };\n        }\n        const [left, right] = origin.split(\" \");\n        const leftOrigin = convertTransformUnit(left || \"\");\n        const rightOrigin = convertTransformUnit(right || \"\");\n        const originObject = {\n            ...leftOrigin,\n            ...rightOrigin,\n        };\n\n        const nextOriginObject = {\n            x: \"50%\",\n            y: \"50%\",\n        };\n        if (originObject.x) {\n            nextOriginObject.x = originObject.x;\n        }\n        if (originObject.y) {\n            nextOriginObject.y = originObject.y;\n        }\n        if (originObject.value) {\n            if (originObject.x && !originObject.y) {\n                nextOriginObject.y = originObject.value;\n            }\n            if (!originObject.x && originObject.y) {\n                nextOriginObject.x = originObject.value;\n            }\n        }\n        return nextOriginObject;\n    }\n    if (origin === \"left\") {\n        return { x: \"0%\" };\n    }\n    if (origin === \"right\") {\n        return { x: \"100%\" };\n    }\n    if (origin === \"top\") {\n        return { y: \"0%\" };\n    }\n    if (origin === \"bottom\") {\n        return { y: \"100%\" };\n    }\n    if (!origin) {\n        return {};\n    }\n    if (origin === \"center\") {\n        return { value: \"50%\" };\n    }\n    return { value: origin };\n}\nexport function convertTransformOriginArray(transformOrigin: string, width: number, height: number) {\n    const { x, y } = convertTransformUnit(transformOrigin, true);\n\n    return [\n        convertUnitSize(x!, width) || 0,\n        convertUnitSize(y!, height) || 0,\n    ];\n}\n\nexport function rotatePosesInfo(poses: number[][], origin: number[], rad: number) {\n    const prevPoses = poses.map((pos) => minus(pos, origin));\n    const nextPoses = prevPoses.map((pos) => rotate(pos, rad));\n\n    return {\n        prev: prevPoses,\n        next: nextPoses,\n        result: nextPoses.map(pos => plus(pos, origin)),\n    };\n}\n\n\n\nexport function isDeepArrayEquals(arr1: any[], arr2: any[]): boolean {\n    return arr1.length === arr2.length && arr1.every((value1, i) => {\n        const value2 = arr2[i];\n        const isArray1 = isArray(value1);\n        const isArray2 = isArray(value2);\n        if (isArray1 && isArray2) {\n            return isDeepArrayEquals(value1, value2);\n        } else if (!isArray1 && !isArray2) {\n            return value1 === value2;\n        }\n        return false;\n    });\n}\n","import { makeAble } from \"./AbleManager\";\nimport { triggerEvent, fillParams, fillEndParams } from \"../utils\";\nimport {\n    PinchableProps, Able, SnappableState,\n    OnPinchStart, OnPinch, OnPinchEnd, MoveableManagerInterface, MoveableGroupInterface,\n} from \"../types\";\n\n/**\n * @namespace Moveable.Pinchable\n * @description Whether or not target can be pinched with draggable, resizable, scalable, rotatable (default: false)\n */\nexport default makeAble(\"pinchable\", {\n    events: {\n        onPinchStart: \"pinchStart\",\n        onPinch: \"pinch\",\n        onPinchEnd: \"pinchEnd\",\n        onPinchGroupStart: \"pinchGroupStart\",\n        onPinchGroup: \"pinchGroup\",\n        onPinchGroupEnd: \"pinchGroupEnd\",\n    } as const,\n    dragStart() {\n        return true;\n    },\n    pinchStart(\n        moveable: MoveableManagerInterface<PinchableProps, SnappableState>,\n        e: any,\n    ) {\n        const { datas, targets, angle, originalDatas } = e;\n        const { pinchable, ables } = moveable.props;\n\n        if (!pinchable) {\n            return false;\n        }\n        const eventName = `onPinch${targets ? \"Group\" : \"\"}Start` as \"onPinchStart\";\n        const controlEventName = `drag${targets ? \"Group\" : \"\"}ControlStart` as \"dragControlStart\";\n\n        const pinchAbles = (pinchable === true ? moveable.controlAbles : ables!.filter(able => {\n            return pinchable.indexOf(able.name as any) > -1;\n        })).filter(able => able.canPinch && able[controlEventName]);\n\n        const params = fillParams<OnPinchStart>(moveable, e, {}) as any;\n\n        if (targets) {\n            params.targets = targets;\n        }\n        const result = triggerEvent(moveable, eventName, params);\n\n        datas.isPinch = result !== false;\n        datas.ables = pinchAbles;\n\n        const isPinch = datas.isPinch;\n\n        if (!isPinch) {\n            return false;\n        }\n        pinchAbles.forEach(able => {\n            originalDatas[able.name] = originalDatas[able.name] || {};\n\n            if (!able[controlEventName]) {\n                return;\n            }\n            const ableEvent: any = {\n                ...e,\n                datas: originalDatas[able.name],\n                parentRotate: angle,\n                isPinch: true,\n            };\n            able[controlEventName]!(moveable, ableEvent);\n        });\n\n        moveable.state.snapRenderInfo = {\n            request: e.isRequest,\n            direction: [0, 0],\n        };\n        return isPinch;\n    },\n    pinch(\n        moveable: MoveableManagerInterface<PinchableProps>,\n        e: any,\n    ) {\n        const {\n            datas, scale: pinchScale, distance,\n            originalDatas,\n            inputEvent, targets,\n            angle,\n        } = e;\n        if (!datas.isPinch) {\n            return;\n        }\n        const parentDistance = distance * (1 - 1 / pinchScale);\n        const params = fillParams<OnPinch>(moveable, e, {}) as any;\n\n        if (targets) {\n            params.targets = targets;\n        }\n        const eventName = `onPinch${targets ? \"Group\" : \"\"}` as \"onPinch\";\n        triggerEvent(moveable, eventName, params);\n\n        const ables: Able[] = datas.ables;\n        const controlEventName = `drag${targets ? \"Group\" : \"\"}Control` as \"dragControl\";\n\n        ables.forEach(able => {\n            if (!able[controlEventName]) {\n                return;\n            }\n            able[controlEventName]!(moveable, {\n                ...e,\n                datas: originalDatas[able.name],\n                inputEvent,\n                parentDistance,\n                parentRotate: angle,\n                isPinch: true,\n            } as any);\n        });\n        return params;\n    },\n    pinchEnd(\n        moveable: MoveableManagerInterface<PinchableProps>,\n        e: any,\n    ) {\n        const { datas, isPinch, inputEvent, targets, originalDatas } = e;\n        if (!datas.isPinch) {\n            return;\n        }\n        const eventName = `onPinch${targets ? \"Group\" : \"\"}End` as \"onPinchEnd\";\n\n        const params = fillEndParams<OnPinchEnd>(moveable, e, { isDrag: isPinch }) as any;\n\n        if (targets) {\n            params.targets = targets;\n        }\n        triggerEvent(moveable, eventName, params);\n        const ables: Able[] = datas.ables;\n        const controlEventName = `drag${targets ? \"Group\" : \"\"}ControlEnd` as \"dragControlEnd\";\n\n        ables.forEach(able => {\n            if (!able[controlEventName]) {\n                return;\n            }\n            able[controlEventName]!(moveable, {\n                ...e,\n                isDrag: isPinch,\n                datas: originalDatas[able.name],\n                inputEvent,\n                isPinch: true,\n            } as any);\n        });\n        return isPinch;\n    },\n    pinchGroupStart(moveable: MoveableGroupInterface<any, any>, e: any) {\n        return this.pinchStart!(moveable, { ...e, targets: moveable.props.targets });\n    },\n    pinchGroup(moveable: MoveableGroupInterface, e: any) {\n        return this.pinch!(moveable, { ...e, targets: moveable.props.targets });\n    },\n    pinchGroupEnd(moveable: MoveableGroupInterface, e: any) {\n        return this.pinchEnd!(moveable, { ...e, targets: moveable.props.targets });\n    },\n});\n\n/**\n * Whether or not target can be pinched with draggable, resizable, scalable, rotatable (default: false)\n * @name Moveable.Pinchable#pinchable\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body);\n *\n * moveable.pinchable = true;\n */\n\n/**\n * When the pinch starts, the pinchStart event is called with part of scaleStart, rotateStart, resizeStart\n * @memberof Moveable.Pinchable\n * @event pinchStart\n * @param {Moveable.Pinchable.OnPinchStart} - Parameters for the pinchStart event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     rotatable: true,\n *     scalable: true,\n *     pinchable: true, // [\"rotatable\", \"scalable\"]\n * });\n * moveable.on(\"pinchStart\", ({ target }) => {\n *     console.log(target);\n * });\n * moveable.on(\"rotateStart\", ({ target }) => {\n *     console.log(target);\n * });\n * moveable.on(\"scaleStart\", ({ target }) => {\n *     console.log(target);\n * });\n */\n/**\n * When pinching, the pinch event is called with part of scale, rotate, resize\n * @memberof Moveable.Pinchable\n * @event pinch\n * @param {Moveable.Pinchable.OnPinch} - Parameters for the pinch event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     rotatable: true,\n *     scalable: true,\n *     pinchable: true, // [\"rotatable\", \"scalable\"]\n * });\n * moveable.on(\"pinch\", ({ target }) => {\n *     console.log(target);\n * });\n * moveable.on(\"rotate\", ({ target }) => {\n *     console.log(target);\n * });\n * moveable.on(\"scale\", ({ target }) => {\n *     console.log(target);\n * });\n */\n/**\n * When the pinch finishes, the pinchEnd event is called.\n * @memberof Moveable.Pinchable\n * @event pinchEnd\n * @param {Moveable.Pinchable.OnPinchEnd} - Parameters for the pinchEnd event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     rotatable: true,\n *     scalable: true,\n *     pinchable: true, // [\"rotatable\", \"scalable\"]\n * });\n * moveable.on(\"pinchEnd\", ({ target }) => {\n *     console.log(target);\n * });\n * moveable.on(\"rotateEnd\", ({ target }) => {\n *     console.log(target);\n * });\n * moveable.on(\"scaleEnd\", ({ target }) => {\n *     console.log(target);\n * });\n */\n\n/**\n * When the group pinch starts, the `pinchGroupStart` event is called.\n * @memberof Moveable.Pinchable\n * @event pinchGroupStart\n * @param {Moveable.Pinchable.OnPinchGroupStart} - Parameters for the `pinchGroupStart` event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\n *     pinchable: true\n * });\n * moveable.on(\"pinchGroupStart\", ({ targets }) => {\n *     console.log(\"onPinchGroupStart\", targets);\n * });\n */\n\n/**\n * When the group pinch, the `pinchGroup` event is called.\n * @memberof Moveable.Pinchable\n * @event pinchGroup\n * @param {Moveable.Pinchable.OnPinchGroup} - Parameters for the `pinchGroup` event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\n *     pinchable: true\n * });\n * moveable.on(\"pinchGroup\", ({ targets, events }) => {\n *     console.log(\"onPinchGroup\", targets);\n * });\n */\n\n/**\n * When the group pinch finishes, the `pinchGroupEnd` event is called.\n * @memberof Moveable.Pinchable\n * @event pinchGroupEnd\n * @param {Moveable.Pinchable.OnPinchGroupEnd} - Parameters for the `pinchGroupEnd` event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\n *     pinchable: true\n * });\n * moveable.on(\"pinchGroupEnd\", ({ targets, isDrag }) => {\n *     console.log(\"onPinchGroupEnd\", targets, isDrag);\n * });\n */\n","import { Able, MoveableGroupInterface, MoveableManagerInterface, MoveableManagerState } from \"./types\";\nimport CustomGesto, { setCustomDrag } from \"./gesto/CustomGesto\";\n\nexport function fillChildEvents(\n    moveable: MoveableGroupInterface<any, any>,\n    name: string,\n    e: any,\n): any[] {\n    const datas = e.originalDatas;\n\n    datas.groupable = datas.groupable || {};\n\n    const groupableDatas = datas.groupable;\n\n    groupableDatas.childDatas = groupableDatas.childDatas || [];\n\n    const childDatas = groupableDatas.childDatas;\n\n    return moveable.moveables.map((_, i) => {\n        childDatas[i] = childDatas[i] || {};\n        childDatas[i][name] = childDatas[i][name] || {};\n\n        return {\n            ...e,\n            datas: childDatas[i][name],\n            originalDatas: childDatas[i],\n        };\n    });\n}\nexport function triggerChildGesto(\n    moveable: MoveableGroupInterface<any, any>,\n    able: Able,\n    type: string,\n    delta: number[],\n    e: any,\n    isConvert: boolean,\n    ableName: string,\n) {\n    const isStart = !!type.match(/Start$/g);\n    const isEnd = !!type.match(/End$/g);\n    const isPinch = e.isPinch;\n    const datas = e.datas;\n    const events = fillChildEvents(moveable, able.name, e);\n    const moveables = moveable.moveables;\n    const childs = events.map((ev, i) => {\n        const childMoveable = moveables[i];\n        const state = childMoveable.state as MoveableManagerState<any>;\n        const gestos = state.gestos;\n        let childEvent: any = ev;\n\n        if (isStart) {\n            childEvent = new CustomGesto(ableName).dragStart(delta, ev);\n        } else {\n\n\n            if (!gestos[ableName]) {\n                gestos[ableName] = datas.childGestos[i];\n            }\n            if (!gestos[ableName]) {\n                return;\n            }\n            childEvent = setCustomDrag(ev, state, delta, isPinch, isConvert, ableName);\n        }\n        const result = (able as any)[type]!(childMoveable,  { ...childEvent, parentFlag: true });\n\n        if (isEnd) {\n            gestos[ableName] = null;\n        }\n        return result;\n    });\n    if (isStart) {\n        datas.childGestos = moveables.map(child => child.state.gestos[ableName]);\n    }\n    return childs;\n}\nexport function triggerChildAbles<T extends Able>(\n    moveable: MoveableGroupInterface<any, any>,\n    able: T,\n    type: keyof T & string,\n    e: any,\n    eachEvent: (movebale: MoveableManagerInterface<any, any>, ev: any) => any = (_, ev) => ev,\n    callback?: (moveable: MoveableManagerInterface<any, any>, ev: any, result: any, index: number) => any,\n) {\n    const isEnd = !!type.match(/End$/g);\n    const events = fillChildEvents(moveable, able.name, e);\n    const moveables = moveable.moveables;\n    const childs = events.map((ev, i) => {\n        const childMoveable = moveables[i];\n        let childEvent = ev;\n\n        childEvent = eachEvent(childMoveable, ev);\n\n        const result = (able as any)[type]!(childMoveable,  { ...childEvent, parentFlag: true });\n\n        result && callback && callback(childMoveable, ev, result, i);\n\n        if (isEnd) {\n            childMoveable.state.gestos = {};\n        }\n        return result;\n    });\n\n    return childs;\n}\n","import { TINY_NUM } from \"@daybrush/utils\";\nimport { throttle } from \"@daybrush/utils\";\nimport {\n    MoveableClientRect, MoveableManagerInterface,\n    SnapDirectionPoses,\n    SnapDirections, SnappableProps,\n    SnappableState,\n} from \"../../types\";\nimport {\n    calculatePosition,\n} from \"../../utils\";\nexport const VERTICAL_NAMES = [\"left\", \"right\", \"center\"] as const;\nexport const HORIZONTAL_NAMES = [\"top\", \"bottom\", \"middle\"] as const;\nexport const VERTICAL_NAMES_MAP = {\n    start: \"left\",\n    end: \"right\",\n    center: \"center\",\n} as const;\nexport const HORIZONTAL_NAMES_MAP = {\n    start: \"top\",\n    end: \"bottom\",\n    center: \"middle\",\n} as const;\n\n\nexport function hasGuidelines(\n    moveable: MoveableManagerInterface<any, any>,\n    ableName: string\n): moveable is MoveableManagerInterface<SnappableProps, SnappableState> {\n    const {\n        props: {\n            snappable,\n            bounds,\n            innerBounds,\n            verticalGuidelines,\n            horizontalGuidelines,\n            snapGridWidth,\n            snapGridHeight,\n        },\n        state: { guidelines, enableSnap },\n    } = moveable;\n\n    if (\n        !snappable ||\n        !enableSnap ||\n        (ableName && snappable !== true && snappable.indexOf(ableName) < 0)\n    ) {\n        return false;\n    }\n    if (\n        snapGridWidth ||\n        snapGridHeight ||\n        bounds ||\n        innerBounds ||\n        (guidelines && guidelines.length) ||\n        (verticalGuidelines && verticalGuidelines.length) ||\n        (horizontalGuidelines && horizontalGuidelines.length)\n    ) {\n        return true;\n    }\n    return false;\n}\n\nexport function getSnapDirections(snapDirections: SnapDirections | boolean | undefined): SnapDirections {\n    if (snapDirections === false) {\n        return {};\n    } else if (snapDirections === true || !snapDirections) {\n        return { left: true, right: true, top: true, bottom: true };\n    }\n    return snapDirections;\n}\n\nexport function mapSnapDirectionPoses(\n    snapDirections: SnapDirections | boolean | undefined,\n    snapPoses: SnapDirectionPoses,\n) {\n    const nextSnapDirections = getSnapDirections(snapDirections);\n    const nextSnapPoses: SnapDirectionPoses = {};\n\n    for (const name in nextSnapDirections) {\n        if (name in snapPoses && (nextSnapDirections as any)[name]) {\n            (nextSnapPoses as any)[name] = (snapPoses as any)[name];\n        }\n    }\n    return nextSnapPoses;\n}\n\nexport function splitSnapDirectionPoses(\n    snapDirections: SnapDirections | boolean | undefined,\n    snapPoses: SnapDirectionPoses,\n) {\n    const nextSnapPoses = mapSnapDirectionPoses(snapDirections, snapPoses);\n    const horizontalNames = HORIZONTAL_NAMES.filter(name => name in nextSnapPoses);\n    const verticalNames = VERTICAL_NAMES.filter(name => name in nextSnapPoses);\n\n    return {\n        horizontal: horizontalNames.map(name => nextSnapPoses[name]!),\n        vertical: verticalNames.map(name => nextSnapPoses[name]!),\n    };\n}\n\nexport function calculateContainerPos(\n    rootMatrix: number[],\n    containerRect: MoveableClientRect,\n    n: number,\n) {\n    const clientPos = calculatePosition(\n        rootMatrix, [containerRect.clientLeft!, containerRect.clientTop!], n);\n\n    return [\n        containerRect.left + clientPos[0],\n        containerRect.top + clientPos[1],\n    ];\n}\n\nexport function solveLineConstants([point1, point2]: number[][]): [number, number, number] {\n    let dx = point2[0] - point1[0];\n    let dy = point2[1] - point1[1];\n\n    if (Math.abs(dx) < TINY_NUM) {\n        dx = 0;\n    }\n    if (Math.abs(dy) < TINY_NUM) {\n        dy = 0;\n    }\n\n    // b > 0\n    // ax + by + c = 0\n    let a = 0;\n    let b = 0;\n    let c = 0;\n\n    if (!dx) {\n        // -x + 1 = 0\n        a = -1;\n        c = point1[0];\n    } else if (!dy) {\n        // y - 1 = 0\n        b = 1;\n        c = -point1[1];\n    } else {\n        // y = -a(x - x1) + y1\n        // ax + y + a * x1 - y1 = 0\n        a = -dy / dx;\n        b = 1;\n        c = a * point1[0] - point1[1];\n    }\n\n    return [a, b, c].map(v => throttle(v, TINY_NUM)) as [number, number, number];\n}\n","import {\n    SnapInfo, SnappableProps, SnappableState,\n    SnapGuideline, ResizableProps, ScalableProps,\n    SnapOffsetInfo, MoveableManagerInterface, SnapDirectionPoses,\n} from \"../../types\";\nimport {\n    selectValue, getTinyDist,\n} from \"../../utils\";\nimport { getPosByDirection, getPosesByDirection } from \"../../gesto/GestoUtils\";\nimport { TINY_NUM } from \"../../consts\";\nimport { minus } from \"@scena/matrix\";\nimport { splitSnapDirectionPoses } from \"./utils\";\n\n\n\nexport function checkMoveableSnapPoses(\n    moveable: MoveableManagerInterface<SnappableProps, SnappableState>,\n    posesX: number[],\n    posesY: number[],\n    customSnapThreshold?: number,\n) {\n    const props = moveable.props;\n    const snapThreshold = selectValue<number>(customSnapThreshold, props.snapThreshold, 5);\n\n    return checkSnapPoses(\n        moveable.state.guidelines,\n        posesX,\n        posesY,\n        snapThreshold,\n    );\n}\n\nexport function checkSnapPoses(\n    guidelines: SnapGuideline[],\n    posesX: number[],\n    posesY: number[],\n    snapThreshold: number,\n) {\n    return {\n        vertical: checkSnap(guidelines, \"vertical\", posesX, snapThreshold),\n        horizontal: checkSnap(guidelines, \"horizontal\", posesY, snapThreshold),\n    };\n}\nexport function checkSnapKeepRatio(\n    moveable: MoveableManagerInterface<SnappableProps, SnappableState>,\n    startPos: number[],\n    endPos: number[],\n): { vertical: SnapOffsetInfo, horizontal: SnapOffsetInfo } {\n    const [endX, endY] = endPos;\n    const [startX, startY] = startPos;\n    let [dx, dy] = minus(endPos, startPos);\n    const isBottom = dy > 0;\n    const isRight = dx > 0;\n\n    dx = getTinyDist(dx);\n    dy = getTinyDist(dy);\n\n    const verticalInfo: SnapOffsetInfo = {\n        isSnap: false,\n        offset: 0,\n        pos: 0,\n    };\n    const horizontalInfo: SnapOffsetInfo = {\n        isSnap: false,\n        offset: 0,\n        pos: 0,\n    };\n\n    if (dx === 0 && dy === 0) {\n        return {\n            vertical: verticalInfo,\n            horizontal: horizontalInfo,\n        };\n    }\n    const {\n        vertical: verticalSnapInfo,\n        horizontal: horizontalSnapInfo,\n    } = checkMoveableSnapPoses(moveable, dx ? [endX] : [], dy ? [endY] : []);\n\n    verticalSnapInfo.posInfos.filter(({ pos }) => {\n        return isRight ? pos >= startX : pos <= startX;\n    });\n    horizontalSnapInfo.posInfos.filter(({ pos }) => {\n        return isBottom ? pos >= startY : pos <= startY;\n    });\n    verticalSnapInfo.isSnap = verticalSnapInfo.posInfos.length > 0;\n    horizontalSnapInfo.isSnap = horizontalSnapInfo.posInfos.length > 0;\n\n    const {\n        isSnap: isVerticalSnap,\n        guideline: verticalGuideline,\n    } = getNearestSnapGuidelineInfo(verticalSnapInfo);\n    const {\n        isSnap: isHorizontalSnap,\n        guideline: horizontalGuideline,\n    } = getNearestSnapGuidelineInfo(horizontalSnapInfo);\n    const horizontalPos = isHorizontalSnap ? horizontalGuideline!.pos[1] : 0;\n    const verticalPos = isVerticalSnap ? verticalGuideline!.pos[0] : 0;\n\n    if (dx === 0) {\n        if (isHorizontalSnap) {\n            horizontalInfo.isSnap = true;\n            horizontalInfo.pos = horizontalGuideline!.pos[1];\n            horizontalInfo.offset = endY - horizontalInfo.pos;\n        }\n    } else if (dy === 0) {\n        if (isVerticalSnap) {\n            verticalInfo.isSnap = true;\n            verticalInfo.pos = verticalPos;\n            verticalInfo.offset = endX - verticalPos;\n        }\n    } else {\n        // y - y1 = a * (x - x1)\n        const a = dy / dx;\n        const b = endPos[1] - a * endX;\n        let y = 0;\n        let x = 0;\n        let isSnap = false;\n\n        if (isVerticalSnap) {\n            x = verticalPos;\n            y = a * x + b;\n            isSnap = true;\n        } else if (isHorizontalSnap) {\n            y = horizontalPos;\n            x = (y - b) / a;\n            isSnap = true;\n        }\n        if (isSnap) {\n            verticalInfo.isSnap = true;\n            verticalInfo.pos = x;\n            verticalInfo.offset = endX - x;\n\n            horizontalInfo.isSnap = true;\n            horizontalInfo.pos = y;\n            horizontalInfo.offset = endY - y;\n        }\n    }\n    return {\n        vertical: verticalInfo,\n        horizontal: horizontalInfo,\n    };\n}\n\nexport function checkSnaps(\n    moveable: MoveableManagerInterface<SnappableProps, SnappableState>,\n    rect: SnapDirectionPoses,\n    customSnapThreshold?: number,\n) {\n    const poses = splitSnapDirectionPoses(moveable.props.snapDirections, rect);\n\n    return checkMoveableSnapPoses(\n        moveable,\n        poses.vertical,\n        poses.horizontal,\n        customSnapThreshold,\n    );\n}\n\nexport function getNearestSnapGuidelineInfo(\n    snapInfo: SnapInfo,\n) {\n    const isSnap = snapInfo.isSnap;\n\n    if (!isSnap) {\n        return {\n            isSnap: false,\n            offset: 0,\n            dist: -1,\n            pos: 0,\n            guideline: null,\n        };\n    }\n    const posInfo = snapInfo.posInfos[0];\n    const guidelineInfo = posInfo!.guidelineInfos[0];\n    const offset = guidelineInfo!.offset;\n    const dist = guidelineInfo!.dist;\n    const guideline = guidelineInfo!.guideline;\n\n    return {\n        isSnap,\n        offset,\n        dist,\n        pos: posInfo!.pos,\n        guideline,\n    };\n}\n\nfunction checkSnap(\n    guidelines: SnapGuideline[],\n    targetType: \"horizontal\" | \"vertical\",\n    targetPoses: number[],\n    snapThreshold: number,\n): SnapInfo {\n    if (!guidelines || !guidelines.length) {\n        return {\n            isSnap: false,\n            index: -1,\n            posInfos: [],\n        };\n    }\n    const isVertical = targetType === \"vertical\";\n    const posType = isVertical ? 0 : 1;\n\n    const snapPosInfos = targetPoses.map((targetPos, index) => {\n        const guidelineInfos = guidelines.map(guideline => {\n            const { pos } = guideline;\n            const offset = targetPos - pos[posType];\n\n            return {\n                offset,\n                dist: Math.abs(offset),\n                guideline,\n            };\n        }).filter(({ guideline, dist }) => {\n            const { type } = guideline;\n            if (\n                type !== targetType\n                || dist > snapThreshold\n            ) {\n                return false;\n            }\n            return true;\n        }).sort(\n            (a, b) => a.dist - b.dist,\n        );\n\n\n        return {\n            pos: targetPos,\n            index,\n            guidelineInfos,\n        };\n    }).filter(snapPosInfo => {\n        return snapPosInfo.guidelineInfos.length > 0;\n    }).sort((a, b) => {\n        return a.guidelineInfos[0].dist - b.guidelineInfos[0].dist;\n    });\n\n    const isSnap = snapPosInfos.length > 0;\n    return {\n        isSnap,\n        index: isSnap ? snapPosInfos[0].index : -1,\n        posInfos: snapPosInfos,\n    };\n}\n\nexport function getSnapInfosByDirection(\n    moveable: MoveableManagerInterface<SnappableProps & (ResizableProps | ScalableProps), SnappableState>,\n    poses: number[][],\n    snapDirection: number[],\n    snapThreshold = 1,\n) {\n    let nextPoses: number[][] = [];\n    if (snapDirection[0] && snapDirection[1]) {\n        nextPoses = [\n            snapDirection,\n            [-snapDirection[0], snapDirection[1]],\n            [snapDirection[0], -snapDirection[1]],\n        ].map(direction => getPosByDirection(poses, direction));\n    } else if (!snapDirection[0] && !snapDirection[1]) {\n        const alignPoses = [poses[0], poses[1], poses[3], poses[2], poses[0]];\n\n        for (let i = 0; i < 4; ++i) {\n            nextPoses.push(alignPoses[i]);\n            nextPoses.push([\n                (alignPoses[i][0] + alignPoses[i + 1][0]) / 2,\n                (alignPoses[i][1] + alignPoses[i + 1][1]) / 2,\n            ]);\n        }\n    } else {\n        if (moveable.props.keepRatio) {\n            nextPoses = [\n                [-1, -1],\n                [-1, 1],\n                [1, -1],\n                [1, 1],\n                snapDirection,\n            ].map(dir => getPosByDirection(poses, dir));\n        } else {\n            nextPoses = getPosesByDirection(poses, snapDirection);\n\n            if (nextPoses.length > 1) {\n                nextPoses.push([\n                    (nextPoses[0][0] + nextPoses[1][0]) / 2,\n                    (nextPoses[0][1] + nextPoses[1][1]) / 2,\n                ]);\n            }\n        }\n    }\n    return checkMoveableSnapPoses(moveable, nextPoses.map(pos => pos[0]), nextPoses.map(pos => pos[1]), snapThreshold);\n}\n\nexport function checkSnapBoundPriority(\n    a: { isBound: boolean, isSnap: boolean, offset: number },\n    b: { isBound: boolean, isSnap: boolean, offset: number },\n) {\n    const aDist = Math.abs(a.offset);\n    const bDist = Math.abs(b.offset);\n\n    if (a.isBound && b.isBound) {\n        return bDist - aDist;\n    } else if (a.isBound) {\n        return -1;\n    } else if (b.isBound) {\n        return 1;\n    } else if (a.isSnap && b.isSnap) {\n        return bDist - aDist;\n    } else if (a.isSnap) {\n        return -1;\n    } else if (b.isSnap) {\n        return 1;\n    } else if (aDist < TINY_NUM) {\n        return 1;\n    } else if (bDist < TINY_NUM) {\n        return -1;\n    }\n    return aDist - bDist;\n}\nexport function getNearOffsetInfo<T extends { offset: number[], isBound: boolean, isSnap: boolean, sign: number[] }>(\n    offsets: T[],\n    index: number,\n) {\n    return offsets.slice().sort((a, b) => {\n        const aSign = a.sign[index];\n        const bSign = b.sign[index];\n        const aOffset = a.offset[index];\n        const bOffset = b.offset[index];\n        // -1 The positions of a and b do not change.\n        // 1 The positions of a and b are reversed.\n        if (!aSign) {\n            return 1;\n        } else if (!bSign) {\n            return -1;\n        }\n        return checkSnapBoundPriority(\n            { isBound: a.isBound, isSnap: a.isSnap, offset: aOffset },\n            { isBound: b.isBound, isSnap: b.isSnap, offset: bOffset },\n        );\n    })[0];\n}\n\n\nexport function getCheckSnapDirections(\n    direction: number[],\n    fixedDirection: number[],\n    keepRatio: boolean\n) {\n    const directions: number[][][] = [];\n    // const fixedDirection = [-direction[0], -direction[1]];\n\n    if (keepRatio) {\n        if (Math.abs(fixedDirection[0]) !== 1 || Math.abs(fixedDirection[1]) !== 1) {\n            directions.push(\n                [fixedDirection, [-1, -1]],\n                [fixedDirection, [-1, 1]],\n                [fixedDirection, [1, -1]],\n                [fixedDirection, [1, 1]],\n            );\n        } else {\n            directions.push(\n                [fixedDirection, [direction[0], -direction[1]]],\n                [fixedDirection, [-direction[0], direction[1]]],\n            );\n        }\n        directions.push([fixedDirection, direction]);\n    } else {\n        if ((direction[0] && direction[1]) || (!direction[0] && !direction[1])) {\n            const endDirection = direction[0] ? direction : [1, 1];\n\n            [1, -1].forEach(signX => {\n                [1, -1].forEach(signY => {\n                    const nextDirection = [signX * endDirection[0], signY * endDirection[1]];\n\n                    if (\n                        fixedDirection[0] === nextDirection[0]\n                        && fixedDirection[1] === nextDirection[1]\n                    ) {\n                        return;\n                    }\n                    directions.push([fixedDirection, nextDirection]);\n                });\n            });\n        } else if (direction[0]) {\n            const signs = Math.abs(fixedDirection[0]) === 1 ? [1] : [1, -1];\n\n            signs.forEach(sign => {\n                directions.push(\n                    [\n                        [fixedDirection[0], -1],\n                        [sign * direction[0], -1],\n                    ],\n                    [\n                        [fixedDirection[0], 0],\n                        [sign * direction[0], 0],\n                    ],\n                    [\n                        [fixedDirection[0], 1],\n                        [sign * direction[0], 1],\n                    ]\n                );\n            });\n        } else if (direction[1]) {\n            const signs = Math.abs(fixedDirection[1]) === 1 ? [1] : [1, -1];\n\n            signs.forEach(sign => {\n                directions.push(\n                    [\n                        [-1, fixedDirection[1]],\n                        [-1, sign * direction[1]],\n                    ],\n                    [\n                        [0, fixedDirection[1]],\n                        [0, sign * direction[1]],\n                    ],\n                    [\n                        [1, fixedDirection[1]],\n                        [1, sign * direction[1]],\n                    ]\n                );\n            });\n        }\n    }\n    return directions;\n}\n","import { average, getRad, throttle } from \"@daybrush/utils\";\nimport { rotate } from \"@scena/matrix\";\nimport { maxOffset, getDistSize, getTinyDist, calculatePoses } from \"../../utils\";\n\nimport { SnappableProps, DraggableProps, RotatableProps, MoveableManagerInterface } from \"../../types\";\nimport { getDragDist, getPosByDirection, getInverseDragDist } from \"../../gesto/GestoUtils\";\nimport { getNearOffsetInfo } from \"./snap\";\nimport { TINY_NUM } from \"../../consts\";\nimport { solveLineConstants } from \"./utils\";\n\nfunction isStartLine(dot: number[], line: number[][]) {\n    // l    o     => true\n    // o    l    => false\n    const cx = average([line[0][0], line[1][0]]);\n    const cy = average([line[0][1], line[1][1]]);\n\n    return {\n        vertical: cx <= dot[0],\n        horizontal: cy <= dot[1],\n    };\n}\nfunction hitTestLine(\n    dot: number[],\n    [pos1, pos2]: number[][],\n) {\n    let dx = pos2[0] - pos1[0];\n    let dy = pos2[1] - pos1[1];\n\n    if (Math.abs(dx) < TINY_NUM) {\n        dx = 0;\n    }\n    if (Math.abs(dy) < TINY_NUM) {\n        dy = 0;\n    }\n    let test1: number;\n    let test2: number;\n    if (!dx) {\n        test1 = pos1[0];\n        test2 = dot[0];\n    } else if (!dy) {\n        test1 = pos1[1];\n        test2 = dot[1];\n    } else {\n        const a = dy / dx;\n\n        // y = a * (x - pos1) + pos1\n        test1 = a * (dot[0] - pos1[0]) + pos1[1];\n        test2 = dot[1];\n    }\n    return test1 - test2;\n}\nfunction isSameStartLine(dots: number[][], line: number[][], centerSign: boolean, error: number = TINY_NUM) {\n    return dots.every(dot => {\n        const value = hitTestLine(dot, line);\n        const sign = value <= 0;\n        return sign === centerSign || Math.abs(value) <= error;\n    });\n}\nfunction checkInnerBoundDot(\n    pos: number,\n    start: number,\n    end: number,\n    isStart: boolean,\n    threshold = 0,\n) {\n    if (\n        (isStart && start - threshold <= pos)\n        || (!isStart && pos <= end + threshold)\n    ) {\n        // false 402 565 602 => 37 ([0, 37])\n        // true 400 524.9712603540036 600 => 124 ([124, 0])\n        // true 400 410 600 => 10 ([10, 0])\n        return {\n            isBound: true,\n            offset: isStart ? start - pos : end - pos,\n        };\n    }\n    return {\n        isBound: false,\n        offset: 0,\n    };\n}\n\nfunction checkInnerBound(\n    moveable: MoveableManagerInterface<SnappableProps>,\n    { line, centerSign, verticalSign, horizontalSign, lineConstants }: InnerBoundLineInfo,\n) {\n    const bounds = moveable.props.innerBounds;\n\n    if (!bounds) {\n        return {\n            isAllBound: false,\n            isBound: false,\n            isVerticalBound: false,\n            isHorizontalBound: false,\n            offset: [0, 0],\n        };\n    }\n    const { left, top, width, height } = bounds;\n    const leftLine = [[left, top], [left, top + height]];\n    const topLine = [[left, top], [left + width, top]];\n    const rightLine = [[left + width, top], [left + width, top + height]];\n    const bottomLine = [[left, top + height], [left + width, top + height]];\n\n    if (isSameStartLine([\n        [left, top],\n        [left + width, top],\n        [left, top + height],\n        [left + width, top + height],\n    ], line, centerSign)) {\n        return {\n            isAllBound: false,\n            isBound: false,\n            isVerticalBound: false,\n            isHorizontalBound: false,\n            offset: [0, 0],\n        };\n    }\n    // test vertical\n\n    const topBoundInfo = checkLineBoundCollision(line, lineConstants, topLine, verticalSign);\n    const bottomBoundInfo = checkLineBoundCollision(line, lineConstants, bottomLine, verticalSign);\n\n    // test horizontal\n    const leftBoundInfo = checkLineBoundCollision(line, lineConstants, leftLine, horizontalSign);\n    const rightBoundInfo = checkLineBoundCollision(line, lineConstants, rightLine, horizontalSign);\n\n    const isAllVerticalBound = topBoundInfo.isBound && bottomBoundInfo.isBound;\n    const isVerticalBound = topBoundInfo.isBound || bottomBoundInfo.isBound;\n    const isAllHorizontalBound = leftBoundInfo.isBound && rightBoundInfo.isBound;\n    const isHorizontalBound = leftBoundInfo.isBound || rightBoundInfo.isBound;\n    const verticalOffset = maxOffset(topBoundInfo.offset, bottomBoundInfo.offset);\n    const horizontalOffset = maxOffset(leftBoundInfo.offset, rightBoundInfo.offset);\n    let offset = [0, 0];\n    let isBound = false;\n    let isAllBound = false;\n\n    if (Math.abs(horizontalOffset) < Math.abs(verticalOffset)) {\n        offset = [verticalOffset, 0];\n        isBound = isVerticalBound;\n        isAllBound = isAllVerticalBound;\n    } else {\n        offset = [0, horizontalOffset];\n        isBound = isHorizontalBound;\n        isAllBound = isAllHorizontalBound;\n    }\n    return {\n        isAllBound,\n        isVerticalBound,\n        isHorizontalBound,\n        isBound,\n        offset,\n    };\n}\n\nfunction checkLineBoundCollision(\n    line: number[][],\n    [a, b]: [number, number, number],\n    boundLine: number[][],\n    isStart: boolean,\n    threshold?: number,\n    isRender?: boolean,\n) {\n    const dot1 = line[0];\n    // const dot2 = line[1];\n    const boundDot1 = boundLine[0];\n    const boundDot2 = boundLine[1];\n\n    // const dy1 = getTinyDist(dot2[1] - dot1[1]);\n    // const dx1 = getTinyDist(dot2[0] - dot1[0]);\n    const dy2 = getTinyDist(boundDot2[1] - boundDot1[1]);\n    const dx2 = getTinyDist(boundDot2[0] - boundDot1[0]);\n\n    const hasDx = b;\n    const hasDy = a;\n    const slope = - a / b;\n    // lineConstants\n    // ax + by + c = 0\n    // dx2 or dy2 is zero\n    if (!dx2) {\n        // vertical\n        // by + c = 0\n        if (isRender && !hasDy) {\n            // 90deg\n            return {\n                isBound: false,\n                offset: 0,\n            };\n        } else if (hasDx) {\n            // ax + by + c = 0\n            // const y = dy1 ? dy1 / dx1 * (boundDot1[0] - dot1[0]) + dot1[1] : dot1[1];\n            const y = slope * (boundDot1[0] - dot1[0]) + dot1[1];\n\n            // boundDot1[1] <= y  <= boundDot2[1]\n            return checkInnerBoundDot(y, boundDot1[1], boundDot2[1], isStart, threshold);\n        } else {\n            // ax + c = 0\n            const offset = boundDot1[0] - dot1[0];\n\n            const isBound = Math.abs(offset) <= (threshold || 0);\n\n            return {\n                isBound,\n                offset: isBound ? offset : 0,\n            };\n        }\n    } else if (!dy2) {\n        // horizontal\n        if (isRender && !hasDx) {\n            // 90deg\n            return {\n                isBound: false,\n                offset: 0,\n            };\n        } else if (hasDy) {\n            // y = a * (x - x1) + y1\n            // x = (y - y1) / a + x1\n            // const a = dy1 / dx1;\n            // const x = dx1 ? (boundDot1[1] - dot1[1]) / a + dot1[0] : dot1[0];\n            const x = (boundDot1[1] - dot1[1]) / slope + dot1[0];\n\n            // boundDot1[0] <= x && x <= boundDot2[0]\n            return checkInnerBoundDot(x, boundDot1[0], boundDot2[0], isStart, threshold);\n        } else {\n            const offset = boundDot1[1] - dot1[1];\n\n            const isBound = Math.abs(offset) <= (threshold || 0);\n\n            return {\n                isBound,\n                offset: isBound ? offset : 0,\n            };\n        }\n    }\n    return {\n        isBound: false,\n        offset: 0,\n    };\n}\nexport function getInnerBoundInfo(\n    moveable: MoveableManagerInterface<SnappableProps>,\n    lineInfos: InnerBoundLineInfo[],\n    datas: any,\n) {\n    return lineInfos.map(info => {\n        const {\n            isBound,\n            offset,\n            isVerticalBound,\n            isHorizontalBound,\n        } = checkInnerBound(moveable, info);\n\n        const multiple = info.multiple;\n\n        const sizeOffset = getDragDist({\n            datas,\n            distX: offset[0],\n            distY: offset[1],\n        }).map((size, i) => size * (multiple[i] ? 2 / multiple[i] : 0));\n\n        return {\n            sign: multiple,\n            isBound,\n            isVerticalBound,\n            isHorizontalBound,\n            isSnap: false,\n            offset: sizeOffset,\n        };\n    });\n}\n\nexport function getInnerBoundDragInfo(\n    moveable: MoveableManagerInterface<SnappableProps & DraggableProps, any>,\n    poses: number[][],\n    datas: any,\n) {\n    const lines = getCheckInnerBoundLineInfos(moveable, poses, [0, 0], false).map(info => {\n        return {\n            ...info,\n            multiple: info.multiple.map(dir => Math.abs(dir) * 2),\n        };\n    });\n    const innerBoundInfo = getInnerBoundInfo(moveable, lines, datas);\n    const widthOffsetInfo = getNearOffsetInfo(innerBoundInfo, 0);\n    const heightOffsetInfo = getNearOffsetInfo(innerBoundInfo, 1);\n    let verticalOffset = 0;\n    let horizontalOffset = 0;\n    const isVerticalBound = widthOffsetInfo.isVerticalBound || heightOffsetInfo.isVerticalBound;\n    const isHorizontalBound = widthOffsetInfo.isHorizontalBound || heightOffsetInfo.isHorizontalBound;\n\n    if (isVerticalBound || isHorizontalBound) {\n        [verticalOffset, horizontalOffset] = getInverseDragDist({\n            datas,\n            distX: -widthOffsetInfo.offset[0],\n            distY: -heightOffsetInfo.offset[1],\n        });\n    }\n\n    return {\n        vertical: {\n            isBound: isVerticalBound,\n            offset: verticalOffset,\n        },\n        horizontal: {\n            isBound: isHorizontalBound,\n            offset: horizontalOffset,\n        },\n    };\n}\nexport function getCheckSnapLineDirections(\n    direction: number[],\n    keepRatio: boolean,\n) {\n    const lineDirections: number[][][] = [];\n    const x = direction[0];\n    const y = direction[1];\n    if (x && y) {\n        lineDirections.push(\n            [[0, y * 2], direction, [-x, y]],\n            [[x * 2, 0], direction, [x, -y]],\n        );\n    } else if (x) {\n        // vertcal\n        lineDirections.push(\n            [[x * 2, 0], [x, 1], [x, -1]],\n        );\n        if (keepRatio) {\n            lineDirections.push(\n                [[0, -1], [x, -1], [-x, -1]],\n                [[0, 1], [x, 1], [-x, 1]],\n            );\n        }\n    } else if (y) {\n        // horizontal\n        lineDirections.push(\n            [[0, y * 2], [1, y], [-1, y]],\n        );\n        if (keepRatio) {\n            lineDirections.push(\n                [[-1, 0], [-1, y], [-1, -y]],\n                [[1, 0], [1, y], [1, -y]],\n            );\n        }\n    } else {\n        // [0, 0] to all direction\n        lineDirections.push(\n            [[-1, 0], [-1, -1], [-1, 1]],\n            [[1, 0], [1, -1], [1, 1]],\n            [[0, -1], [-1, -1], [1, -1]],\n            [[0, 1], [-1, 1], [1, 1]],\n        );\n    }\n\n    return lineDirections;\n}\nexport interface InnerBoundLineInfo {\n    line: number[][];\n    multiple: number[];\n    horizontalSign: boolean;\n    verticalSign: boolean;\n    centerSign: boolean;\n    lineConstants: [number, number, number];\n}\nexport function getCheckInnerBoundLineInfos(\n    moveable: MoveableManagerInterface<SnappableProps>,\n    poses: number[][],\n    direction: number[],\n    keepRatio: boolean,\n): InnerBoundLineInfo[] {\n    const {\n        allMatrix,\n        is3d,\n    } = moveable.state;\n    const virtualPoses = calculatePoses(allMatrix, 100, 100, is3d ? 4 : 3);\n    const center = getPosByDirection(virtualPoses, [0, 0]);\n\n    return getCheckSnapLineDirections(direction, keepRatio).map(([multiple, dir1, dir2]) => {\n        const virtualLine = [\n            getPosByDirection(virtualPoses, dir1),\n            getPosByDirection(virtualPoses, dir2),\n        ];\n        const lineConstants = solveLineConstants(virtualLine);\n        const {\n            vertical: verticalSign,\n            horizontal: horizontalSign,\n        } = isStartLine(center, virtualLine);\n        const centerSign = hitTestLine(center, virtualLine) <= 0;\n\n        return {\n            multiple,\n            centerSign,\n            verticalSign,\n            horizontalSign,\n            lineConstants,\n            line: [\n                getPosByDirection(poses, dir1),\n                getPosByDirection(poses, dir2),\n            ],\n        };\n    });\n}\n\nfunction isBoundRotate(\n    relativePoses: number[][],\n    boundDots: number[][],\n    center: number[],\n    rad: number,\n) {\n    const nextPoses = rad ? relativePoses.map(pos => rotate(pos, rad)) : relativePoses;\n    return [\n        [nextPoses[0], nextPoses[1]],\n        [nextPoses[1], nextPoses[3]],\n        [nextPoses[3], nextPoses[2]],\n        [nextPoses[2], nextPoses[0]],\n    ].some(line => {\n        const centerSign = hitTestLine(center, line) <= 0;\n\n        return !isSameStartLine(boundDots, line, centerSign);\n    });\n}\nfunction getDistPointLine([pos1, pos2]: number[][]) {\n    // x = 0, y = 0\n    // d = (ax + by + c) / root(a2 + b2)\n\n    const dx = pos2[0] - pos1[0];\n    const dy = pos2[1] - pos1[1];\n\n    if (!dx) {\n        return Math.abs(pos1[0]);\n    }\n    if (!dy) {\n        return Math.abs(pos1[1]);\n    }\n    // y - y1 = a(x - x1)\n    // 0 = ax -y + -a * x1 + y1\n\n    const a = dy / dx;\n\n    return Math.abs((-a * pos1[0] + pos1[1]) / Math.sqrt(Math.pow(a, 2) + 1));\n}\nfunction solveReverseLine([pos1, pos2]: number[][]) {\n    const dx = pos2[0] - pos1[0];\n    const dy = pos2[1] - pos1[1];\n\n    if (!dx) {\n        return [pos1[0], 0];\n    }\n    if (!dy) {\n        return [0, pos1[1]];\n    }\n    const a = dy / dx;\n    // y - y1 = a (x  - x1)\n    // y = ax - a * x1 + y1\n    const b = -a * pos1[0] + pos1[1];\n    // y = ax + b = -1/a x\n    // x = -b / (a + 1 / a)\n    // y = b / (1 + 1 / a^2)\n\n    return [\n        -b / (a + 1 / a),\n        b / ((a * a) + 1),\n    ];\n}\nexport function checkRotateInnerBounds(\n    moveable: MoveableManagerInterface<SnappableProps & RotatableProps, any>,\n    prevPoses: number[][],\n    nextPoses: number[][],\n    origin: number[],\n    rotation: number,\n) {\n    const bounds = moveable.props.innerBounds;\n    const rad = rotation * Math.PI / 180;\n\n    if (!bounds) {\n        return [];\n    }\n    const {\n        left,\n        top,\n        width,\n        height,\n    } = bounds;\n\n    const relativeLeft = left - origin[0];\n    const relativeRight = left + width - origin[0];\n    const relativeTop = top - origin[1];\n    const relativeBottom = top + height - origin[1];\n    const dots = [\n        [relativeLeft, relativeTop],\n        [relativeRight, relativeTop],\n        [relativeLeft, relativeBottom],\n        [relativeRight, relativeBottom],\n    ];\n    const center = getPosByDirection(nextPoses, [0, 0]);\n\n    if (!isBoundRotate(nextPoses, dots, center, 0)) {\n        return [];\n    }\n    const result: number[] = [];\n    const dotInfos = dots.map(dot => [\n        getDistSize(dot),\n        getRad([0, 0], dot),\n    ]);\n    [\n        [nextPoses[0], nextPoses[1]],\n        [nextPoses[1], nextPoses[3]],\n        [nextPoses[3], nextPoses[2]],\n        [nextPoses[2], nextPoses[0]],\n    ].forEach(line => {\n        const lineRad = getRad([0, 0], solveReverseLine(line));\n        const lineDist = getDistPointLine(line);\n\n        result.push(...dotInfos\n            .filter(([dotDist]) => {\n                return dotDist && lineDist <= dotDist;\n            })\n            .map(([dotDist, dotRad]) => {\n                const distRad = Math.acos(dotDist ? lineDist / dotDist : 0);\n                const nextRad1 = dotRad + distRad;\n                const nextRad2 = dotRad - distRad;\n\n                return [\n                    rad + nextRad1 - lineRad,\n                    rad + nextRad2 - lineRad,\n                ];\n            })\n            .reduce((prev, cur) => {\n                prev.push(...cur);\n                return prev;\n            }, [])\n            .filter(nextRad => !isBoundRotate(prevPoses, dots, center, nextRad))\n            .map(nextRad => throttle(nextRad * 180 / Math.PI, TINY_NUM)));\n    });\n    return result;\n}\n\nexport function checkInnerBoundPoses(\n    moveable: MoveableManagerInterface<SnappableProps>,\n) {\n    const innerBounds = moveable.props.innerBounds;\n\n    if (!innerBounds) {\n        return {\n            vertical: [],\n            horizontal: [],\n        };\n    }\n    const {\n        pos1,\n        pos2,\n        pos3,\n        pos4,\n    } = moveable.getRect();\n    const poses = [pos1, pos2, pos3, pos4];\n    const center = getPosByDirection(poses, [0, 0]);\n    const { left, top, width, height } = innerBounds;\n    const leftLine = [[left, top], [left, top + height]];\n    const topLine = [[left, top], [left + width, top]];\n    const rightLine = [[left + width, top], [left + width, top + height]];\n    const bottomLine = [[left, top + height], [left + width, top + height]];\n    const lineInfos = getCheckInnerBoundLineInfos(moveable, poses, [0, 0], false);\n\n    const horizontalPoses: number[] = [];\n    const verticalPoses: number[] = [];\n\n    const boundMap = {\n        top: false,\n        bottom: false,\n        left: false,\n        right: false,\n    };\n\n    lineInfos.forEach(lineInfo => {\n        const { line, lineConstants } = lineInfo;\n        const {\n            horizontal: isHorizontalStart,\n            vertical: isVerticalStart,\n        } = isStartLine(center, line);\n\n        // test vertical\n        const topBoundInfo = checkLineBoundCollision(line, lineConstants, topLine, isVerticalStart, 1, true);\n        const bottomBoundInfo = checkLineBoundCollision(line, lineConstants, bottomLine, isVerticalStart, 1, true);\n\n        // test horizontal\n        const leftBoundInfo = checkLineBoundCollision(line, lineConstants, leftLine, isHorizontalStart, 1, true);\n        const rightBoundInfo = checkLineBoundCollision(line, lineConstants, rightLine, isHorizontalStart, 1, true);\n\n        if (topBoundInfo.isBound && !boundMap.top) {\n            horizontalPoses.push(top);\n            boundMap.top = true;\n        }\n        if (bottomBoundInfo.isBound && !boundMap.bottom) {\n            horizontalPoses.push(top + height);\n            boundMap.bottom = true;\n        }\n        if (leftBoundInfo.isBound && !boundMap.left) {\n            verticalPoses.push(left);\n            boundMap.left = true;\n        }\n        if (rightBoundInfo.isBound && !boundMap.right) {\n            verticalPoses.push(left + width);\n            boundMap.right = true;\n        }\n    });\n\n    return {\n        horizontal: horizontalPoses,\n        vertical: verticalPoses,\n    };\n}\n","import { getRad, throttle } from \"@daybrush/utils\";\nimport {\n    BoundInfo, SnappableProps, BoundType,\n    RotatableProps, MoveableManagerInterface, SnappableState,\n} from \"../../types\";\nimport { rotate, minus } from \"@scena/matrix\";\nimport { getDistSize } from \"../../utils\";\nimport { TINY_NUM } from \"../../consts\";\n\nexport function checkBoundPoses(\n    bounds: BoundType | false | undefined,\n    verticalPoses: number[],\n    horizontalPoses: number[],\n) {\n    const {\n        position = \"client\",\n        left = -Infinity,\n        top = -Infinity,\n        right = Infinity,\n        bottom = Infinity,\n    } = bounds || {};\n    const nextBounds = {\n        position,\n        left,\n        top,\n        right,\n        bottom,\n    };\n\n    return {\n        vertical: checkBounds(nextBounds, verticalPoses, true),\n        horizontal: checkBounds(nextBounds, horizontalPoses, false),\n    };\n}\nexport function getBounds(\n    moveable: MoveableManagerInterface<SnappableProps, SnappableState>,\n    externalBounds?: BoundType | false | null,\n) {\n    const {\n        containerClientRect: {\n            clientHeight: containerHeight,\n            clientWidth: containerWidth,\n            clientLeft,\n            clientTop,\n        },\n        snapOffset: {\n            left: snapOffsetLeft,\n            top: snapOffsetTop,\n            right: snapOffsetRight,\n            bottom: snapOffsetBottom,\n        },\n    } = moveable.state;\n    const bounds = externalBounds || moveable.props.bounds || {} as BoundType;\n    const position = bounds.position || \"client\";\n    const isCSS = position === \"css\";\n    const {\n        left = -Infinity,\n        top = -Infinity,\n    } = bounds;\n    let {\n        right = isCSS ? -Infinity : Infinity,\n        bottom = isCSS ? -Infinity : Infinity,\n    } = bounds;\n\n    if (isCSS) {\n        right = containerWidth! + snapOffsetRight - snapOffsetLeft - right;\n        bottom = containerHeight! + snapOffsetBottom - snapOffsetTop - bottom;\n    }\n\n    return {\n        left: left + snapOffsetLeft - clientLeft!,\n        right: right + snapOffsetLeft - clientLeft!,\n        top: top + snapOffsetTop - clientTop!,\n        bottom: bottom + snapOffsetTop - clientTop!,\n    };\n}\nexport function checkBoundKeepRatio(\n    moveable: MoveableManagerInterface<SnappableProps, SnappableState>,\n    startPos: number[],\n    endPos: number[],\n) {\n    const {\n        left,\n        top,\n        right,\n        bottom,\n    } = getBounds(moveable);\n\n    const [endX, endY] = endPos;\n    let [dx, dy] = minus(endPos, startPos);\n\n    if (Math.abs(dx) < TINY_NUM) {\n        dx = 0;\n    }\n    if (Math.abs(dy) < TINY_NUM) {\n        dy = 0;\n    }\n    const isBottom = dy > 0;\n    const isRight = dx > 0;\n\n    const verticalInfo = {\n        isBound: false,\n        offset: 0,\n        pos: 0,\n    };\n    const horizontalInfo = {\n        isBound: false,\n        offset: 0,\n        pos: 0,\n    };\n    if (dx === 0 && dy === 0) {\n        return {\n            vertical: verticalInfo,\n            horizontal: horizontalInfo,\n        };\n    } else if (dx === 0) {\n        if (isBottom) {\n            if (bottom < endY) {\n                horizontalInfo.pos = bottom;\n                horizontalInfo.offset = endY - bottom;\n            }\n        } else {\n            if (top > endY) {\n                horizontalInfo.pos = top;\n                horizontalInfo.offset = endY - top;\n            }\n        }\n    } else if (dy === 0) {\n        if (isRight) {\n            if (right < endX) {\n                verticalInfo.pos = right;\n                verticalInfo.offset = endX - right;\n            }\n        } else {\n            if (left > endX) {\n                verticalInfo.pos = left;\n                verticalInfo.offset = endX - left;\n            }\n        }\n    } else {\n        // y - y1 = a * (x - x1)\n        const a = dy / dx;\n        const b = endPos[1] - a * endX;\n        let y = 0;\n        let x = 0;\n        let isBound = false;\n\n        if (isRight && right <= endX) {\n            y = a * right + b;\n            x = right;\n            isBound = true;\n        } else if (!isRight && endX <= left) {\n            y = a * left + b;\n            x = left;\n            isBound = true;\n        }\n        if (isBound) {\n            if (y < top || y > bottom) {\n                isBound = false;\n            }\n        }\n        if (!isBound) {\n            if (isBottom && bottom <= endY) {\n                y = bottom;\n                x = (y - b) / a;\n                isBound = true;\n            } else if (!isBottom &&  endY <= top) {\n                y = top;\n                x = (y - b) / a;\n                isBound = true;\n            }\n        }\n        if (isBound) {\n            verticalInfo.isBound = true;\n            verticalInfo.pos = x;\n            verticalInfo.offset = endX - x;\n\n            horizontalInfo.isBound = true;\n            horizontalInfo.pos = y;\n            horizontalInfo.offset = endY - y;\n        }\n    }\n\n    return {\n        vertical: verticalInfo,\n        horizontal: horizontalInfo,\n    };\n}\nfunction checkBounds(\n    bounds: Required<BoundType>,\n    poses: number[],\n    isVertical: boolean,\n): BoundInfo[] {\n    // 0   [100 - 200]  300\n    const startBoundPos = bounds[isVertical ? \"left\" : \"top\"];\n    const endBoundPos = bounds[isVertical ? \"right\" : \"bottom\"];\n\n    // 450\n    const minPos = Math.min(...poses);\n    const maxPos = Math.max(...poses);\n    const boundInfos: BoundInfo[] = [];\n\n    if (startBoundPos + 1 > minPos) {\n        boundInfos.push({\n            isBound: true,\n            offset: minPos - startBoundPos,\n            pos: startBoundPos,\n        });\n    }\n    if (endBoundPos - 1 < maxPos) {\n        boundInfos.push({\n            isBound: true,\n            offset: maxPos - endBoundPos,\n            pos: endBoundPos,\n        });\n    }\n\n    if (!boundInfos.length) {\n        boundInfos.push({\n            isBound: false,\n            offset: 0,\n            pos: 0,\n        });\n    }\n\n    return boundInfos.sort((a, b) => Math.abs(b.offset) - Math.abs(a.offset));\n}\nexport function isBoundRotate(\n    relativePoses: number[][],\n    boundRect: { left: number, top: number, right: number, bottom: number },\n    rad: number,\n) {\n    const nextPoses = rad ? relativePoses.map(pos => rotate(pos, rad)) : relativePoses;\n\n    return nextPoses.some(pos => {\n        return (pos[0] < boundRect.left && Math.abs(pos[0] - boundRect.left) > 0.1)\n            || (pos[0] > boundRect.right && Math.abs(pos[0] - boundRect.right) > 0.1)\n            || (pos[1] < boundRect.top && Math.abs(pos[1] - boundRect.top) > 0.1)\n            || (pos[1] > boundRect.bottom && Math.abs(pos[1] - boundRect.bottom) > 0.1);\n    });\n}\nexport function boundRotate(\n    vec: number[],\n    boundPos: number,\n    index: number,\n) {\n    const r = getDistSize(vec);\n    const nextPos = Math.sqrt(r * r - boundPos * boundPos) || 0;\n\n    return [nextPos, -nextPos].sort((a, b) => {\n        return Math.abs(a - vec[index ? 0 : 1]) - Math.abs(b - vec[index ? 0 : 1]);\n    }).map(pos => {\n        return getRad([0, 0], index ? [pos, boundPos] : [boundPos, pos]);\n    });\n}\n\nexport function checkRotateBounds(\n    moveable: MoveableManagerInterface<SnappableProps & RotatableProps, SnappableState>,\n    prevPoses: number[][],\n    nextPoses: number[][],\n    origin: number[],\n    rotation: number,\n) {\n    if (!moveable.props.bounds) {\n        return [];\n    }\n    const rad = rotation * Math.PI / 180;\n\n    const {\n        left,\n        top,\n        right,\n        bottom,\n    } = getBounds(moveable);\n\n    const relativeLeft = left - origin[0];\n    const relativeRight = right - origin[0];\n    const relativeTop = top - origin[1];\n    const relativeBottom = bottom - origin[1];\n    const boundRect = {\n        left: relativeLeft,\n        top: relativeTop,\n        right: relativeRight,\n        bottom: relativeBottom,\n    };\n\n    if (!isBoundRotate(nextPoses, boundRect, 0)) {\n        return [];\n    }\n    const result: number[] = [];\n    [\n        [relativeLeft, 0],\n        [relativeRight, 0],\n        [relativeTop, 1],\n        [relativeBottom, 1],\n    ].forEach(([boundPos, index]) => {\n        nextPoses.forEach(nextPos => {\n            const relativeRad1 = getRad([0, 0], nextPos);\n\n            result.push(...boundRotate(nextPos, boundPos, index)\n                .map(relativeRad2 => rad + relativeRad2 - relativeRad1)\n                .filter(nextRad => !isBoundRotate(prevPoses, boundRect, nextRad))\n                .map(nextRad => throttle(nextRad * 180 / Math.PI, TINY_NUM)));\n        });\n    });\n\n    return result;\n}\n","import { throttle } from \"@daybrush/utils\";\nimport {\n    RenderGuidelineInfo, Renderer, RenderGuidelineInnerInfo,\n    MoveableManagerInterface, SnappableProps, SnapGuideline,\n    SnappableRenderType, SnappableState,\n    SnapDirectionPoses,\n} from \"../../types\";\nimport { prefix, groupBy } from \"../../utils\";\nimport { HORIZONTAL_NAMES_MAP, VERTICAL_NAMES_MAP } from \"./utils\";\n\nexport function renderGuideline(info: RenderGuidelineInfo, React: Renderer): any {\n    const { direction, classNames, size, pos, zoom, key } = info;\n    const isHorizontal = direction === \"horizontal\";\n    const scaleType = isHorizontal ? \"Y\" : \"X\";\n    // const scaleType2 = isHorizontal ? \"Y\" : \"X\";\n\n    return React.createElement(\"div\", {\n        key,\n        className: classNames.join(\" \"),\n        style: {\n            [isHorizontal ? \"width\" : \"height\"]: `${size}`,\n            transform: `translate(${pos[0]}, ${pos[1]}) translate${scaleType}(-50%) scale${scaleType}(${zoom})`,\n        },\n    });\n}\n\nexport function renderInnerGuideline(info: RenderGuidelineInnerInfo, React: Renderer): any {\n    return renderGuideline({\n        ...info,\n        classNames: [\n            prefix(\"line\", \"guideline\", info.direction),\n            ...info.classNames,\n        ].filter(className => className) as string[],\n        size: info.size || `${info.sizeValue}px`,\n        pos: info.pos || info.posValue.map(v => `${throttle(v, 0.1)}px`),\n    }, React);\n}\n\nexport function renderSnapPoses(\n    moveable: MoveableManagerInterface,\n    direction: string,\n    snapPoses: SnappableRenderType[],\n    minPos: number,\n    targetPos: number,\n    size: number,\n    index: number,\n    React: Renderer\n) {\n    const { zoom } = moveable.props;\n    return snapPoses.map(({ type, pos }, i) => {\n        const renderPos = [0, 0];\n\n        renderPos[index] = minPos;\n        renderPos[index ? 0 : 1] = -targetPos + pos;\n\n        return renderInnerGuideline(\n            {\n                key: `${direction}TargetGuideline${i}`,\n                classNames: [prefix(\"target\", \"bold\", type)],\n                posValue: renderPos,\n                sizeValue: size,\n                zoom: zoom!,\n                direction: direction,\n            },\n            React\n        );\n    });\n}\nexport function renderGuidelines(\n    moveable: MoveableManagerInterface<SnappableProps>,\n    type: \"vertical\" | \"horizontal\",\n    guidelines: SnapGuideline[],\n    targetPos: number[],\n    targetRect: SnapDirectionPoses,\n    React: Renderer\n): any[] {\n    const { zoom, isDisplayInnerSnapDigit } = moveable.props;\n\n    const mainNames = type === \"horizontal\" ? VERTICAL_NAMES_MAP : HORIZONTAL_NAMES_MAP;\n    const targetStart = targetRect[mainNames.start]!;\n    const targetEnd = targetRect[mainNames.end]!;\n    return guidelines.filter(({ hide, elementRect }) => {\n        if (hide) {\n            return false;\n        }\n        if (isDisplayInnerSnapDigit && elementRect) {\n            // inner\n            const rect = elementRect.rect;\n\n            if (rect[mainNames.start]! <= targetStart && targetEnd <= rect[mainNames.end]!) {\n                return false;\n            }\n        }\n        return true;\n    }).map((guideline, i) => {\n        const { pos, size, element, className } = guideline;\n\n        const renderPos = [\n            -targetPos[0] + pos[0],\n            -targetPos[1] + pos[1],\n        ];\n\n        return renderInnerGuideline(\n            {\n                key: `${type}-default-guideline-${i}`,\n                classNames: element ? [prefix(\"bold\"), className] : [prefix(\"normal\"), className],\n                direction: type,\n                posValue: renderPos,\n                sizeValue: size,\n                zoom: zoom!,\n            },\n            React\n        );\n    });\n}\n\nexport function renderDigitLine(\n    moveable: MoveableManagerInterface<SnappableProps, SnappableState>,\n    type: \"vertical\" | \"horizontal\",\n    lineType: \"dashed\" | \"gap\",\n    index: number,\n    gap: number,\n    renderPos: number[],\n    className: string | undefined,\n    React: Renderer,\n): any {\n    const {\n        snapDigit = 0,\n        isDisplaySnapDigit = true,\n        snapDistFormat = (v: number, type: \"vertical\" | \"horizontal\") => {\n            // Type can be used render different values.\n            if (type === 'vertical') {\n                return v;\n            }\n            return v;\n        },\n        zoom,\n    } = moveable.props;\n    const scaleType = type === \"horizontal\" ? \"X\" : \"Y\";\n    const sizeName = type === \"vertical\" ? \"height\" : \"width\";\n    const absGap = Math.abs(gap!);\n    const snapSize = isDisplaySnapDigit\n        ? parseFloat(absGap.toFixed(snapDigit))\n        : 0;\n    return <div\n        key={`${type}-${lineType}-guideline-${index}`}\n        className={prefix(\"guideline-group\", type)}\n        style={{\n            left: `${renderPos[0]}px`,\n            top: `${renderPos[1]}px`,\n            [sizeName]: `${absGap}px`,\n        }}\n    >\n        {renderInnerGuideline(\n            {\n                direction: type,\n                classNames: [prefix(lineType), className],\n                size: \"100%\",\n                posValue: [0, 0],\n                sizeValue: absGap,\n                zoom: zoom!,\n            },\n            React\n        )}\n        <div\n            className={prefix(\"size-value\", \"gap\")}\n            style={{\n                transform: `translate${scaleType}(-50%) scale(${zoom})`,\n            }}\n        >\n            {snapSize > 0 ? snapDistFormat(snapSize, type) : \"\"}\n        </div>\n    </div>;\n}\n\nexport function groupByElementGuidelines(\n    type: \"vertical\" | \"horizontal\",\n    guidelines: SnapGuideline[],\n    targetRect: SnapDirectionPoses,\n    isDisplayInnerSnapDigit: boolean,\n) {\n    const index = type === \"vertical\" ? 0 : 1;\n    const otherIndex = type === \"vertical\" ? 1 : 0;\n    const names = index ? VERTICAL_NAMES_MAP : HORIZONTAL_NAMES_MAP;\n    const targetStart = targetRect[names.start]!;\n    const targetEnd = targetRect[names.end]!;\n    return groupBy(guidelines, (guideline) => {\n        return guideline.pos[index];\n    }).map(nextGuidelines => {\n        const start: SnapGuideline[] = [];\n        const end: SnapGuideline[] = [];\n        const inner: SnapGuideline[] = [];\n\n        nextGuidelines.forEach(guideline => {\n            const element = guideline.element!;\n            const rect = guideline.elementRect!.rect;\n            if (rect[names.end]! < targetStart) {\n                start.push(guideline);\n            } else if (targetEnd < rect[names.start]!) {\n                end.push(guideline);\n            } else if (rect[names.start]! <= targetStart && targetEnd <= rect[names.end]! && isDisplayInnerSnapDigit) {\n                const pos = guideline.pos;\n                const elementRect1 = { element, rect: { ...rect, [names.end]: rect[names.start]! } };\n                const elementRect2 = { element, rect: { ...rect, [names.start]: rect[names.end]! } };\n                const nextPos1 = [0, 0];\n                const nextPos2 = [0, 0];\n                nextPos1[index] = pos[index];\n                nextPos1[otherIndex] = pos[otherIndex];\n\n                nextPos2[index] = pos[index];\n                nextPos2[otherIndex] = pos[otherIndex] + guideline.size;\n\n\n                start.push({\n                    type,\n                    pos: nextPos1,\n                    size: 0,\n                    elementRect: elementRect1,\n                });\n                end.push({\n                    type,\n                    pos: nextPos2,\n                    size: 0,\n                    elementRect: elementRect2,\n                });\n                // inner.push(guideline);\n            }\n        });\n\n        start.sort((a, b) => {\n            return b.pos[otherIndex] - a.pos[otherIndex];\n        });\n        end.sort((a, b) => {\n            return a.pos[otherIndex] - b.pos[otherIndex];\n        });\n        return {\n            total: nextGuidelines,\n            start,\n            end,\n            inner,\n        };\n    });\n}\nexport function renderDashedGuidelines(\n    moveable: MoveableManagerInterface<SnappableProps, SnappableState>,\n    guidelines: SnapGuideline[],\n    targetPos: number[],\n    targetRect: SnapDirectionPoses,\n    React: Renderer,\n): any[] {\n    const {\n        isDisplayInnerSnapDigit,\n    } = moveable.props;\n    const rendered: any[] = [];\n\n    ([\"vertical\", \"horizontal\"] as const).forEach(type => {\n        const nextGuidelines = guidelines.filter(guideline => guideline.type === type);\n        const index = type === \"vertical\" ? 1 : 0;\n        const otherIndex = index ? 0 : 1;\n\n        const groups = groupByElementGuidelines(type, nextGuidelines, targetRect, isDisplayInnerSnapDigit!);\n        const mainNames = index ? HORIZONTAL_NAMES_MAP : VERTICAL_NAMES_MAP;\n        const sideNames = index ? VERTICAL_NAMES_MAP : HORIZONTAL_NAMES_MAP;\n        const targetStart = targetRect[mainNames.start]!;\n        const targetEnd = targetRect[mainNames.end]!;\n\n        groups.forEach(({ total, start, end, inner }) => {\n            const sidePos = targetPos[otherIndex] + total[0].pos[otherIndex] - targetRect[sideNames.start]!;\n\n            let prevRect = targetRect;\n\n            start.forEach(guideline => {\n                const nextRect = guideline.elementRect!.rect;\n                const size = prevRect[mainNames.start]! - nextRect[mainNames.end]!;\n\n                if (size > 0) {\n                    const renderPos = [0, 0];\n\n                    renderPos[index] = targetPos[index] + prevRect[mainNames.start]! - targetStart - size;\n                    renderPos[otherIndex] = sidePos;\n\n                    rendered.push(renderDigitLine(\n                        moveable,\n                        type,\n                        \"dashed\",\n                        rendered.length,\n                        size,\n                        renderPos,\n                        guideline.className,\n                        React\n                    ));\n                }\n                prevRect = nextRect;\n            });\n\n            prevRect = targetRect;\n            end.forEach(guideline => {\n                const nextRect = guideline.elementRect!.rect;\n                const size = nextRect[mainNames.start]! - prevRect[mainNames.end]!;\n\n                if (size > 0) {\n                    const renderPos = [0, 0];\n\n                    renderPos[index] = targetPos[index] + prevRect[mainNames.end]! - targetStart;\n                    renderPos[otherIndex] = sidePos;\n\n                    rendered.push(renderDigitLine(\n                        moveable,\n                        type,\n                        \"dashed\",\n                        rendered.length,\n                        size,\n                        renderPos,\n                        guideline.className,\n                        React\n                    ));\n                }\n                prevRect = nextRect;\n            });\n\n            inner.forEach(guideline => {\n                const nextRect = guideline.elementRect!.rect;\n\n                const size1 = targetStart - nextRect[mainNames.start]!;\n                const size2 = nextRect[mainNames.end]! - targetEnd;\n                const renderPos1 = [0, 0];\n                const renderPos2 = [0, 0];\n\n                renderPos1[index] = targetPos[index] - size1;\n                renderPos1[otherIndex] = sidePos;\n\n                renderPos2[index] = targetPos[index] + targetEnd - targetStart;\n                renderPos2[otherIndex] = sidePos;\n\n                rendered.push(renderDigitLine(\n                    moveable,\n                    type,\n                    \"dashed\",\n                    rendered.length,\n                    size1,\n                    renderPos1,\n                    guideline.className,\n                    React\n                ));\n                rendered.push(renderDigitLine(\n                    moveable,\n                    type,\n                    \"dashed\",\n                    rendered.length,\n                    size2,\n                    renderPos2,\n                    guideline.className,\n                    React\n                ));\n            });\n        });\n    });\n    return rendered;\n}\nexport function renderGapGuidelines(\n    moveable: MoveableManagerInterface<SnappableProps, SnappableState>,\n    guidelines: SnapGuideline[],\n    targetPos: number[],\n    targetRect: SnapDirectionPoses,\n    React: any\n): any[] {\n    const rendered: any[] = [];\n    ([\"horizontal\", \"vertical\"] as const).forEach(type => {\n        const nextGuidelines = guidelines.filter(guideline => guideline.type === type).slice(0, 1);\n        const index = type === \"vertical\" ? 0 : 1;\n        const otherIndex = index ? 0 : 1;\n        const mainNames = index ? HORIZONTAL_NAMES_MAP : VERTICAL_NAMES_MAP;\n        const sideNames = index ? VERTICAL_NAMES_MAP : HORIZONTAL_NAMES_MAP;\n        const targetStart = targetRect[mainNames.start]!;\n        const targetEnd = targetRect[mainNames.end]!;\n        const targetSideStart = targetRect[sideNames.start]!;\n        const targetSideEnd = targetRect[sideNames.end]!;\n\n\n        nextGuidelines.forEach(({ gap, gapRects }) => {\n            const sideStartPos = Math.max(\n                targetSideStart,\n                ...gapRects!.map(({ rect }) => rect[sideNames.start]!),\n            );\n            const sideEndPos = Math.min(\n                targetSideEnd,\n                ...gapRects!.map(({ rect }) => rect[sideNames.end]!),\n            );\n            const sideCenterPos = (sideStartPos + sideEndPos) / 2;\n\n            if (sideStartPos === sideEndPos || sideCenterPos === (targetSideStart + targetSideEnd)/ 2) {\n                return;\n            }\n            gapRects!.forEach(({ rect, className }) => {\n                const renderPos = [targetPos[0], targetPos[1]];\n\n                if (rect[mainNames.end]! < targetStart) {\n                    renderPos[index] += rect[mainNames.end]! - targetStart;\n                } else if (targetEnd < rect[mainNames.start]!) {\n                    renderPos[index] += rect[mainNames.start]! - targetStart - gap!;\n                } else {\n                    return;\n                }\n\n                renderPos[otherIndex] += sideCenterPos - targetSideStart;\n                rendered.push(renderDigitLine(\n                    moveable,\n                    index ? \"vertical\" : \"horizontal\",\n                    \"gap\",\n                    rendered.length,\n                    gap!,\n                    renderPos,\n                    className,\n                    React\n                ));\n            });\n        });\n    });\n    return rendered;\n}\n","import { getDist, getRad, IObject, TINY_NUM } from \"@daybrush/utils\";\nimport { minus } from \"@scena/matrix\";\nimport { getAbsolutePoses, getDistSize, getRect, maxOffset } from \"../../utils\";\nimport { getDragDist, getPosByDirection } from \"../../gesto/GestoUtils\";\nimport {\n    BoundInfo, SnapInfo, MoveableManagerInterface, SnappableProps,\n    SnappableState, SnapBoundInfo, SnapGuideline, BoundType, SnapOffsetInfo, DraggableProps,\n} from \"../../types\";\nimport { checkBoundKeepRatio, checkBoundPoses, getBounds } from \"./bounds\";\nimport { getInnerBoundDragInfo } from \"./innerBounds\";\nimport {\n    getNearestSnapGuidelineInfo, checkMoveableSnapPoses,\n    checkSnapPoses, checkSnapKeepRatio,\n} from \"./snap\";\nimport { hasGuidelines, getSnapDirections, splitSnapDirectionPoses } from \"./utils\";\n\ninterface DirectionSnapType<T> {\n    vertical: T;\n    horizontal: T;\n}\n\n\nexport function solveEquation(\n    pos1: number[],\n    pos2: number[],\n    snapOffset: number,\n    isVertical: boolean\n) {\n    let dx = pos2[0] - pos1[0];\n    let dy = pos2[1] - pos1[1];\n\n    if (Math.abs(dx) < TINY_NUM) {\n        dx = 0;\n    }\n    if (Math.abs(dy) < TINY_NUM) {\n        dy = 0;\n    }\n    if (!dx) {\n        // y = 0 * x + b\n        // only horizontal\n        if (!isVertical) {\n            return [0, snapOffset];\n        }\n        return [0, 0];\n    }\n    if (!dy) {\n        // only vertical\n        if (isVertical) {\n            return [snapOffset, 0];\n        }\n        return [0, 0];\n    }\n    // y = ax + b\n    const a = dy / dx;\n    const b = pos1[1] - a * pos1[0];\n\n    if (isVertical) {\n        // y = a * x + b\n        const y = a * (pos2[0] + snapOffset) + b;\n\n        return [snapOffset, y - pos2[1]];\n    } else {\n        // x = (y - b) / a\n        const x = (pos2[1] + snapOffset - b) / a;\n\n        return [x - pos2[0], snapOffset];\n    }\n}\n\n\nfunction solveNextOffset(\n    pos1: number[],\n    pos2: number[],\n    offset: number,\n    isVertical: boolean,\n    datas: IObject<any>\n) {\n    const sizeOffset = solveEquation(pos1, pos2, offset, isVertical);\n\n    if (!sizeOffset) {\n        return {\n            isOutside: false,\n            offset: [0, 0],\n        };\n    }\n    const size = getDist(pos1, pos2);\n    const dist1 = getDist(sizeOffset, pos1);\n    const dist2 = getDist(sizeOffset, pos2);\n\n    const isOutside = dist1 > size || dist2 > size;\n    const [widthOffset, heightOffset] = getDragDist({\n        datas,\n        distX: sizeOffset[0],\n        distY: sizeOffset[1],\n    });\n\n    return {\n        offset: [widthOffset, heightOffset],\n        isOutside,\n    };\n}\n\nfunction getSnapBound(boundInfo: BoundInfo, snapInfo: SnapInfo) {\n    if (boundInfo.isBound) {\n        return boundInfo.offset;\n    } else if (snapInfo.isSnap) {\n        return getNearestSnapGuidelineInfo(snapInfo).offset;\n    }\n    return 0;\n}\n\n\nexport function checkThrottleDragRotate(\n    throttleDragRotate: number,\n    [distX, distY]: number[],\n    [isVerticalBound, isHorizontalBound]: boolean[],\n    [isVerticalSnap, isHorizontalSnap]: boolean[],\n    [verticalOffset, horizontalOffset]: number[]\n) {\n    let offsetX = -verticalOffset;\n    let offsetY = -horizontalOffset;\n\n    if (throttleDragRotate && distX && distY) {\n        offsetX = 0;\n        offsetY = 0;\n        const adjustPoses: number[][] = [];\n        if (isVerticalBound && isHorizontalBound) {\n            adjustPoses.push([0, horizontalOffset], [verticalOffset, 0]);\n        } else if (isVerticalBound) {\n            adjustPoses.push([verticalOffset, 0]);\n        } else if (isHorizontalBound) {\n            adjustPoses.push([0, horizontalOffset]);\n        } else if (isVerticalSnap && isHorizontalSnap) {\n            adjustPoses.push([0, horizontalOffset], [verticalOffset, 0]);\n        } else if (isVerticalSnap) {\n            adjustPoses.push([verticalOffset, 0]);\n        } else if (isHorizontalSnap) {\n            adjustPoses.push([0, horizontalOffset]);\n        }\n        if (adjustPoses.length) {\n            adjustPoses.sort((a, b) => {\n                return (\n                    getDistSize(minus([distX, distY], a)) -\n                    getDistSize(minus([distX, distY], b))\n                );\n            });\n            const adjustPos = adjustPoses[0];\n\n            if (adjustPos[0] && Math.abs(distX) > TINY_NUM) {\n                offsetX = -adjustPos[0];\n                offsetY =\n                    (distY * Math.abs(distX + offsetX)) / Math.abs(distX) -\n                    distY;\n            } else if (adjustPos[1] && Math.abs(distY) > TINY_NUM) {\n                const prevDistY = distY;\n                offsetY = -adjustPos[1];\n                offsetX =\n                    (distX * Math.abs(distY + offsetY)) / Math.abs(prevDistY) -\n                    distX;\n            }\n            if (throttleDragRotate && isHorizontalBound && isVerticalBound) {\n                if (\n                    Math.abs(offsetX) > TINY_NUM &&\n                    Math.abs(offsetX) < Math.abs(verticalOffset)\n                ) {\n                    const scale = Math.abs(verticalOffset) / Math.abs(offsetX);\n\n                    offsetX *= scale;\n                    offsetY *= scale;\n                } else if (\n                    Math.abs(offsetY) > TINY_NUM &&\n                    Math.abs(offsetY) < Math.abs(horizontalOffset)\n                ) {\n                    const scale =\n                        Math.abs(horizontalOffset) / Math.abs(offsetY);\n\n                    offsetX *= scale;\n                    offsetY *= scale;\n                } else {\n                    offsetX = maxOffset(-verticalOffset, offsetX);\n                    offsetY = maxOffset(-horizontalOffset, offsetY);\n                }\n            }\n        }\n    } else {\n        offsetX = distX || isVerticalBound ? -verticalOffset : 0;\n        offsetY = distY || isHorizontalBound ? -horizontalOffset : 0;\n    }\n    return [offsetX, offsetY];\n}\n\nexport function checkSnapBoundsDrag(\n    moveable: MoveableManagerInterface<SnappableProps & DraggableProps, any>,\n    distX: number,\n    distY: number,\n    throttleDragRotate: number,\n    isRequest: boolean,\n    datas: any\n) {\n    if (!hasGuidelines(moveable, \"draggable\")) {\n        return [\n            {\n                isSnap: false,\n                isBound: false,\n                offset: 0,\n            },\n            {\n                isSnap: false,\n                isBound: false,\n                offset: 0,\n            },\n        ];\n    }\n    const poses = getAbsolutePoses(datas.absolutePoses, [distX, distY]);\n    const { left, right, top, bottom } = getRect(poses);\n    const boundPoses = {\n        horizontal: poses.map((pos) => pos[1]),\n        vertical: poses.map((pos) => pos[0]),\n    };\n    const snapDirections = getSnapDirections(moveable.props.snapDirections);\n    const snapPoses = splitSnapDirectionPoses(snapDirections, {\n        left,\n        right,\n        top,\n        bottom,\n        center: (left + right) / 2,\n        middle: (top + bottom) / 2,\n    });\n    const {\n        vertical: verticalSnapBoundInfo,\n        horizontal: horizontalSnapBoundInfo,\n    } = checkMoveableSnapBounds(moveable, isRequest, snapPoses, boundPoses);\n    const {\n        vertical: verticalInnerBoundInfo,\n        horizontal: horizontalInnerBoundInfo,\n    } = getInnerBoundDragInfo(moveable, poses, datas);\n\n    const isVerticalSnap = verticalSnapBoundInfo.isSnap;\n    const isHorizontalSnap = horizontalSnapBoundInfo.isSnap;\n    const isVerticalBound =\n        verticalSnapBoundInfo.isBound || verticalInnerBoundInfo.isBound;\n    const isHorizontalBound =\n        horizontalSnapBoundInfo.isBound || horizontalInnerBoundInfo.isBound;\n    const verticalOffset = maxOffset(\n        verticalSnapBoundInfo.offset,\n        verticalInnerBoundInfo.offset\n    );\n    const horizontalOffset = maxOffset(\n        horizontalSnapBoundInfo.offset,\n        horizontalInnerBoundInfo.offset\n    );\n\n    const [offsetX, offsetY] = checkThrottleDragRotate(\n        throttleDragRotate,\n        [distX, distY],\n        [isVerticalBound, isHorizontalBound],\n        [isVerticalSnap, isHorizontalSnap],\n        [verticalOffset, horizontalOffset]\n    );\n\n    return [\n        {\n            isBound: isVerticalBound,\n            isSnap: isVerticalSnap,\n            offset: offsetX,\n        },\n        {\n            isBound: isHorizontalBound,\n            isSnap: isHorizontalSnap,\n            offset: offsetY,\n        },\n    ];\n}\n\nexport function checkMoveableSnapBounds(\n    moveable: MoveableManagerInterface<SnappableProps, SnappableState>,\n    isRequest: boolean,\n    poses: { vertical: number[]; horizontal: number[]; },\n    boundPoses: { vertical: number[]; horizontal: number[]; } = poses,\n): DirectionSnapType<Required<SnapBoundInfo>> {\n    const {\n        horizontal: horizontalBoundInfos,\n        vertical: verticalBoundInfos,\n    } = checkBoundPoses(\n        getBounds(moveable),\n        boundPoses.vertical,\n        boundPoses.horizontal,\n    );\n    const {\n        horizontal: horizontalSnapInfo,\n        vertical: verticalSnapInfo,\n    } = isRequest ? {\n        horizontal: { isSnap: false, index: -1 } as SnapInfo,\n        vertical: { isSnap: false, index: -1 } as SnapInfo,\n    } : checkMoveableSnapPoses(\n        moveable,\n        poses.vertical,\n        poses.horizontal,\n    );\n    const horizontalOffset = getSnapBound(\n        horizontalBoundInfos[0],\n        horizontalSnapInfo\n    );\n    const verticalOffset = getSnapBound(\n        verticalBoundInfos[0],\n        verticalSnapInfo\n    );\n\n    const horizontalDist = Math.abs(horizontalOffset);\n    const verticalDist = Math.abs(verticalOffset);\n\n    return {\n        horizontal: {\n            isBound: horizontalBoundInfos[0].isBound,\n            isSnap: horizontalSnapInfo.isSnap,\n            snapIndex: horizontalSnapInfo.index,\n            offset: horizontalOffset,\n            dist: horizontalDist,\n            bounds: horizontalBoundInfos,\n            snap: horizontalSnapInfo,\n        },\n        vertical: {\n            isBound: verticalBoundInfos[0].isBound,\n            isSnap: verticalSnapInfo.isSnap,\n            snapIndex: verticalSnapInfo.index,\n            offset: verticalOffset,\n            dist: verticalDist,\n            bounds: verticalBoundInfos,\n            snap: verticalSnapInfo,\n        },\n    };\n}\nexport function checkSnapBounds(\n    guideines: SnapGuideline[],\n    bounds: BoundType | undefined | false,\n    posesX: number[],\n    posesY: number[],\n    snapThreshold: number,\n): DirectionSnapType<Required<SnapBoundInfo>> {\n    const {\n        horizontal: horizontalBoundInfos,\n        vertical: verticalBoundInfos,\n    } = checkBoundPoses(bounds, posesX, posesY);\n\n    // options.isRequest ? {\n    //     horizontal: { isSnap: false, index: -1 } as SnapInfo,\n    //     vertical: { isSnap: false, index: -1 } as SnapInfo,\n    // } :\n    const {\n        horizontal: horizontalSnapInfo,\n        vertical: verticalSnapInfo,\n    } = checkSnapPoses(guideines, posesX, posesY, snapThreshold);\n\n    const horizontalOffset = getSnapBound(\n        horizontalBoundInfos[0],\n        horizontalSnapInfo\n    );\n    const verticalOffset = getSnapBound(\n        verticalBoundInfos[0],\n        verticalSnapInfo\n    );\n\n    const horizontalDist = Math.abs(horizontalOffset);\n    const verticalDist = Math.abs(verticalOffset);\n\n    return {\n        horizontal: {\n            isBound: horizontalBoundInfos[0].isBound,\n            isSnap: horizontalSnapInfo.isSnap,\n            snapIndex: horizontalSnapInfo.index,\n            offset: horizontalOffset,\n            dist: horizontalDist,\n            bounds: horizontalBoundInfos,\n            snap: horizontalSnapInfo,\n        },\n        vertical: {\n            isBound: verticalBoundInfos[0].isBound,\n            isSnap: verticalSnapInfo.isSnap,\n            snapIndex: verticalSnapInfo.index,\n            offset: verticalOffset,\n            dist: verticalDist,\n            bounds: verticalBoundInfos,\n            snap: verticalSnapInfo,\n        },\n    };\n}\n\n\nfunction checkSnapRightLine(\n    startPos: number[],\n    endPos: number[],\n    snapBoundInfo: { vertical: SnapBoundInfo; horizontal: SnapBoundInfo },\n    keepRatio: boolean\n) {\n    const rad = (getRad(startPos, endPos) / Math.PI) * 180;\n    const {\n        vertical: {\n            isBound: isVerticalBound,\n            isSnap: isVerticalSnap,\n            dist: verticalDist,\n        },\n        horizontal: {\n            isBound: isHorizontalBound,\n            isSnap: isHorizontalSnap,\n            dist: horizontalDist,\n        },\n    } = snapBoundInfo;\n\n    const rad180 = rad % 180;\n    const isHorizontalLine = rad180 < 3 || rad180 > 177;\n    const isVerticalLine = rad180 > 87 && rad180 < 93;\n\n    if (horizontalDist < verticalDist) {\n        if (\n            isVerticalBound ||\n            (isVerticalSnap &&\n                !isVerticalLine &&\n                (!keepRatio || !isHorizontalLine))\n        ) {\n            return \"vertical\";\n        }\n    }\n    if (\n        isHorizontalBound ||\n        (isHorizontalSnap &&\n            !isHorizontalLine &&\n            (!keepRatio || !isVerticalLine))\n    ) {\n        return \"horizontal\";\n    }\n    return \"\";\n}\n\n\nexport function getSnapBoundInfo(\n    moveable: MoveableManagerInterface<SnappableProps, SnappableState>,\n    poses: number[][],\n    directions: number[][][],\n    keepRatio: boolean,\n    isRequest: boolean,\n    datas: any\n) {\n    return directions.map(([startDirection, endDirection]) => {\n        const otherStartPos = getPosByDirection(poses, startDirection);\n        const otherEndPos = getPosByDirection(poses, endDirection);\n        const snapBoundInfo = keepRatio\n            ? checkSnapBoundsKeepRatio(\n                moveable,\n                otherStartPos,\n                otherEndPos,\n                isRequest\n            )\n            : checkMoveableSnapBounds(moveable, isRequest, {\n                vertical: [otherEndPos[0]],\n                horizontal: [otherEndPos[1]],\n            });\n\n        const {\n            horizontal: {\n                // dist: otherHorizontalDist,\n                offset: otherHorizontalOffset,\n                isBound: isOtherHorizontalBound,\n                isSnap: isOtherHorizontalSnap,\n            },\n            vertical: {\n                // dist: otherVerticalDist,\n                offset: otherVerticalOffset,\n                isBound: isOtherVerticalBound,\n                isSnap: isOtherVerticalSnap,\n            },\n        } = snapBoundInfo;\n\n        const multiple = minus(endDirection, startDirection);\n\n        if (!otherVerticalOffset && !otherHorizontalOffset) {\n            return {\n                isBound: isOtherVerticalBound || isOtherHorizontalBound,\n                isSnap: isOtherVerticalSnap || isOtherHorizontalSnap,\n                sign: multiple,\n                offset: [0, 0],\n            };\n        }\n        const snapLine = checkSnapRightLine(\n            otherStartPos,\n            otherEndPos,\n            snapBoundInfo,\n            keepRatio\n        );\n\n        if (!snapLine) {\n            return {\n                sign: multiple,\n                isBound: false,\n                isSnap: false,\n                offset: [0, 0],\n            };\n        }\n\n        const isVertical = snapLine === \"vertical\";\n        let sizeOffset = [0, 0];\n\n        if (\n            !keepRatio\n            && Math.abs(endDirection[0]) === 1\n            && Math.abs(endDirection[1]) === 1\n            && startDirection[0] !== endDirection[0]\n            && startDirection[1] !== endDirection[1]\n        ) {\n            sizeOffset = getDragDist({\n                datas,\n                distX: -otherVerticalOffset,\n                distY: -otherHorizontalOffset,\n            });\n        } else {\n            sizeOffset = solveNextOffset(\n                otherStartPos,\n                otherEndPos,\n                -(isVertical ? otherVerticalOffset : otherHorizontalOffset),\n                isVertical,\n                datas,\n            ).offset;\n        }\n        sizeOffset = sizeOffset.map((size, i) => size * (multiple[i] ? 2 / multiple[i] : 0));\n\n\n        return {\n            sign: multiple,\n            isBound: isVertical ? isOtherVerticalBound : isOtherHorizontalBound,\n            isSnap: isVertical ? isOtherVerticalSnap : isOtherHorizontalSnap,\n            offset: sizeOffset,\n        };\n    });\n}\n\n\nfunction getSnapBoundOffset(boundInfo: BoundInfo, snapInfo: SnapOffsetInfo) {\n    if (boundInfo.isBound) {\n        return boundInfo.offset;\n    } else if (snapInfo.isSnap) {\n        return snapInfo.offset;\n    }\n    return 0;\n}\n\nexport function checkSnapBoundsKeepRatio(\n    moveable: MoveableManagerInterface<SnappableProps, SnappableState>,\n    startPos: number[],\n    endPos: number[],\n    isRequest: boolean\n): DirectionSnapType<SnapBoundInfo> {\n    const {\n        horizontal: horizontalBoundInfo,\n        vertical: verticalBoundInfo,\n    } = checkBoundKeepRatio(moveable, startPos, endPos);\n    const {\n        horizontal: horizontalSnapInfo,\n        vertical: verticalSnapInfo,\n    } = isRequest ? ({\n        horizontal: { isSnap: false },\n        vertical: { isSnap: false },\n    } as any) : checkSnapKeepRatio(moveable, startPos, endPos);\n\n    const horizontalOffset = getSnapBoundOffset(\n        horizontalBoundInfo,\n        horizontalSnapInfo\n    );\n    const verticalOffset = getSnapBoundOffset(\n        verticalBoundInfo,\n        verticalSnapInfo\n    );\n\n    const horizontalDist = Math.abs(horizontalOffset);\n    const verticalDist = Math.abs(verticalOffset);\n\n    return {\n        horizontal: {\n            isBound: horizontalBoundInfo.isBound,\n            isSnap: horizontalSnapInfo.isSnap,\n            offset: horizontalOffset,\n            dist: horizontalDist,\n        },\n        vertical: {\n            isBound: verticalBoundInfo.isBound,\n            isSnap: verticalSnapInfo.isSnap,\n            offset: verticalOffset,\n            dist: verticalDist,\n        },\n    };\n}\n\nexport function checkMaxBounds(\n    moveable: MoveableManagerInterface<SnappableProps>,\n    poses: number[][],\n    direction: number[],\n    fixedPosition: number[],\n    datas: any\n) {\n    const fixedDirection = [-direction[0], -direction[1]];\n    const { width, height } = moveable.state;\n    const bounds = moveable.props.bounds;\n    let maxWidth = Infinity;\n    let maxHeight = Infinity;\n\n    if (bounds) {\n        const directions = [\n            [direction[0], -direction[1]],\n            [-direction[0], direction[1]],\n        ];\n        const {\n            left = -Infinity,\n            top = -Infinity,\n            right = Infinity,\n            bottom = Infinity,\n        } = bounds;\n\n        directions.forEach((otherDirection) => {\n            const isCheckVertical = otherDirection[0] !== fixedDirection[0];\n            const isCheckHorizontal = otherDirection[1] !== fixedDirection[1];\n            const otherPos = getPosByDirection(poses, otherDirection);\n            const deg = (getRad(fixedPosition, otherPos) * 360) / Math.PI;\n\n            if (isCheckHorizontal) {\n                const nextOtherPos = otherPos.slice();\n\n                if (Math.abs(deg - 360) < 2 || Math.abs(deg - 180) < 2) {\n                    nextOtherPos[1] = fixedPosition[1];\n                }\n                const {\n                    offset: [, heightOffset],\n                    isOutside: isHeightOutside,\n                } = solveNextOffset(\n                    fixedPosition,\n                    nextOtherPos,\n                    (fixedPosition[1] < otherPos[1] ? bottom : top) -\n                    otherPos[1],\n                    false,\n                    datas\n                );\n                if (!isNaN(heightOffset)) {\n                    maxHeight = height + (isHeightOutside ? 1 : -1) * Math.abs(heightOffset);\n                }\n            }\n            if (isCheckVertical) {\n                const nextOtherPos = otherPos.slice();\n\n                if (Math.abs(deg - 90) < 2 || Math.abs(deg - 270) < 2) {\n                    nextOtherPos[0] = fixedPosition[0];\n                }\n                const {\n                    offset: [widthOffset],\n                    isOutside: isWidthOutside,\n                } = solveNextOffset(\n                    fixedPosition,\n                    nextOtherPos,\n                    (fixedPosition[0] < otherPos[0] ? right : left) - otherPos[0],\n                    true,\n                    datas\n                );\n                if (!isNaN(widthOffset)) {\n                    maxWidth = width + (isWidthOutside ? 1 : -1) * Math.abs(widthOffset);\n                }\n            }\n        });\n    }\n    return {\n        maxWidth,\n        maxHeight,\n    };\n}\n","import { isObject, throttle } from \"@daybrush/utils\";\nimport { diff } from \"@egjs/children-differ\";\nimport { minus } from \"@scena/matrix\";\nimport { getMinMaxs } from \"overlap-area\";\nimport {\n    MoveableManagerInterface, SnappableProps,\n    SnappableState, SnapGuideline, SnapDirectionPoses,\n    PosGuideline, ElementGuidelineValue,\n    SnapElementRect,\n} from \"../../types\";\nimport { getRect, getAbsolutePosesByState, getRefTarget, calculateInversePosition, roundSign } from \"../../utils\";\nimport {\n    splitSnapDirectionPoses, getSnapDirections,\n    HORIZONTAL_NAMES_MAP, VERTICAL_NAMES_MAP, calculateContainerPos,\n} from \"./utils\";\n\nexport function getTotalGuidelines(\n    moveable: MoveableManagerInterface<SnappableProps, SnappableState>,\n) {\n    const state = moveable.state;\n    const {\n        containerClientRect,\n        hasFixed,\n    } = state;\n    const {\n        overflow,\n        scrollHeight: containerHeight,\n        scrollWidth: containerWidth,\n        clientHeight: containerClientHeight,\n        clientWidth: containerClientWidth,\n        clientLeft,\n        clientTop,\n    } = containerClientRect;\n    const {\n        snapGap = true,\n        verticalGuidelines,\n        horizontalGuidelines,\n        snapThreshold = 5,\n        snapGridWidth = 0,\n        snapGridHeight = 0,\n        maxSnapElementGuidelineDistance = Infinity,\n    } = moveable.props;\n    const { top, left, bottom, right } = getRect(getAbsolutePosesByState(moveable.state));\n    const targetRect = { top, left, bottom, right, center: (left + right) / 2, middle: (top + bottom) / 2 };\n    const elementGuidelines = getElementGuidelines(moveable);\n    let totalGuidelines: SnapGuideline[] = [...elementGuidelines];\n\n    if (snapGap) {\n        totalGuidelines.push(...getGapGuidelines(\n            moveable, targetRect, snapThreshold,\n        ));\n    }\n    totalGuidelines.push(...getGridGuidelines(\n        snapGridWidth,\n        snapGridHeight,\n        overflow ? containerWidth! : containerClientWidth!,\n        overflow ? containerHeight! : containerClientHeight!,\n        clientLeft,\n        clientTop,\n    ));\n    const snapOffset = {\n        ...(state.snapOffset || {\n            left: 0,\n            top: 0,\n            bottom: 0,\n            right: 0,\n        }),\n    };\n\n\n    if (hasFixed) {\n        const { left, top } = containerClientRect;\n\n        snapOffset.left += left;\n        snapOffset.top += top;\n        snapOffset.right += left;\n        snapOffset.bottom += top;\n    }\n\n    totalGuidelines.push(...getDefaultGuidelines(\n        horizontalGuidelines || false,\n        verticalGuidelines || false,\n        overflow ? containerWidth! : containerClientWidth!,\n        overflow ? containerHeight! : containerClientHeight!,\n        clientLeft,\n        clientTop,\n        snapOffset,\n    ));\n\n    totalGuidelines = totalGuidelines.filter(({ element, elementRect, type }) => {\n        if (!element || !elementRect) {\n            return true;\n        }\n        const rect = elementRect.rect;\n\n        return checkBetweenRects(targetRect, rect, type, maxSnapElementGuidelineDistance);\n    });\n\n    return totalGuidelines;\n}\n\nexport function getGapGuidelines(\n    moveable: MoveableManagerInterface<SnappableProps, SnappableState>,\n    targetRect: SnapDirectionPoses,\n    snapThreshold: number,\n) {\n    const {\n        maxSnapElementGuidelineDistance = Infinity,\n        maxSnapElementGapDistance = Infinity,\n    } = moveable.props;\n    const elementRects = moveable.state.elementRects;\n    const gapGuidelines: SnapGuideline[] = [];\n    [\n        [\"vertical\", VERTICAL_NAMES_MAP, HORIZONTAL_NAMES_MAP] as const,\n        [\"horizontal\", HORIZONTAL_NAMES_MAP, VERTICAL_NAMES_MAP] as const,\n    ].forEach(([type, mainNames, sideNames]) => {\n        const targetStart = targetRect[mainNames.start]!;\n        const targetEnd = targetRect[mainNames.end]!;\n        const targetCenter = targetRect[mainNames.center]!;\n        const targetStart2 = targetRect[sideNames.start]!;\n        const targetEnd2 = targetRect[sideNames.end]!;\n\n        // element : moveable\n        function getDist(elementRect: SnapElementRect) {\n            const rect = elementRect.rect;\n\n            if (rect[mainNames.end]! < targetStart + snapThreshold) {\n                return targetStart - rect[mainNames.end]!;\n            } else if (targetEnd - snapThreshold < rect[mainNames.start]!) {\n                return rect[mainNames.start]! - targetEnd;\n            } else {\n                return -1;\n            }\n        }\n        const nextElementRects = elementRects.filter(elementRect => {\n            const rect = elementRect.rect;\n\n            if (rect[sideNames.start]! > targetEnd2 || rect[sideNames.end]! < targetStart2) {\n                return false;\n            }\n\n            return getDist(elementRect) > 0;\n        }).sort((a, b) => {\n            return getDist(a) - getDist(b);\n        });\n\n        const groups: SnapElementRect[][] = [];\n\n        nextElementRects.forEach(snapRect1 => {\n            nextElementRects.forEach(snapRect2 => {\n                if (snapRect1 === snapRect2) {\n                    return;\n                }\n                const { rect: rect1 } = snapRect1;\n                const { rect: rect2 } = snapRect2;\n\n                const rect1Start = rect1[sideNames.start]!;\n                const rect1End = rect1[sideNames.end]!;\n                const rect2Start = rect2[sideNames.start]!;\n                const rect2End = rect2[sideNames.end]!;\n\n                if (rect1Start > rect2End || rect2Start > rect1End) {\n                    return;\n                }\n\n                groups.push([snapRect1, snapRect2]);\n            });\n        });\n\n        groups.forEach(([snapRect1, snapRect2]) => {\n            const { rect: rect1 } = snapRect1;\n            const { rect: rect2 } = snapRect2;\n\n            const rect1Start = rect1[mainNames.start]!;\n            const rect1End = rect1[mainNames.end]!;\n            const rect2Start = rect2[mainNames.start]!;\n            const rect2End = rect2[mainNames.end]!;\n            let gap = 0;\n            let pos = 0;\n            let isStart = false;\n            let isCenter = false;\n            let isEnd = false;\n\n            if (rect1End <= targetStart && targetEnd <= rect2Start) {\n                // (l)element1(r) : (l)target(r) : (l)element2(r)\n                isCenter = true;\n                gap = ((rect2Start - rect1End) - (targetEnd - targetStart)) / 2;\n                pos = rect1End + gap + (targetEnd - targetStart) / 2;\n\n                if (Math.abs(pos - targetCenter) > snapThreshold) {\n                    return;\n                }\n            } else if (rect1End < rect2Start && rect2End < targetStart + snapThreshold) {\n                // (l)element1(r) : (l)element2(r) : (l)target\n                isStart = true;\n\n                gap = rect2Start - rect1End;\n                pos = rect2End + gap;\n\n                if (Math.abs(pos - targetStart) > snapThreshold) {\n                    return;\n                }\n            } else if (rect1End < rect2Start && targetEnd - snapThreshold < rect1Start) {\n                // target(r) : (l)element1(r) : (l)element2(r)\n\n                isEnd = true;\n                gap = rect2Start - rect1End;\n                pos = rect1Start - gap;\n\n                if (Math.abs(pos - targetEnd) > snapThreshold) {\n                    return;\n                }\n            } else {\n                return;\n            }\n            if (!gap) {\n                return;\n            }\n            if (!checkBetweenRects(targetRect, rect2, type, maxSnapElementGuidelineDistance)) {\n                return;\n            }\n            if (gap > maxSnapElementGapDistance) {\n                return;\n            }\n            gapGuidelines.push({\n                type,\n                pos: type === \"vertical\" ? [pos, 0] : [0, pos],\n                element: snapRect2.element,\n                size: 0,\n                className: snapRect2.className,\n                isStart,\n                isCenter,\n                isEnd,\n                gap,\n                hide: true,\n                gapRects: [snapRect1, snapRect2],\n            });\n        });\n    });\n    return gapGuidelines;\n}\nexport function getGridGuidelines(\n    snapGridWidth: number,\n    snapGridHeight: number,\n    containerWidth: number,\n    containerHeight: number,\n    clientLeft = 0,\n    clientTop = 0,\n): SnapGuideline[] {\n    const guidelines: SnapGuideline[] = [];\n\n    if (snapGridHeight) {\n        for (let pos = 0; pos <= containerHeight; pos += snapGridHeight) {\n            guidelines.push({\n                type: \"horizontal\",\n                pos: [0, throttle(pos - clientTop, 0.1)],\n                size: containerWidth!,\n                hide: true,\n            });\n        }\n    }\n    if (snapGridWidth) {\n        for (let pos = 0; pos <= containerWidth; pos += snapGridWidth) {\n            guidelines.push({\n                type: \"vertical\",\n                pos: [throttle(pos - clientLeft, 0.1), 0],\n                size: containerHeight!,\n                hide: true,\n            });\n        }\n    }\n    return guidelines;\n}\n\nexport function checkBetweenRects(\n    rect1: SnapDirectionPoses,\n    rect2: SnapDirectionPoses,\n    type: \"horizontal\" | \"vertical\",\n    distance: number,\n) {\n    if (type === \"horizontal\") {\n        return Math.abs(rect1.right! - rect2.left!) <= distance\n            || Math.abs(rect1.left! - rect2.right!) <= distance\n            || rect1.left! <= rect2.right! && rect2.left! <= rect1.right!;\n    } else if (type === \"vertical\") {\n        return Math.abs(rect1.bottom! - rect2.top!) <= distance\n            || Math.abs(rect1.top! - rect2.bottom!) <= distance\n            || rect1.top! <= rect2.bottom! && rect2.top! <= rect1.bottom!;\n    }\n    return true;\n}\n\n\nexport function getElementGuidelines(\n    moveable: MoveableManagerInterface<SnappableProps, SnappableState>,\n) {\n    const state = moveable.state;\n\n    const {\n        elementGuidelines = [],\n    } = moveable.props;\n\n    if (!elementGuidelines.length) {\n        state.elementRects = [];\n        return [];\n    }\n\n    const prevValues = (state.elementRects || []).filter(snapRect => !snapRect.refresh);\n    const nextElementGuidelines = elementGuidelines.map(el => {\n        if (isObject(el) && \"element\" in el) {\n            return {\n                ...el,\n                element: getRefTarget(el.element, true)!,\n            };\n        }\n        return {\n            element: getRefTarget(el, true)!,\n        };\n    }).filter(value => {\n        return value.element;\n    }) as ElementGuidelineValue[];\n\n    const {\n        maintained,\n        added,\n    } = diff(prevValues.map(v => v.element), nextElementGuidelines.map(v => v.element));\n\n\n    const nextValues: SnapElementRect[] = [];\n    maintained.forEach(([prevIndex, nextIndex]) => {\n        nextValues[nextIndex] = prevValues[prevIndex];\n    });\n\n    getSnapElementRects(moveable, added.map(index => nextElementGuidelines[index])).map((rect, i) => {\n        nextValues[added[i]] = rect;\n    });\n\n\n    state.elementRects = nextValues;\n    const elementSnapDirections = getSnapDirections(moveable.props.elementSnapDirections);\n    const nextGuidelines: SnapGuideline[] = [];\n\n    nextValues.forEach(snapRect => {\n        const {\n            element,\n            top: topValue = elementSnapDirections.top,\n            left: leftValue = elementSnapDirections.left,\n            right: rightValue = elementSnapDirections.right,\n            bottom: bottomValue = elementSnapDirections.bottom,\n            center: centerValue = elementSnapDirections.center,\n            middle: middleValue = elementSnapDirections.middle,\n            className,\n            rect,\n        } = snapRect;\n        const {\n            horizontal,\n            vertical,\n        } = splitSnapDirectionPoses({\n            top: topValue,\n            right: rightValue,\n            left: leftValue,\n            bottom: bottomValue,\n            center: centerValue,\n            middle: middleValue,\n        }, rect);\n        const rectTop = rect.top!;\n        const rectLeft = rect.left!;\n        const width = rect.right! - rectLeft;\n        const height = rect.bottom! - rectTop;\n        const sizes = [width, height];\n\n        vertical.forEach(pos => {\n            nextGuidelines.push({\n                type: \"vertical\", element, pos: [\n                    throttle(pos, 0.1),\n                    rectTop,\n                ], size: height,\n                sizes,\n                className,\n                elementRect: snapRect,\n            });\n        });\n        horizontal.forEach(pos => {\n            nextGuidelines.push({\n                type: \"horizontal\", element, pos: [\n                    rectLeft,\n                    throttle(pos, 0.1),\n                ], size: width,\n                sizes,\n                className,\n                elementRect: snapRect,\n            });\n        });\n    });\n\n    return nextGuidelines;\n}\n\n\nexport function getDefaultGuidelines(\n    horizontalGuidelines: Array<PosGuideline | number> | false,\n    verticalGuidelines: Array<PosGuideline | number> | false,\n    width: number,\n    height: number,\n    clientLeft = 0,\n    clientTop = 0,\n    snapOffset = { left: 0, top: 0, right: 0, bottom: 0 },\n): SnapGuideline[] {\n    const guidelines: SnapGuideline[] = [];\n    const {\n        left: snapOffsetLeft,\n        top: snapOffsetTop,\n        bottom: snapOffsetBottom,\n        right: snapOffsetRight,\n    } = snapOffset;\n    const snapWidth = width! + snapOffsetRight - snapOffsetLeft;\n    const snapHeight = height! + snapOffsetBottom - snapOffsetTop;\n\n    horizontalGuidelines && horizontalGuidelines!.forEach(posInfo => {\n        const nextPosInfo = isObject(posInfo) ? posInfo : { pos: posInfo };\n\n        guidelines.push({\n            type: \"horizontal\",\n            pos: [\n                snapOffsetLeft,\n                throttle(nextPosInfo.pos - clientTop + snapOffsetTop, 0.1),\n            ],\n            size: snapWidth,\n            className: nextPosInfo.className,\n        });\n    });\n    verticalGuidelines && verticalGuidelines!.forEach(posInfo => {\n        const nextPosInfo = isObject(posInfo) ? posInfo : { pos: posInfo };\n\n        guidelines.push({\n            type: \"vertical\",\n            pos: [\n                throttle(nextPosInfo.pos - clientLeft + snapOffsetLeft, 0.1),\n                snapOffsetTop,\n            ],\n            size: snapHeight,\n            className: nextPosInfo.className,\n        });\n    });\n    return guidelines;\n}\n\n\n\nexport function getSnapElementRects(\n    moveable: MoveableManagerInterface<SnappableProps, SnappableState>,\n    values: ElementGuidelineValue[],\n): SnapElementRect[] {\n    if (!values.length) {\n        return [];\n    }\n    const state = moveable.state;\n    const {\n        containerClientRect,\n        targetClientRect: {\n            top: clientTop,\n            left: clientLeft,\n        },\n        rootMatrix,\n        is3d,\n    } = state;\n    const n = is3d ? 4 : 3;\n    const [containerLeft, containerTop] = calculateContainerPos(rootMatrix, containerClientRect, n);\n    const poses = getAbsolutePosesByState(state);\n    const {\n        minX: targetLeft,\n        minY: targetTop,\n    } = getMinMaxs(poses);\n    const [distLeft, distTop] = minus([targetLeft, targetTop], calculateInversePosition(rootMatrix, [\n        clientLeft - containerLeft,\n        clientTop - containerTop,\n    ], n)).map(pos => roundSign(pos));\n\n    return values.map(value => {\n        const rect = value.element.getBoundingClientRect();\n        const left = rect.left - containerLeft;\n        const top = rect.top - containerTop;\n        const bottom = top + rect.height;\n        const right = left + rect.width;\n        const [elementLeft, elementTop] = calculateInversePosition(rootMatrix, [left, top], n);\n        const [elementRight, elementBottom] = calculateInversePosition(rootMatrix, [right, bottom], n);\n\n        return {\n            ...value,\n            rect: {\n                left: elementLeft + distLeft,\n                right: elementRight + distLeft,\n                top: elementTop + distTop,\n                bottom: elementBottom + distTop,\n                center: (elementLeft + elementRight) / 2 + distLeft,\n                middle: (elementTop + elementBottom) / 2 + distTop,\n            },\n        };\n    });\n}\n\n","import {\n    Renderer,\n    SnappableProps,\n    SnappableState,\n    SnapGuideline,\n    SnapInfo,\n    ScalableProps,\n    SnapPosInfo,\n    RotatableProps,\n    RectInfo,\n    MoveableManagerInterface,\n    SnappableRenderType,\n    BoundType,\n    MoveableGroupInterface,\n} from \"../types\";\nimport {\n    prefix,\n    calculatePoses,\n    getRect,\n    getAbsolutePosesByState,\n    getAbsolutePoses,\n    getClientRect,\n    getRefTarget,\n    getDragDistByState,\n    triggerEvent,\n    getDirectionCondition,\n} from \"../utils\";\nimport {\n    findIndex, hasClass, throttle,\n} from \"@daybrush/utils\";\nimport {\n    getDragDist,\n    scaleMatrix,\n    getPosByDirection,\n} from \"../gesto/GestoUtils\";\nimport { minus, rotate, plus } from \"@scena/matrix\";\nimport { dragControlCondition as rotatableDragControlCondtion } from \"./Rotatable\";\nimport { FLOAT_POINT_NUM } from \"../consts\";\nimport {\n    getInnerBoundInfo,\n    getCheckInnerBoundLineInfos,\n    checkRotateInnerBounds,\n    checkInnerBoundPoses,\n} from \"./snappable/innerBounds\";\nimport {\n    checkBoundPoses,\n    checkRotateBounds,\n    getBounds,\n} from \"./snappable/bounds\";\nimport {\n    checkSnaps,\n    getSnapInfosByDirection,\n    getNearOffsetInfo,\n    getCheckSnapDirections,\n} from \"./snappable/snap\";\nimport {\n    renderSnapPoses,\n    renderGuidelines,\n    renderDashedGuidelines,\n    renderGapGuidelines,\n} from \"./snappable/render\";\nimport {\n    hasGuidelines,\n} from \"./snappable/utils\";\nimport {\n    checkMaxBounds,\n    checkMoveableSnapBounds,\n    getSnapBoundInfo,\n} from \"./snappable/snapBounds\";\nimport { getTotalGuidelines } from \"./snappable/getTotalGuidelines\";\n\n\nexport interface SnapPoses {\n    vertical: number[];\n    horizontal: number[];\n}\n\nexport function checkSnapInfo(\n    moveable: MoveableManagerInterface<SnappableProps, SnappableState>\n) {\n    const state = moveable.state;\n    const container = state.container;\n    const snapContainer = moveable.props.snapContainer || container!;\n\n    if (state.snapContainer === snapContainer && state.guidelines && state.guidelines.length) {\n        return false;\n    }\n\n    const containerClientRect = state.containerClientRect;\n    const snapOffset = {\n        left: 0,\n        top: 0,\n        bottom: 0,\n        right: 0,\n    };\n\n    if (container !== snapContainer) {\n        const snapContainerTarget = getRefTarget(snapContainer, true);\n\n        if (snapContainerTarget) {\n            const snapContainerRect = getClientRect(snapContainerTarget);\n            const offset1 = getDragDistByState(state, [\n                snapContainerRect.left - containerClientRect.left,\n                snapContainerRect.top - containerClientRect.top,\n            ]);\n            const offset2 = getDragDistByState(state, [\n                snapContainerRect.right - containerClientRect.right,\n                snapContainerRect.bottom - containerClientRect.bottom,\n            ]);\n\n            snapOffset.left = throttle(offset1[0], 0.00001);\n            snapOffset.top = throttle(offset1[1], 0.00001);\n            snapOffset.right = throttle(offset2[0], 0.00001);\n            snapOffset.bottom = throttle(offset2[1], 0.00001);\n        }\n    }\n\n    state.snapContainer = snapContainer;\n    state.snapOffset = snapOffset;\n    state.guidelines = getTotalGuidelines(moveable);\n    state.enableSnap = true;\n    return true;\n}\n\nfunction getNextFixedPoses(\n    matrix: number[],\n    width: number,\n    height: number,\n    fixedDirection: number[],\n    fixedPos: number[],\n    is3d: boolean\n) {\n    const nextPoses = calculatePoses(matrix, width, height, is3d ? 4 : 3);\n    const nextFixedPos = getPosByDirection(nextPoses, fixedDirection);\n\n    return getAbsolutePoses(nextPoses, minus(fixedPos, nextFixedPos));\n}\n\nexport function normalized(value: number) {\n    return value ? value / Math.abs(value) : 0;\n}\n\n\nexport function getSizeOffsetInfo(\n    moveable: MoveableManagerInterface<SnappableProps, SnappableState>,\n    poses: number[][],\n    direction: number[],\n    keepRatio: boolean,\n    isRequest: boolean,\n    datas: any\n) {\n    const { fixedDirection } = datas;\n    const directions = getCheckSnapDirections(direction, fixedDirection, keepRatio);\n    const innerBoundLineInfos = getCheckInnerBoundLineInfos(moveable, poses, direction, keepRatio);\n    const offsets = [\n        ...getSnapBoundInfo(\n            moveable,\n            poses,\n            directions,\n            keepRatio,\n            isRequest,\n            datas\n        ),\n        ...getInnerBoundInfo(\n            moveable,\n            innerBoundLineInfos,\n            datas\n        ),\n    ];\n    const widthOffsetInfo = getNearOffsetInfo(offsets, 0);\n    const heightOffsetInfo = getNearOffsetInfo(offsets, 1);\n\n    return {\n        width: {\n            isBound: widthOffsetInfo.isBound,\n            offset: widthOffsetInfo.offset[0],\n        },\n        height: {\n            isBound: heightOffsetInfo.isBound,\n            offset: heightOffsetInfo.offset[1],\n        },\n    };\n}\nexport function recheckSizeByTwoDirection(\n    moveable: MoveableManagerInterface<SnappableProps, SnappableState>,\n    poses: number[][],\n    width: number,\n    height: number,\n    maxWidth: number,\n    maxHeight: number,\n    direction: number[],\n    isRequest: boolean,\n    datas: any\n) {\n    const snapPos = getPosByDirection(poses, direction);\n\n    const {\n        horizontal: { offset: horizontalOffset },\n        vertical: { offset: verticalOffset },\n    } = checkMoveableSnapBounds(moveable, isRequest, {\n        vertical: [snapPos[0]],\n        horizontal: [snapPos[1]],\n    });\n\n    if (throttle(verticalOffset, FLOAT_POINT_NUM) || throttle(horizontalOffset, FLOAT_POINT_NUM)) {\n        const [nextWidthOffset, nextHeightOffset] = getDragDist({\n            datas,\n            distX: -verticalOffset,\n            distY: -horizontalOffset,\n        });\n        const nextWidth = Math.min(\n            maxWidth || Infinity,\n            width + direction[0] * nextWidthOffset\n        );\n        const nextHeight = Math.min(\n            maxHeight || Infinity,\n            height + direction[1] * nextHeightOffset\n        );\n\n        return [nextWidth - width, nextHeight - height];\n    }\n    return [0, 0];\n}\nexport function checkSizeDist(\n    moveable: MoveableManagerInterface<any, any>,\n    getNextPoses: (widthOffset: number, heightOffset: number) => number[][],\n    width: number,\n    height: number,\n    direction: number[],\n    fixedPosition: number[],\n    isRequest: boolean,\n    datas: any\n) {\n    const poses = getAbsolutePosesByState(moveable.state);\n    const keepRatio = moveable.props.keepRatio;\n\n    let widthOffset = 0;\n    let heightOffset = 0;\n\n    for (let i = 0; i < 2; ++i) {\n        const nextPoses = getNextPoses(widthOffset, heightOffset);\n        const {\n            width: widthOffsetInfo,\n            height: heightOffsetInfo,\n        } = getSizeOffsetInfo(\n            moveable,\n            nextPoses,\n            direction,\n            keepRatio,\n            isRequest,\n            datas\n        );\n\n        const isWidthBound = widthOffsetInfo.isBound;\n        const isHeightBound = heightOffsetInfo.isBound;\n        let nextWidthOffset = widthOffsetInfo.offset;\n        let nextHeightOffset = heightOffsetInfo.offset;\n\n\n        if (i === 1) {\n            if (!isWidthBound) {\n                nextWidthOffset = 0;\n            }\n            if (!isHeightBound) {\n                nextHeightOffset = 0;\n            }\n        }\n        if (i === 0 && isRequest && !isWidthBound && !isHeightBound) {\n            return [0, 0];\n        }\n        if (keepRatio) {\n            const widthDist =\n                Math.abs(nextWidthOffset) * (width ? 1 / width : 1);\n            const heightDist =\n                Math.abs(nextHeightOffset) * (height ? 1 / height : 1);\n            const isGetWidthOffset =\n                isWidthBound && isHeightBound\n                    ? widthDist < heightDist\n                    : isHeightBound ||\n                    (!isWidthBound && widthDist < heightDist);\n            if (isGetWidthOffset) {\n                // width : height = ? : heightOffset\n                nextWidthOffset = (width * nextHeightOffset) / height;\n            } else {\n                // width : height = widthOffset : ?\n                nextHeightOffset = (height * nextWidthOffset) / width;\n            }\n        }\n        widthOffset += nextWidthOffset;\n        heightOffset += nextHeightOffset;\n    }\n\n    if (direction[0] && direction[1]) {\n        const { maxWidth, maxHeight } = checkMaxBounds(\n            moveable,\n            poses,\n            direction,\n            fixedPosition,\n            datas\n        );\n\n        const [nextWidthOffset, nextHeightOffset] = recheckSizeByTwoDirection(\n            moveable,\n            getNextPoses(widthOffset, heightOffset).map(pos => pos.map(p => throttle(p, FLOAT_POINT_NUM))),\n            width + widthOffset,\n            height + heightOffset,\n            maxWidth,\n            maxHeight,\n            direction,\n            isRequest,\n            datas\n        );\n\n        widthOffset += nextWidthOffset;\n        heightOffset += nextHeightOffset;\n    }\n\n    return [widthOffset, heightOffset];\n}\n\nexport function checkSnapRotate(\n    moveable: MoveableManagerInterface<SnappableProps & RotatableProps, any>,\n    rect: RectInfo,\n    rotation: number\n) {\n    if (!hasGuidelines(moveable, \"rotatable\")) {\n        return {\n            isSnap: false,\n            rotation,\n        };\n    }\n\n    const { pos1, pos2, pos3, pos4, origin: origin2 } = rect;\n    const rad = (rotation * Math.PI) / 180;\n    const prevPoses = [pos1, pos2, pos3, pos4].map((pos) => minus(pos, origin2));\n    const nextPoses = prevPoses.map((pos) => rotate(pos, rad));\n\n    // console.log(moveable.state.left, moveable.state.top, moveable.state.origin);\n    // console.log(pos1, pos2, pos3, pos4, origin, rad, prevPoses, nextPoses);\n    const result = [\n        ...checkRotateBounds(moveable, prevPoses, nextPoses, origin2, rotation),\n        ...checkRotateInnerBounds(\n            moveable,\n            prevPoses,\n            nextPoses,\n            origin2,\n            rotation\n        ),\n    ];\n    result.sort((a, b) => Math.abs(a - rotation) - Math.abs(b - rotation));\n    const isSnap = result.length > 0;\n\n    return {\n        isSnap,\n        rotation: isSnap ? result[0] : rotation,\n    };\n}\nexport function checkSnapResize(\n    moveable: MoveableManagerInterface<{}, {}>,\n    width: number,\n    height: number,\n    direction: number[],\n    fixedPosition: number[],\n    isRequest: boolean,\n    datas: any\n) {\n    if (!hasGuidelines(moveable, \"resizable\")) {\n        return [0, 0];\n    }\n    const { fixedDirection, nextAllMatrix } = datas;\n    const { allMatrix, is3d } = moveable.state;\n\n    return checkSizeDist(\n        moveable,\n        (widthOffset: number, heightOffset: number) => {\n            return getNextFixedPoses(\n                nextAllMatrix || allMatrix,\n                width + widthOffset,\n                height + heightOffset,\n                fixedDirection,\n                fixedPosition,\n                is3d\n            );\n        },\n        width,\n        height,\n        direction,\n        fixedPosition,\n        isRequest,\n        datas\n    );\n}\nexport function checkSnapScale(\n    moveable: MoveableManagerInterface<ScalableProps, any>,\n    scale: number[],\n    direction: number[],\n    isRequest: boolean,\n    datas: any\n) {\n    if (!hasGuidelines(moveable, \"scalable\")) {\n        return [0, 0];\n    }\n    const { startOffsetWidth, startOffsetHeight, fixedPosition, fixedDirection, is3d } = datas;\n    const sizeDist = checkSizeDist(\n        moveable,\n        (widthOffset: number, heightOffset: number) => {\n            return getNextFixedPoses(\n                scaleMatrix(\n                    datas,\n                    plus(scale, [widthOffset / startOffsetWidth, heightOffset / startOffsetHeight]),\n                ),\n                startOffsetWidth,\n                startOffsetHeight,\n                fixedDirection,\n                fixedPosition,\n                is3d\n            );\n        },\n        startOffsetWidth,\n        startOffsetHeight,\n        direction,\n        fixedPosition,\n        isRequest,\n        datas\n    );\n    return [sizeDist[0] / startOffsetWidth, sizeDist[1] / startOffsetHeight];\n}\n\nexport function startCheckSnapDrag(\n    moveable: MoveableManagerInterface<any, any>,\n    datas: any\n) {\n    datas.absolutePoses = getAbsolutePosesByState(moveable.state);\n}\n\n\n\nfunction getSnapGuidelines(posInfos: SnapPosInfo[]) {\n    const guidelines: SnapGuideline[] = [];\n\n    posInfos.forEach((posInfo) => {\n        posInfo.guidelineInfos.forEach(({ guideline }) => {\n            if (guidelines.indexOf(guideline) > -1) {\n                return;\n            }\n            guidelines.push(guideline);\n        });\n    });\n\n    return guidelines;\n}\n\nfunction addBoundGuidelines(\n    moveable: MoveableManagerInterface<SnappableProps, SnappableState>,\n    verticalPoses: number[],\n    horizontalPoses: number[],\n    verticalSnapPoses: SnappableRenderType[],\n    horizontalSnapPoses: SnappableRenderType[],\n    externalBounds?: BoundType | false | null\n) {\n    const {\n        vertical: verticalBoundInfos,\n        horizontal: horizontalBoundInfos,\n    } = checkBoundPoses(\n        getBounds(moveable, externalBounds),\n        verticalPoses,\n        horizontalPoses\n    );\n    verticalBoundInfos.forEach((info) => {\n        if (info.isBound) {\n            verticalSnapPoses.push({\n                type: \"bounds\",\n                pos: info.pos,\n            });\n        }\n    });\n    horizontalBoundInfos.forEach((info) => {\n        if (info.isBound) {\n            horizontalSnapPoses.push({\n                type: \"bounds\",\n                pos: info.pos,\n            });\n        }\n    });\n    const {\n        vertical: verticalInnerBoundPoses,\n        horizontal: horizontalInnerBoundPoses,\n    } = checkInnerBoundPoses(moveable);\n\n    verticalInnerBoundPoses.forEach((innerPos) => {\n        if (\n            findIndex(\n                verticalSnapPoses,\n                ({ type, pos }) => type === \"bounds\" && pos === innerPos\n            ) >= 0\n        ) {\n            return;\n        }\n        verticalSnapPoses.push({\n            type: \"bounds\",\n            pos: innerPos,\n        });\n    });\n\n    horizontalInnerBoundPoses.forEach((innerPos) => {\n        if (\n            findIndex(\n                horizontalSnapPoses,\n                ({ type, pos }) => type === \"bounds\" && pos === innerPos\n            ) >= 0\n        ) {\n            return;\n        }\n        horizontalSnapPoses.push({\n            type: \"bounds\",\n            pos: innerPos,\n        });\n    });\n}\n\nconst directionCondition = getDirectionCondition(\"\", [\"resizable\", \"scalable\"]);\n\n/**\n * @namespace Moveable.Snappable\n * @description Whether or not target can be snapped to the guideline. (default: false)\n * @sort 2\n */\nexport default {\n    name: \"snappable\",\n    dragRelation: \"strong\",\n    props: {\n        snappable: [Boolean, Array],\n        snapContainer: Object,\n\n        snapDirections: [Boolean, Object],\n        elementSnapDirections: [Boolean, Object],\n\n        snapGap: Boolean,\n        snapGridWidth: Number,\n        snapGridHeight: Number,\n        isDisplaySnapDigit: Boolean,\n        isDisplayInnerSnapDigit: Boolean,\n        snapDigit: Number,\n        snapThreshold: Number,\n        snapRenderThreshold: Number,\n\n        horizontalGuidelines: Array,\n        verticalGuidelines: Array,\n        elementGuidelines: Array,\n\n        bounds: Object,\n        innerBounds: Object,\n        snapDistFormat: Function,\n\n\n        maxSnapElementGuidelineDistance: Number,\n        maxSnapElementGapDistance: Number,\n    } as const,\n    events: {\n        onSnap: \"snap\",\n    } as const,\n    css: [\n        `:host {\n    --bounds-color: #d66;\n}\n.guideline {\n    pointer-events: none;\n    z-index: 2;\n}\n.guideline.bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}\n.guideline-group {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.guideline-group .size-value {\n    position: absolute;\n    color: #f55;\n    font-size: 12px;\n    font-weight: bold;\n}\n.guideline-group.horizontal .size-value {\n    transform-origin: 50% 100%;\n    transform: translateX(-50%);\n    left: 50%;\n    bottom: 5px;\n}\n.guideline-group.vertical .size-value {\n    transform-origin: 0% 50%;\n    top: 50%;\n    transform: translateY(-50%);\n    left: 5px;\n}\n.guideline.gap {\n    background: #f55;\n}\n.size-value.gap {\n    color: #f55;\n}\n`,\n    ],\n    render(\n        moveable: MoveableManagerInterface<SnappableProps, SnappableState>,\n        React: Renderer\n    ): any[] {\n        const state = moveable.state;\n        const {\n            top: targetTop,\n            left: targetLeft,\n            pos1,\n            pos2,\n            pos3,\n            pos4,\n            snapRenderInfo,\n        } = state;\n        const {\n            snapRenderThreshold = 1,\n        } = moveable.props;\n\n        if (!snapRenderInfo || !snapRenderInfo.render || !hasGuidelines(moveable, \"\")) {\n            return [];\n        }\n        state.guidelines = getTotalGuidelines(moveable);\n\n\n        const minLeft = Math.min(pos1[0], pos2[0], pos3[0], pos4[0]);\n        const minTop = Math.min(pos1[1], pos2[1], pos3[1], pos4[1]);\n        const externalPoses = snapRenderInfo.externalPoses || [];\n        const poses = getAbsolutePosesByState(moveable.state);\n        const verticalSnapPoses: SnappableRenderType[] = [];\n        const horizontalSnapPoses: SnappableRenderType[] = [];\n        const verticalGuidelines: SnapGuideline[] = [];\n        const horizontalGuidelines: SnapGuideline[] = [];\n        const snapInfos: Array<{\n            vertical: SnapInfo;\n            horizontal: SnapInfo;\n        }> = [];\n        const { width, height, top, left, bottom, right } = getRect(poses);\n        const targetRect = { left, right, top, bottom, center: (left + right) / 2, middle: (top + bottom) / 2 };\n        const hasExternalPoses = externalPoses.length > 0;\n        const externalRect = hasExternalPoses\n            ? getRect(externalPoses)\n            : ({} as ReturnType<typeof getRect>);\n\n        if (!snapRenderInfo.request) {\n            if (snapRenderInfo.direction) {\n                snapInfos.push(\n                    getSnapInfosByDirection(\n                        moveable,\n                        poses,\n                        snapRenderInfo.direction,\n                        snapRenderThreshold,\n                    )\n                );\n            }\n            if (snapRenderInfo.snap) {\n                const rect = getRect(poses);\n                if (snapRenderInfo.center) {\n                    (rect as any).middle = (rect.top + rect.bottom) / 2;\n                    (rect as any).center = (rect.left + rect.right) / 2;\n                }\n                snapInfos.push(checkSnaps(moveable, rect, snapRenderThreshold));\n            }\n            if (hasExternalPoses) {\n                if (snapRenderInfo.center) {\n                    (externalRect as any).middle =\n                        (externalRect.top + externalRect.bottom) / 2;\n                    (externalRect as any).center =\n                        (externalRect.left + externalRect.right) / 2;\n                }\n                snapInfos.push(checkSnaps(moveable, externalRect, snapRenderThreshold));\n            }\n            snapInfos.forEach((snapInfo) => {\n                const {\n                    vertical: { posInfos: verticalPosInfos },\n                    horizontal: { posInfos: horizontalPosInfos },\n                } = snapInfo;\n                verticalSnapPoses.push(\n                    ...verticalPosInfos.filter(({ guidelineInfos }) => {\n                        return guidelineInfos.some(({ guideline }) => !guideline.hide);\n                    }).map(\n                        (posInfo) => ({\n                            type: \"snap\",\n                            pos: posInfo.pos,\n                        } as const)\n                    )\n                );\n                horizontalSnapPoses.push(\n                    ...horizontalPosInfos.filter(({ guidelineInfos }) => {\n                        return guidelineInfos.some(({ guideline }) => !guideline.hide);\n                    }).map(\n                        (posInfo) => ({\n                            type: \"snap\",\n                            pos: posInfo.pos,\n                        } as const)\n                    )\n                );\n                verticalGuidelines.push(...getSnapGuidelines(verticalPosInfos));\n                horizontalGuidelines.push(...getSnapGuidelines(horizontalPosInfos));\n            });\n        }\n\n        addBoundGuidelines(\n            moveable,\n            [left, right],\n            [top, bottom],\n            verticalSnapPoses,\n            horizontalSnapPoses\n        );\n        if (hasExternalPoses) {\n            addBoundGuidelines(\n                moveable,\n                [externalRect.left, externalRect.right],\n                [externalRect.top, externalRect.bottom],\n                verticalSnapPoses,\n                horizontalSnapPoses,\n                snapRenderInfo.externalBounds\n            );\n        }\n        const allGuidelines = [...verticalGuidelines, ...horizontalGuidelines];\n        const elementGuidelines = allGuidelines.filter(guideline => guideline.element && !guideline.gapRects);\n        const gapGuidelines = allGuidelines.filter(guideline => guideline.gapRects).sort((a, b) => {\n            return a.gap! - b.gap!;\n        });\n\n        triggerEvent(\n            moveable,\n            \"onSnap\",\n            {\n                guidelines: allGuidelines.filter(({ element }) => !element),\n                elements: elementGuidelines,\n                gaps: gapGuidelines,\n            },\n            true\n        );\n        return [\n            ...renderDashedGuidelines(\n                moveable,\n                elementGuidelines,\n                [minLeft, minTop],\n                targetRect,\n                React,\n            ),\n            ...renderGapGuidelines(\n                moveable,\n                gapGuidelines,\n                [minLeft, minTop],\n                targetRect,\n                React,\n            ),\n            ...renderGuidelines(\n                moveable,\n                \"horizontal\",\n                horizontalGuidelines,\n                [targetLeft, targetTop],\n                targetRect,\n                React\n            ),\n            ...renderGuidelines(\n                moveable,\n                \"vertical\",\n                verticalGuidelines,\n                [targetLeft, targetTop],\n                targetRect,\n                React\n            ),\n            ...renderSnapPoses(\n                moveable,\n                \"horizontal\",\n                horizontalSnapPoses,\n                minLeft,\n                targetTop,\n                width,\n                0,\n                React\n            ),\n            ...renderSnapPoses(\n                moveable,\n                \"vertical\",\n                verticalSnapPoses,\n                minTop,\n                targetLeft,\n                height,\n                1,\n                React\n            ),\n        ];\n    },\n    dragStart(\n        moveable: MoveableManagerInterface<SnappableProps, SnappableState>,\n        e: any\n    ) {\n        moveable.state.snapRenderInfo = {\n            request: e.isRequest,\n            snap: true,\n            center: true,\n        };\n        checkSnapInfo(moveable);\n    },\n    drag(\n        moveable: MoveableManagerInterface<SnappableProps, SnappableState>\n    ) {\n        const state = moveable.state;\n        if (!checkSnapInfo(moveable)) {\n            state.guidelines = getTotalGuidelines(moveable);\n        }\n        if (state.snapRenderInfo) {\n            state.snapRenderInfo.render = true;\n        }\n    },\n    pinchStart(\n        moveable: MoveableManagerInterface<SnappableProps, SnappableState>\n    ) {\n        this.unset(moveable);\n    },\n    dragEnd(\n        moveable: MoveableManagerInterface<SnappableProps, SnappableState>\n    ) {\n        this.unset(moveable);\n    },\n    dragControlCondition(moveable: MoveableManagerInterface, e: any) {\n        if (directionCondition(moveable, e) || rotatableDragControlCondtion(moveable, e)) {\n            return true;\n        }\n        if (!e.isRequest && e.inputEvent) {\n            return hasClass(e.inputEvent.target, prefix(\"snap-control\"));\n        }\n    },\n    dragControlStart(\n        moveable: MoveableManagerInterface<SnappableProps, SnappableState>\n    ) {\n        moveable.state.snapRenderInfo = null;\n        checkSnapInfo(moveable);\n    },\n    dragControl(\n        moveable: MoveableManagerInterface<SnappableProps, SnappableState>\n    ) {\n        this.drag(moveable);\n    },\n    dragControlEnd(\n        moveable: MoveableManagerInterface<SnappableProps, SnappableState>\n    ) {\n        this.unset(moveable);\n    },\n    dragGroupStart(moveable: any, e: any) {\n        this.dragStart(moveable, e);\n    },\n    dragGroup(\n        moveable: MoveableGroupInterface<SnappableProps, SnappableState>\n    ) {\n        this.drag(moveable);\n    },\n    dragGroupEnd(\n        moveable: MoveableGroupInterface<SnappableProps, SnappableState>\n    ) {\n        this.unset(moveable);\n    },\n    dragGroupControlStart(\n        moveable: MoveableGroupInterface<SnappableProps, SnappableState>\n    ) {\n        moveable.state.snapRenderInfo = null;\n        checkSnapInfo(moveable);\n    },\n    dragGroupControl(\n        moveable: MoveableManagerInterface<SnappableProps, SnappableState>\n    ) {\n        this.drag(moveable);\n    },\n    dragGroupControlEnd(\n        moveable: MoveableGroupInterface<SnappableProps, SnappableState>\n    ) {\n        this.unset(moveable);\n    },\n    unset(moveable: any) {\n        const state = moveable.state;\n\n        state.enableSnap = false;\n        state.guidelines = [];\n        state.snapRenderInfo = null;\n        state.elementRects = [];\n    },\n};\n\n\n/**\n * Whether or not target can be snapped to the guideline. (default: false)\n * @name Moveable.Snappable#snappable\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body);\n *\n * moveable.snappable = true;\n */\n/**\n *  A snap container that is the basis for snap, bounds, and innerBounds. (default: null = container)\n * @name Moveable.Snappable#snapContainer\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.querySelector(\".container\"));\n *\n * moveable.snapContainer = document.body;\n */\n/**\n * You can specify the directions to snap to the target. (default: { left: true, top: true, right: true, bottom: true })\n * @name Moveable.Snappable#snapDirections\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *   snappable: true,\n *   snapDirections: true,\n * });\n * // snap center\n * moveable.snapDirections = { left: true, top: true, right: true, bottom: true, center: true, middle: true };\n */\n\n/**\n * You can specify the snap directions of elements. (default: { left: true, top: true, right: true, bottom: true })\n * @name Moveable.Snappable#elementSnapDirections\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *   snappable: true,\n *   elementSnapDirections: true,\n * });\n * // snap center\n * moveable.elementSnapDirections = { left: true, top: true, right: true, bottom: true, center: true, middle: true };\n */\n/**\n * When you drag, make the gap snap in the element guidelines. (default: true)\n * @name Moveable.Snappable#snapGap\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *   snappable: true,\n *   snapElement: true,\n *   snapGap: true,\n * });\n *\n * moveable.snapGap = false;\n */\n/**\n * Distance value that can snap to guidelines. (default: 5)\n * @name Moveable.Snappable#snapThreshold\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body);\n *\n * moveable.snapThreshold = 5;\n */\n\n/**\n * Add guidelines in the horizontal direction. (default: [])\n * @name Moveable.Snappable#horizontalGuidelines\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body);\n *\n * moveable.horizontalGuidelines = [100, 200, 500];\n */\n\n/**\n * Add guidelines in the vertical direction. (default: [])\n * @name Moveable.Snappable#verticalGuidelines\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body);\n *\n * moveable.verticalGuidelines = [100, 200, 500];\n */\n/**\n * Add guidelines for the element. (default: [])\n * @name Moveable.Snappable#elementGuidelines\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body);\n *\n * moveable.elementGuidelines = [\n *   document.querySelector(\".element\"),\n * ];\n */\n/**\n * You can set up boundaries.\n * @name Moveable.Snappable#bounds\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\n * @default null\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body);\n *\n * moveable.bounds = { left: 0, right: 1000, top: 0, bottom: 1000};\n */\n/**\n * You can set up inner boundaries.\n * @name Moveable.Snappable#innerBounds\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\n * @default null\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body);\n *\n * moveable.innerBounds = { left: 500, top: 500, width: 100, height: 100};\n */\n/**\n * snap distance digits (default: 0)\n * @name Moveable.Snappable#snapDigit\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body);\n *\n * moveable.snapDigit = 0\n */\n\n/**\n * If width size is greater than 0, you can vertical snap to the grid. (default: 0)\n * @name Moveable.Snappable#snapGridWidth\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body);\n *\n * moveable.snapGridWidth = 5;\n */\n\n/**\n * If height size is greater than 0, you can horizontal snap to the grid. (default: 0)\n * @name Moveable.Snappable#snapGridHeight\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body);\n *\n * moveable.snapGridHeight = 5;\n */\n/**\n * Whether to show snap distance (default: true)\n * @name Moveable.Snappable#isDisplaySnapDigit\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body);\n *\n * moveable.isDisplaySnapDigit = true;\n */\n\n/**\n * Whether to show element inner snap distance (default: false)\n * @name Moveable.Snappable#isDisplayInnerSnapDigit\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body);\n *\n * moveable.isDisplayInnerSnapDigit = true;\n */\n\n\n/**\n * You can set the text format of the distance shown in the guidelines. (default: self)\n * @name Moveable.Snappable#snapDistFormat\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *  snappable: true,\n *  snapDistFormat: (v, type) => v,\n * });\n * moveable.snapDistFormat = (v, type) => `${v}px`;\n */\n\n/**\n * When you drag or dragControl, the `snap` event is called.\n * @memberof Moveable.Snappable\n * @event snap\n * @param {Moveable.Snappable.OnSnap} - Parameters for the `snap` event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     snappable: true\n * });\n * moveable.on(\"snap\", e => {\n *     console.log(\"onSnap\", e);\n * });\n */\n","import { prefix, getControlTransform, getLineStyle, getProps } from \"./utils\";\nimport {\n    Renderer, MoveableManagerInterface,\n    RenderDirections,\n} from \"./types\";\nimport { DIRECTION_INDEXES, DIRECTION_ROTATIONS, DIRECTIONS, DIRECTIONS4 } from \"./consts\";\nimport { IObject, throttle, getRad, getKeys } from \"@daybrush/utils\";\n\nexport interface DirectionControlInfo {\n    data: Record<string, any>;\n    classNames: string[];\n    dir: string;\n}\nexport function renderDirectionControlsByInfos(\n    moveable: MoveableManagerInterface<Partial<RenderDirections>>,\n    ableName: string,\n    renderDirections: DirectionControlInfo[],\n    React: Renderer,\n): any[] {\n\n    const {\n        renderPoses,\n        rotation: rotationRad,\n        direction,\n    } = moveable.getState();\n    const {\n        zoom,\n    } = getProps(moveable.props, ableName as any);\n\n\n    const sign = (direction > 0 ? 1 : -1);\n    const degRotation = rotationRad / Math.PI * 180;\n    const directionMap: IObject<boolean> = {};\n\n    const renderState = moveable.renderState;\n    if (!renderState.renderDirectionMap) {\n        renderState.renderDirectionMap = {};\n    }\n    const renderDirectionMap = renderState.renderDirectionMap;\n\n    renderDirections.forEach(({ dir }) => {\n        directionMap[dir] = true;\n    });\n\n    return renderDirections.map(({ data, classNames, dir }) => {\n        const indexes = DIRECTION_INDEXES[dir];\n\n        if (!indexes || !directionMap[dir]) {\n            return null;\n        }\n        renderDirectionMap[dir] = true;\n        const directionRotation = (throttle(degRotation, 15) + sign * DIRECTION_ROTATIONS[dir] + 720) % 180;\n\n        const dataAttrs: Record<string, string> = {};\n\n        getKeys(data).forEach(name => {\n            dataAttrs[`data-${name}`] = data[name];\n        });\n        return (\n            <div className={prefix(\"control\", \"direction\", dir, ableName, ...classNames)}\n                data-rotation={directionRotation}\n                data-direction={dir}\n                {...dataAttrs}\n                key={`direction-${dir}`}\n                style={getControlTransform(rotationRad, zoom!, ...indexes.map(index => renderPoses[index]))}></div>\n        );\n    });\n}\nexport function renderDirectionControls(\n    moveable: MoveableManagerInterface<Partial<RenderDirections>>,\n    defaultDirections: string[],\n    ableName: string,\n    React: Renderer,\n): any[] {\n    const {\n        renderDirections: directions = defaultDirections,\n    } = getProps(moveable.props, ableName as any);\n\n    if (!directions) {\n        return [];\n    }\n    const renderDirections = directions === true ? DIRECTIONS : directions;\n\n    return renderDirectionControlsByInfos(\n        moveable,\n        ableName,\n        renderDirections.map(dir => {\n            return {\n                data: {},\n                classNames: [],\n                dir,\n            };\n        }),\n        React,\n    );\n}\nexport function renderAroundControls(\n    moveable: MoveableManagerInterface<Partial<RenderDirections>>,\n    React: Renderer,\n): any[] {\n    const renderState = moveable.renderState;\n    if (!renderState.renderDirectionMap) {\n        renderState.renderDirectionMap = {};\n    }\n    const {\n        renderPoses,\n        rotation: rotationRad,\n        direction,\n    } = moveable.getState();\n\n    const renderDirectionMap = renderState.renderDirectionMap;\n\n    const {\n        zoom,\n    } = moveable.props;\n    const sign = (direction > 0 ? 1 : -1);\n    const degRotation = rotationRad / Math.PI * 180;\n\n    return getKeys(renderDirectionMap).map(dir => {\n        const indexes = DIRECTION_INDEXES[dir];\n\n        if (!indexes) {\n            return null;\n        }\n        const directionRotation = (throttle(degRotation, 15) + sign * DIRECTION_ROTATIONS[dir] + 720) % 180;\n\n        return (\n            <div className={prefix(\"around-control\")} data-rotation={directionRotation} data-direction={dir} key={`direction-around-${dir}`}\n                style={getControlTransform(rotationRad, zoom!, ...indexes.map(index => renderPoses[index]))}></div>\n        );\n    });\n}\n\nexport function renderLine(\n    React: Renderer,\n    direction: string,\n    pos1: number[],\n    pos2: number[],\n    zoom: number,\n    key: number | string,\n    ...classNames: string[]\n): any {\n    const rad = getRad(pos1, pos2);\n    const rotation = direction ? (throttle(rad / Math.PI * 180, 15)) % 180 : -1;\n\n    return <div key={`line-${key}`}\n        className={prefix(\"line\", \"direction\", direction ? \"edge\" : \"\", direction, ...classNames)}\n        data-rotation={rotation}\n        data-line-key={key}\n        data-direction={direction} style={getLineStyle(pos1, pos2, zoom, rad)}></div>;\n}\n\nexport function renderEdgeLines(\n    React: Renderer,\n    ableName: string,\n    edge: true | string[],\n    poses: number[][],\n    zoom: number,\n): any[] {\n    const directions = edge === true ? DIRECTIONS4 : edge;\n\n    return directions.map((direction, i) => {\n        const [index1, index2] = DIRECTION_INDEXES[direction];\n\n        if (index2 == null) {\n            return;\n        }\n        return renderLine(React, direction, poses[index1], poses[index2], zoom, `${ableName}Edge${i}`, ableName);\n    }).filter(Boolean);\n}\nexport function getRenderDirections(ableName: string) {\n    return (\n        moveable: MoveableManagerInterface<Partial<RenderDirections>>,\n        React: Renderer,\n    ) => {\n        const edge = getProps(moveable.props, ableName as any).edge;\n\n        if (edge && (edge === true || edge.length)) {\n            return [\n                ...renderEdgeLines(\n                    React,\n                    ableName,\n                    edge,\n                    moveable.getState().renderPoses,\n                    moveable.props.zoom!,\n                ),\n                ...renderDiagonalDirections(moveable, ableName, React),\n            ];\n        }\n        return renderAllDirections(moveable, ableName, React);\n    };\n}\nexport function renderAllDirections(\n    moveable: MoveableManagerInterface<Partial<RenderDirections>>,\n    ableName: string,\n    React: Renderer,\n) {\n    return renderDirectionControls(moveable, DIRECTIONS, ableName, React);\n}\nexport function renderDiagonalDirections(\n    moveable: MoveableManagerInterface<Partial<RenderDirections>>,\n    ableName: string,\n    React: Renderer,\n): any[] {\n    return renderDirectionControls(moveable, [\"nw\", \"ne\", \"sw\", \"se\"], ableName, React);\n}\n","import {\n    setDragStart, getBeforeDragDist, getTransformDist,\n    convertTransformFormat, resolveTransformEvent, fillTransformStartEvent,\n    setDefaultTransformIndex, fillOriginalTransform,\n} from \"../gesto/GestoUtils\";\nimport {\n    triggerEvent, fillParams,\n    getDistSize, prefix,\n    fillEndParams,\n    fillCSSObject,\n} from \"../utils\";\nimport { minus, plus } from \"@scena/matrix\";\nimport {\n    DraggableProps, OnDrag, OnDragGroup,\n    OnDragGroupStart, OnDragStart, OnDragEnd, DraggableState,\n    Renderer, OnDragGroupEnd, MoveableManagerInterface, MoveableGroupInterface,\n} from \"../types\";\nimport { triggerChildGesto } from \"../groupUtils\";\nimport { startCheckSnapDrag } from \"./Snappable\";\nimport { IObject, getRad, throttle, throttleArray } from \"@daybrush/utils\";\nimport { checkSnapBoundsDrag } from \"./snappable/snapBounds\";\nimport { TINY_NUM } from \"../consts\";\n\n/**\n * @namespace Draggable\n * @memberof Moveable\n * @description Draggable refers to the ability to drag and move targets.\n */\nexport default {\n    name: \"draggable\",\n    props: {\n        draggable: Boolean,\n        throttleDrag: Number,\n        throttleDragRotate: Number,\n        startDragRotate: Number,\n        edgeDraggable: Boolean,\n    } as const,\n    events: {\n        onDragStart: \"dragStart\",\n        onDrag: \"drag\",\n        onDragEnd: \"dragEnd\",\n        onDragGroupStart: \"dragGroupStart\",\n        onDragGroup: \"dragGroup\",\n        onDragGroupEnd: \"dragGroupEnd\",\n    } as const,\n    requestStyle(): string[] {\n        return [\"left\", \"top\", \"right\", \"bottom\"];\n    },\n    render(\n        moveable: MoveableManagerInterface<DraggableProps, DraggableState>,\n        React: Renderer,\n    ): any[] {\n        const { throttleDragRotate, zoom } = moveable.props;\n        const { dragInfo, beforeOrigin } = moveable.getState();\n\n        if (!throttleDragRotate || !dragInfo) {\n            return [];\n        }\n        const dist = dragInfo.dist;\n\n        if (!dist[0] && !dist[1]) {\n            return [];\n        }\n\n        const width = getDistSize(dist);\n        const rad = getRad(dist, [0, 0]);\n\n        return [<div className={prefix(\n            \"line\",\n            \"horizontal\",\n            \"dragline\",\n            \"dashed\",\n        )} key={`dragRotateGuideline`} style={{\n            width: `${width}px`,\n            transform: `translate(${beforeOrigin[0]}px, ${beforeOrigin[1]}px) rotate(${rad}rad) scaleY(${zoom})`,\n        }} />];\n    },\n    dragStart(\n        moveable: MoveableManagerInterface<DraggableProps, any>,\n        e: any,\n    ) {\n        const { datas, parentEvent, parentGesto } = e;\n        const state = moveable.state;\n        const {\n            gestos,\n            style,\n        } = state;\n\n        if (gestos.draggable) {\n            return false;\n        }\n        gestos.draggable = parentGesto || moveable.targetGesto;\n\n        datas.datas = {};\n        datas.left = parseFloat(style.left || \"\") || 0;\n        datas.top = parseFloat(style.top || \"\") || 0;\n        datas.bottom = parseFloat(style.bottom || \"\") || 0;\n        datas.right = parseFloat(style.right || \"\") || 0;\n        datas.startValue = [0, 0];\n\n        setDragStart(moveable, e);\n        setDefaultTransformIndex(e, \"translate\");\n        startCheckSnapDrag(moveable, datas);\n\n        datas.prevDist = [0, 0];\n        datas.prevBeforeDist = [0, 0];\n        datas.isDrag = false;\n        datas.deltaOffset = [0, 0];\n\n        const params = fillParams<OnDragStart>(moveable, e, {\n            set: (translate: number[]) => {\n                datas.startValue = translate;\n            },\n            ...fillTransformStartEvent(e),\n        });\n        const result = parentEvent || triggerEvent(moveable, \"onDragStart\", params);\n\n        if (result !== false) {\n            datas.isDrag = true;\n            moveable.state.dragInfo = {\n                startRect: moveable.getRect(),\n                dist: [0, 0],\n            };\n        } else {\n            gestos.draggable = null;\n            datas.isPinch = false;\n        }\n        return datas.isDrag ? params : false;\n    },\n    drag(\n        moveable: MoveableManagerInterface<DraggableProps, any>,\n        e: any,\n    ): OnDrag | undefined {\n        if (!e) {\n            return;\n        }\n        resolveTransformEvent(e, \"translate\");\n\n        const { datas, parentEvent, parentFlag, isPinch, isRequest, deltaOffset } = e;\n        let { distX, distY } = e;\n        const { isDrag, prevDist, prevBeforeDist, startValue } = datas;\n\n        if (!isDrag) {\n            return;\n        }\n\n        if (deltaOffset) {\n            distX += deltaOffset[0];\n            distY += deltaOffset[1];\n        }\n        const props = moveable.props;\n\n        const parentMoveable = props.parentMoveable;\n        const throttleDrag = parentEvent ? 0 : (props.throttleDrag || 0);\n        const throttleDragRotate = parentEvent ? 0 : (props.throttleDragRotate || 0);\n\n        let dragRotateRad = 0;\n        let isVerticalSnap = false;\n        let isVerticalBound = false;\n        let isHorizontalSnap = false;\n        let isHorizontalBound = false;\n\n        if (!parentEvent && throttleDragRotate > 0 && (distX || distY)) {\n            const startDragRotate = props.startDragRotate || 0;\n            const deg\n                = throttle(startDragRotate + getRad([0, 0], [distX, distY]) * 180 / Math.PI, throttleDragRotate)\n                - startDragRotate;\n            const ry = distY * Math.abs(Math.cos((deg - 90) / 180 * Math.PI));\n            const rx = distX * Math.abs(Math.cos(deg / 180 * Math.PI));\n            const r = getDistSize([rx, ry]);\n            dragRotateRad = deg * Math.PI / 180;\n\n            distX = r * Math.cos(dragRotateRad);\n            distY = r * Math.sin(dragRotateRad);\n        }\n\n        if (!isPinch && !parentEvent && !parentFlag) {\n            const [verticalInfo, horizontalInfo] = checkSnapBoundsDrag(\n                moveable, distX, distY,\n                throttleDragRotate,\n                isRequest || deltaOffset, datas,\n            );\n            isVerticalSnap = verticalInfo.isSnap;\n            isVerticalBound = verticalInfo.isBound;\n            isHorizontalSnap = horizontalInfo.isSnap;\n            isHorizontalBound = horizontalInfo.isBound;\n\n            const verticalOffset = verticalInfo.offset;\n            const horizontalOffset = horizontalInfo.offset;\n\n            distX += verticalOffset;\n            distY += horizontalOffset;\n        }\n\n        const beforeTranslate = plus(getBeforeDragDist({ datas, distX, distY }), startValue);\n        const translate = plus(getTransformDist({ datas, distX, distY }), startValue);\n\n        throttleArray(translate, TINY_NUM);\n        throttleArray(beforeTranslate, TINY_NUM);\n\n        if (!throttleDragRotate) {\n            if (!isVerticalSnap && !isVerticalBound) {\n                translate[0] = throttle(translate[0], throttleDrag);\n                beforeTranslate[0] = throttle(beforeTranslate[0], throttleDrag);\n            }\n            if (!isHorizontalSnap && !isHorizontalBound) {\n                translate[1] = throttle(translate[1], throttleDrag);\n                beforeTranslate[1] = throttle(beforeTranslate[1], throttleDrag);\n            }\n        }\n\n\n        const beforeDist = minus(beforeTranslate, startValue);\n        const dist = minus(translate, startValue);\n        const delta = minus(dist, prevDist);\n        const beforeDelta = minus(beforeDist, prevBeforeDist);\n\n        datas.prevDist = dist;\n        datas.prevBeforeDist = beforeDist;\n\n\n        datas.passDelta = delta; //distX - (datas.passDistX || 0);\n        // datas.passDeltaY = distY - (datas.passDistY || 0);\n        datas.passDist = dist; //distX;\n        // datas.passDistY = distY;\n\n        const left = datas.left + beforeDist[0];\n        const top = datas.top + beforeDist[1];\n        const right = datas.right - beforeDist[0];\n        const bottom = datas.bottom - beforeDist[1];\n        const nextTransform = convertTransformFormat(datas,\n            `translate(${translate[0]}px, ${translate[1]}px)`, `translate(${dist[0]}px, ${dist[1]}px)`);\n\n        fillOriginalTransform(e, nextTransform);\n\n        moveable.state.dragInfo.dist = parentEvent ? [0, 0] : dist;\n        if (!parentEvent && !parentMoveable && delta.every(num => !num) && beforeDelta.some(num => !num)) {\n            return;\n        }\n\n        const {\n            width,\n            height,\n        } = moveable.state;\n        const params = fillParams<OnDrag>(moveable, e, {\n            transform: nextTransform,\n            dist,\n            delta,\n            translate,\n            beforeDist,\n            beforeDelta,\n            beforeTranslate,\n            left,\n            top,\n            right,\n            bottom,\n            width,\n            height,\n            isPinch,\n            ...fillCSSObject({\n                transform: nextTransform,\n            }, e),\n        });\n\n        !parentEvent && triggerEvent(moveable, \"onDrag\", params);\n        return params;\n    },\n    dragAfter(\n        moveable: MoveableManagerInterface<DraggableProps, DraggableState>,\n        e: any,\n    ) {\n        const datas = e.datas;\n        const {\n            deltaOffset,\n        } = datas;\n\n        if (deltaOffset[0] || deltaOffset[1]) {\n            datas.deltaOffset = [0, 0];\n            return this.drag(moveable, {...e, deltaOffset });\n        }\n        return false;\n    },\n    dragEnd(\n        moveable: MoveableManagerInterface<DraggableProps, DraggableState>,\n        e: any,\n    ) {\n        const { parentEvent, datas } = e;\n\n        moveable.state.dragInfo = null;\n        if (!datas.isDrag) {\n            return;\n        }\n        datas.isDrag = false;\n        const param = fillEndParams<OnDragEnd>(moveable, e, {});\n        !parentEvent && triggerEvent(moveable, \"onDragEnd\", param);\n        return param;\n    },\n    dragGroupStart(moveable: MoveableGroupInterface<any, any>, e: any) {\n        const { datas, clientX, clientY } = e;\n\n        const params = this.dragStart(moveable, e);\n\n        if (!params) {\n            return false;\n        }\n        const events = triggerChildGesto(moveable, this, \"dragStart\", [\n            clientX || 0,\n            clientY || 0,\n        ], e, false, \"draggable\");\n\n        const nextParams: OnDragGroupStart = {\n            ...params,\n            targets: moveable.props.targets!,\n            events,\n        };\n        const result = triggerEvent(moveable, \"onDragGroupStart\", nextParams);\n\n        datas.isDrag = result !== false;\n\n        return datas.isDrag ? params : false;\n    },\n    dragGroup(moveable: MoveableGroupInterface<any, any>, e: any) {\n        const { datas } = e;\n\n        if (!datas.isDrag) {\n            return;\n        }\n        const params = this.drag(moveable, e);\n        const { passDelta } = e.datas;\n        const events = triggerChildGesto(moveable, this, \"drag\", passDelta, e, false, \"draggable\");\n\n        if (!params) {\n            return;\n        }\n        const nextParams: OnDragGroup = {\n            targets: moveable.props.targets!,\n            events,\n            ...params,\n        };\n\n        triggerEvent(moveable, \"onDragGroup\", nextParams);\n        return nextParams;\n    },\n    dragGroupEnd(moveable: MoveableGroupInterface<any, any>, e: any) {\n        const { isDrag, datas } = e;\n\n        if (!datas.isDrag) {\n            return;\n        }\n        this.dragEnd(moveable, e);\n        const events = triggerChildGesto(moveable, this, \"dragEnd\", [0, 0], e, false, \"draggable\");\n        triggerEvent(moveable, \"onDragGroupEnd\", fillEndParams<OnDragGroupEnd>(moveable, e, {\n            targets: moveable.props.targets!,\n            events,\n        }));\n\n        return isDrag;\n    },\n    /**\n     * @method Moveable.Draggable#request\n     * @param {object} [e] - the draggable's request parameter\n     * @param {number} [e.x] - x position\n     * @param {number} [e.y] - y position\n     * @param {number} [e.deltaX] - X number to move\n     * @param {number} [e.deltaY] - Y number to move\n     * @return {Moveable.Requester} Moveable Requester\n     * @example\n\n     * // Instantly Request (requestStart - request - requestEnd)\n     * // Use Relative Value\n     * moveable.request(\"draggable\", { deltaX: 10, deltaY: 10 }, true);\n     * // Use Absolute Value\n     * moveable.request(\"draggable\", { x: 200, y: 100 }, true);\n     *\n     * // requestStart\n     * const requester = moveable.request(\"draggable\");\n     *\n     * // request\n     * // Use Relative Value\n     * requester.request({ deltaX: 10, deltaY: 10 });\n     * requester.request({ deltaX: 10, deltaY: 10 });\n     * requester.request({ deltaX: 10, deltaY: 10 });\n     * // Use Absolute Value\n     * moveable.request(\"draggable\", { x: 200, y: 100 });\n     * moveable.request(\"draggable\", { x: 220, y: 100 });\n     * moveable.request(\"draggable\", { x: 240, y: 100 });\n     *\n     * // requestEnd\n     * requester.requestEnd();\n     */\n    request(moveable: MoveableManagerInterface<any, any>) {\n        const datas = {};\n        const rect = moveable.getRect();\n        let distX = 0;\n        let distY = 0;\n\n        return {\n            isControl: false,\n            requestStart() {\n                return { datas };\n            },\n            request(e: IObject<any>) {\n                if (\"x\" in e) {\n                    distX = e.x - rect.left;\n                } else if (\"deltaX\" in e) {\n                    distX += e.deltaX;\n                }\n                if (\"y\" in e) {\n                    distY = e.y - rect.top;\n                } else if (\"deltaY\" in e) {\n                    distY += e.deltaY;\n                }\n\n                return { datas, distX, distY };\n            },\n            requestEnd() {\n                return { datas, isDrag: true };\n            },\n        };\n    },\n    unset(moveable: MoveableManagerInterface<any, Record<string, any>>) {\n        moveable.state.gestos.draggable = null;\n        moveable.state.dragInfo = null;\n    },\n};\n\n/**\n * Whether or not target can be dragged. (default: false)\n * @name Moveable.Draggable#draggable\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body);\n *\n * moveable.draggable = true;\n */\n\n/**\n * throttle of x, y when drag.\n * @name Moveable.Draggable#throttleDrag\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body);\n *\n * moveable.throttleDrag = 1;\n */\n\n/**\n* throttle of angle of x, y when drag.\n* @name Moveable.Draggable#throttleDragRotate\n* @example\n* import Moveable from \"moveable\";\n*\n* const moveable = new Moveable(document.body);\n*\n* moveable.throttleDragRotate = 45;\n*/\n\n/**\n* start angle of throttleDragRotate of x, y when drag.\n* @name Moveable.Draggable#startDragRotate\n* @example\n* import Moveable from \"moveable\";\n*\n* const moveable = new Moveable(document.body);\n*\n* // 45, 135, 225, 315\n* moveable.throttleDragRotate = 90;\n* moveable.startDragRotate = 45;\n*/\n\n/**\n * When the drag starts, the dragStart event is called.\n * @memberof Moveable.Draggable\n * @event dragStart\n * @param {Moveable.Draggable.OnDragStart} - Parameters for the dragStart event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, { draggable: true });\n * moveable.on(\"dragStart\", ({ target }) => {\n *     console.log(target);\n * });\n */\n/**\n * When dragging, the drag event is called.\n * @memberof Moveable.Draggable\n * @event drag\n * @param {Moveable.Draggable.OnDrag} - Parameters for the drag event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, { draggable: true });\n * moveable.on(\"drag\", ({ target, transform }) => {\n *     target.style.transform = transform;\n * });\n */\n/**\n * When the drag finishes, the dragEnd event is called.\n * @memberof Moveable.Draggable\n * @event dragEnd\n * @param {Moveable.Draggable.OnDragEnd} - Parameters for the dragEnd event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, { draggable: true });\n * moveable.on(\"dragEnd\", ({ target, isDrag }) => {\n *     console.log(target, isDrag);\n * });\n */\n\n/**\n* When the group drag starts, the `dragGroupStart` event is called.\n* @memberof Moveable.Draggable\n* @event dragGroupStart\n* @param {Moveable.Draggable.OnDragGroupStart} - Parameters for the `dragGroupStart` event\n* @example\n* import Moveable from \"moveable\";\n*\n* const moveable = new Moveable(document.body, {\n*     target: [].slice.call(document.querySelectorAll(\".target\")),\n*     draggable: true\n* });\n* moveable.on(\"dragGroupStart\", ({ targets }) => {\n*     console.log(\"onDragGroupStart\", targets);\n* });\n*/\n\n/**\n* When the group drag, the `dragGroup` event is called.\n* @memberof Moveable.Draggable\n* @event dragGroup\n* @param {Moveable.Draggable.OnDragGroup} - Parameters for the `dragGroup` event\n* @example\n* import Moveable from \"moveable\";\n*\n* const moveable = new Moveable(document.body, {\n*     target: [].slice.call(document.querySelectorAll(\".target\")),\n*     draggable: true\n* });\n* moveable.on(\"dragGroup\", ({ targets, events }) => {\n*     console.log(\"onDragGroup\", targets);\n*     events.forEach(ev => {\n*          // drag event\n*          console.log(\"onDrag left, top\", ev.left, ev.top);\n*          // ev.target!.style.left = `${ev.left}px`;\n*          // ev.target!.style.top = `${ev.top}px`;\n*          console.log(\"onDrag translate\", ev.dist);\n*          ev.target!.style.transform = ev.transform;)\n*     });\n* });\n*/\n\n/**\n * When the group drag finishes, the `dragGroupEnd` event is called.\n * @memberof Moveable.Draggable\n * @event dragGroupEnd\n * @param {Moveable.Draggable.OnDragGroupEnd} - Parameters for the `dragGroupEnd` event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\n *     draggable: true\n * });\n * moveable.on(\"dragGroupEnd\", ({ targets, isDrag }) => {\n *     console.log(\"onDragGroupEnd\", targets, isDrag);\n * });\n */\n","import {\n    triggerEvent,\n    fillParams,\n    fillEndParams,\n    getAbsolutePosesByState,\n    catchEvent,\n    getOffsetSizeDist,\n    getProps,\n    getDirectionCondition,\n    calculatePoses,\n    fillAfterTransform,\n    getDirectionViewClassName,\n    getTotalDirection,\n} from \"../utils\";\nimport {\n    setDragStart,\n    getResizeDist,\n    getAbsolutePosition,\n    getPosByDirection,\n    getNextMatrix,\n    getNextTransforms,\n    getDirectionByPos,\n} from \"../gesto/GestoUtils\";\nimport {\n    ResizableProps, OnResizeGroup, OnResizeGroupEnd,\n    OnResizeGroupStart, DraggableProps, OnDrag, OnResizeStart, SnappableState,\n    OnResize, OnResizeEnd, MoveableManagerInterface, MoveableGroupInterface, SnappableProps,\n    OnBeforeResize, OnBeforeResizeGroup, ResizableRequestParam,\n} from \"../types\";\nimport { getRenderDirections } from \"../renderDirections\";\nimport {\n    fillChildEvents,\n    triggerChildAbles,\n} from \"../groupUtils\";\nimport Draggable from \"./Draggable\";\nimport { calculate, convertDimension, createRotateMatrix, plus } from \"@scena/matrix\";\nimport CustomGesto, { setCustomDrag } from \"../gesto/CustomGesto\";\nimport { checkSnapResize } from \"./Snappable\";\nimport {\n    calculateBoundSize,\n    isString, convertUnitSize,\n    throttle,\n    isNumber,\n} from \"@daybrush/utils\";\nimport { TINY_NUM } from \"../consts\";\nimport { parseMat } from \"css-to-mat\";\n\n/**\n * @namespace Resizable\n * @memberof Moveable\n * @description Resizable indicates whether the target's width and height can be increased or decreased.\n */\n\nconst directionCondition = getDirectionCondition(\"resizable\");\n\nexport default {\n    name: \"resizable\",\n    ableGroup: \"size\",\n    canPinch: true,\n    props: {\n        resizable: Boolean,\n        throttleResize: Number,\n        renderDirections: Array,\n        keepRatio: Boolean,\n        resizeFormat: Function,\n        keepRatioFinally: Boolean,\n        edge: Boolean,\n        checkResizableError: Boolean,\n    } as const,\n    events: {\n        onResizeStart: \"resizeStart\",\n        onBeforeResize: \"beforeResize\",\n        onResize: \"resize\",\n        onResizeEnd: \"resizeEnd\",\n\n        onResizeGroupStart: \"resizeGroupStart\",\n        onBeforeResizeGroup: \"beforeResizeGroup\",\n        onResizeGroup: \"resizeGroup\",\n        onResizeGroupEnd: \"resizeGroupEnd\",\n    } as const,\n    render: getRenderDirections(\"resizable\"),\n    dragControlCondition: directionCondition,\n    viewClassName: getDirectionViewClassName(\"resizable\"),\n    dragControlStart(\n        moveable: MoveableManagerInterface<ResizableProps & DraggableProps, SnappableState>,\n        e: any,\n    ) {\n        const {\n            inputEvent,\n            isPinch,\n            isGroup,\n            parentDirection,\n            parentGesto,\n            datas,\n            parentFixedDirection,\n            parentEvent,\n        } = e;\n\n        const direction = getTotalDirection(\n            parentDirection,\n            isPinch,\n            inputEvent,\n            datas,\n        );\n\n        const state = moveable.state;\n        const { target, width, height, gestos } = state;\n\n        if (!direction || !target) {\n            return false;\n        }\n        if (gestos.resizable) {\n            return false;\n        }\n        gestos.resizable = parentGesto || moveable.controlGesto;\n        !isPinch && setDragStart(moveable, e);\n\n        datas.datas = {};\n        datas.direction = direction;\n        datas.startOffsetWidth = width;\n        datas.startOffsetHeight = height;\n        datas.prevWidth = 0;\n        datas.prevHeight = 0;\n\n        datas.minSize = [0, 0];\n\n\n        datas.startWidth = state.inlineCSSWidth || state.cssWidth;\n        datas.startHeight = state.inlineCSSHeight || state.cssHeight;\n        datas.maxSize = [Infinity, Infinity];\n\n        if (!isGroup) {\n            datas.minSize = [\n                state.minOffsetWidth,\n                state.minOffsetHeight,\n            ];\n            datas.maxSize = [\n                state.maxOffsetWidth,\n                state.maxOffsetHeight,\n            ];\n        }\n        const transformOrigin = moveable.props.transformOrigin || \"% %\";\n\n        datas.transformOrigin = transformOrigin && isString(transformOrigin)\n            ? transformOrigin.split(\" \")\n            : transformOrigin;\n\n        datas.startOffsetMatrix = state.offsetMatrix;\n        datas.startTransformOrigin = state.transformOrigin;\n\n        datas.isWidth = e?.parentIsWidth ?? ((!direction[0] && !direction[1]) || direction[0] || !direction[1]);\n\n        function setRatio(ratio: number) {\n            datas.ratio = ratio && isFinite(ratio) ? ratio : 0;\n        }\n\n\n        datas.startPositions = getAbsolutePosesByState(moveable.state);\n\n        function setFixedDirection(fixedDirection: number[]) {\n            datas.fixedDirection = fixedDirection;\n            datas.fixedPosition = getPosByDirection(datas.startPositions, fixedDirection);\n        }\n        function setFixedPosition(fixedPosition: number[]) {\n            const {\n                width,\n                height,\n            } = moveable.state;\n\n            datas.fixedPosition = fixedPosition;\n            datas.fixedDirection = getDirectionByPos(fixedPosition, width, height);\n        }\n        function setMin(minSize: Array<string | number>)  {\n            datas.minSize = [\n                convertUnitSize(`${minSize[0]}`, 0) || 0,\n                convertUnitSize(`${minSize[1]}`, 0) || 0,\n            ];\n        }\n        function setMax(maxSize: Array<string | number>) {\n            const nextMaxSize = [\n                maxSize[0] || Infinity,\n                maxSize[1] || Infinity,\n            ];\n            if (!isNumber(nextMaxSize[0]) || isFinite(nextMaxSize[0])) {\n                nextMaxSize[0] = convertUnitSize(`${nextMaxSize[0]}`, 0) || Infinity;\n            }\n            if (!isNumber(nextMaxSize[1]) || isFinite(nextMaxSize[1])) {\n                nextMaxSize[1] = convertUnitSize(`${nextMaxSize[1]}`, 0) || Infinity;\n            }\n            datas.maxSize = nextMaxSize;\n        }\n\n        setRatio(width / height);\n        setFixedDirection(parentFixedDirection || [-direction[0], -direction[1]]);\n\n        datas.setFixedDirection = setFixedDirection;\n        datas.setFixedPosition = setFixedPosition;\n        datas.setMin = setMin;\n        datas.setMax = setMax;\n        const params = fillParams<OnResizeStart>(moveable, e, {\n            direction,\n            startRatio: datas.ratio,\n            set: ([startWidth, startHeight]: number[]) => {\n                datas.startWidth = startWidth;\n                datas.startHeight = startHeight;\n            },\n            setMin,\n            setMax,\n            setRatio,\n            setFixedDirection,\n            setFixedPosition,\n            setOrigin: (origin: Array<string | number>) => {\n                datas.transformOrigin = origin;\n            },\n            dragStart: Draggable.dragStart(\n                moveable,\n                new CustomGesto().dragStart([0, 0], e),\n            ),\n        });\n        const result = parentEvent || triggerEvent(moveable, \"onResizeStart\", params);\n\n        datas.startFixedDirection = datas.fixedDirection;\n        datas.startFixedPosition = datas.fixedPosition;\n        if (result !== false) {\n            datas.isResize = true;\n            moveable.state.snapRenderInfo = {\n                request: e.isRequest,\n                direction,\n            };\n        }\n        return datas.isResize ? params : false;\n    },\n    dragControl(\n        moveable: MoveableManagerInterface<ResizableProps & DraggableProps & SnappableProps>,\n        e: any,\n    ) {\n        const {\n            datas,\n            parentFlag,\n            isPinch,\n            parentKeepRatio,\n            dragClient,\n            parentDist,\n            isRequest,\n            isGroup,\n            parentEvent,\n            resolveMatrix,\n        } = e;\n\n        const {\n            isResize,\n            transformOrigin,\n            startWidth,\n            startHeight,\n            prevWidth,\n            prevHeight,\n            minSize,\n            maxSize,\n            ratio,\n            startOffsetWidth,\n            startOffsetHeight,\n            isWidth,\n        } = datas;\n\n        if (!isResize) {\n            return;\n        }\n        if (resolveMatrix) {\n            const {\n                is3d,\n            } = moveable.state;\n            const {\n                startOffsetMatrix,\n                startTransformOrigin,\n            } = datas;\n            const n = is3d ? 4 : 3;\n            let targetMatrix = parseMat(getNextTransforms(e));\n            const targetN = Math.sqrt(targetMatrix.length);\n\n            if (n !== targetN) {\n                targetMatrix = convertDimension(targetMatrix, targetN, n);\n            }\n\n            const nextAllMatrix = getNextMatrix(\n                startOffsetMatrix,\n                targetMatrix,\n                startTransformOrigin,\n                n,\n            );\n            const poses = calculatePoses(nextAllMatrix, startOffsetWidth, startOffsetHeight, n);\n\n            datas.startPositions = poses;\n            datas.nextTargetMatrix = targetMatrix;\n            datas.nextAllMatrix = nextAllMatrix;\n        }\n        const props = getProps(moveable.props, \"resizable\");\n        const {\n            resizeFormat,\n            throttleResize = parentFlag ? 0 : 1,\n            parentMoveable,\n            keepRatioFinally,\n        } = props;\n        const direction = datas.direction;\n        let sizeDirection = direction;\n        let distWidth = 0;\n        let distHeight = 0;\n\n        if (!direction[0] && !direction[1]) {\n            sizeDirection = [1, 1];\n        }\n        const keepRatio = (ratio && (parentKeepRatio != null ? parentKeepRatio : props.keepRatio)) || false;\n\n        function getNextBoundingSize() {\n            const fixedDirection = datas.fixedDirection;\n            const nextSize = getOffsetSizeDist(sizeDirection, keepRatio, datas, e);\n\n            distWidth = nextSize.distWidth;\n            distHeight = nextSize.distHeight;\n\n            let nextWidth = (sizeDirection[0] - fixedDirection[0]) || keepRatio\n                ? Math.max(startOffsetWidth + distWidth, TINY_NUM) : startOffsetWidth;\n            let nextHeight = (sizeDirection[1] - fixedDirection[1]) || keepRatio\n                ? Math.max(startOffsetHeight + distHeight, TINY_NUM) : startOffsetHeight;\n\n            if (keepRatio && startOffsetWidth && startOffsetHeight) {\n                // startOffsetWidth : startOffsetHeight = nextWidth : nextHeight\n                if (isWidth) {\n                    nextHeight = nextWidth / ratio;\n                } else {\n                    nextWidth = nextHeight * ratio;\n                }\n            }\n            return [nextWidth, nextHeight];\n        }\n\n        let [boundingWidth, boundingHeight] = getNextBoundingSize();\n\n        if (!parentEvent) {\n            datas.setFixedDirection(datas.fixedDirection);\n\n            triggerEvent(moveable, \"onBeforeResize\", fillParams<OnBeforeResize>(moveable, e, {\n                startFixedDirection: datas.startFixedDirection,\n                startFixedPosition: datas.startFixedPosition,\n                setFixedDirection(nextFixedDirection: number[]) {\n                    datas.setFixedDirection(nextFixedDirection);\n\n                    [boundingWidth, boundingHeight] = getNextBoundingSize();\n\n                    return [boundingWidth, boundingHeight];\n                },\n                setFixedPosition(nextFixedPosition: number[]) {\n                    datas.setFixedPosition(nextFixedPosition);\n\n                    [boundingWidth, boundingHeight] = getNextBoundingSize();\n\n                    return [boundingWidth, boundingHeight];\n                },\n                boundingWidth,\n                boundingHeight,\n                setSize(size: number[]) {\n                    [boundingWidth, boundingHeight] = size;\n                },\n            }, true));\n        }\n\n        let fixedPosition = dragClient;\n\n        if (!dragClient) {\n            if (!parentFlag && isPinch) {\n                fixedPosition = getAbsolutePosition(moveable, [0, 0]);\n            } else {\n                fixedPosition = datas.fixedPosition;\n            }\n        }\n\n        let snapDist = [0, 0];\n\n        if (!isPinch) {\n            snapDist = checkSnapResize(\n                moveable,\n                boundingWidth,\n                boundingHeight,\n                direction,\n                fixedPosition,\n                isRequest,\n                datas,\n            );\n        }\n        if (parentDist) {\n            !parentDist[0] && (snapDist[0] = 0);\n            !parentDist[1] && (snapDist[1] = 0);\n        }\n\n        function computeSize() {\n            if (resizeFormat) {\n                [boundingWidth, boundingHeight] = resizeFormat([boundingWidth, boundingHeight]);\n            }\n            boundingWidth = throttle(boundingWidth, throttleResize!);\n            boundingHeight = throttle(boundingHeight, throttleResize!);\n        }\n        if (keepRatio) {\n            if (sizeDirection[0] && sizeDirection[1] && snapDist[0] && snapDist[1]) {\n                if (Math.abs(snapDist[0]) > Math.abs(snapDist[1])) {\n                    snapDist[1] = 0;\n                } else {\n                    snapDist[0] = 0;\n                }\n            }\n            const isNoSnap = !snapDist[0] && !snapDist[1];\n\n            if (isNoSnap) {\n                // pre-compute before maintaining the ratio\n                computeSize();\n            }\n            if (\n                (sizeDirection[0] && !sizeDirection[1])\n                || (snapDist[0] && !snapDist[1])\n                || (isNoSnap && isWidth)\n            ) {\n                boundingWidth += snapDist[0];\n                boundingHeight = boundingWidth / ratio;\n            } else if (\n                (!sizeDirection[0] && sizeDirection[1])\n                || (!snapDist[0] && snapDist[1])\n                || (isNoSnap && !isWidth)\n            ) {\n                boundingHeight += snapDist[1];\n                boundingWidth = boundingHeight * ratio;\n            }\n        } else {\n            boundingWidth += snapDist[0];\n            boundingHeight += snapDist[1];\n\n            boundingWidth = Math.max(0, boundingWidth);\n            boundingHeight = Math.max(0, boundingHeight);\n        }\n\n        [boundingWidth, boundingHeight] = calculateBoundSize(\n            [boundingWidth, boundingHeight],\n            minSize,\n            maxSize,\n            keepRatio ? ratio : false,\n        );\n        computeSize();\n\n        if (keepRatio && (isGroup || keepRatioFinally)) {\n            if (isWidth) {\n                boundingHeight = boundingWidth / ratio;\n            } else {\n                boundingWidth = boundingHeight * ratio;\n            }\n        }\n        distWidth = boundingWidth - startOffsetWidth;\n        distHeight = boundingHeight - startOffsetHeight;\n\n        const delta = [distWidth - prevWidth, distHeight - prevHeight];\n\n        datas.prevWidth = distWidth;\n        datas.prevHeight = distHeight;\n\n        const inverseDelta = getResizeDist(\n            moveable,\n            boundingWidth,\n            boundingHeight,\n            fixedPosition,\n            transformOrigin,\n            datas,\n        );\n\n        if (!parentMoveable && delta.every(num => !num) && inverseDelta.every(num => !num)) {\n            return;\n        }\n        const drag = Draggable.drag(\n            moveable,\n            setCustomDrag(e, moveable.state, inverseDelta, !!isPinch, false, \"draggable\"),\n        ) as OnDrag;\n        const transform = drag.transform;\n\n        const nextWidth = startWidth + distWidth;\n        const nextHeight = startHeight + distHeight;\n\n        const params = fillParams<OnResize>(moveable, e, {\n            width: nextWidth,\n            height: nextHeight,\n            offsetWidth: Math.round(boundingWidth),\n            offsetHeight: Math.round(boundingHeight),\n            startRatio: ratio,\n            boundingWidth,\n            boundingHeight,\n            direction,\n            dist: [distWidth, distHeight],\n            delta,\n            isPinch: !!isPinch,\n            drag,\n            ...fillAfterTransform({\n                style: {\n                    width: `${nextWidth}px`,\n                    height: `${nextHeight}px`,\n                },\n                transform,\n            }, drag, e),\n        });\n        !parentEvent && triggerEvent(moveable, \"onResize\", params);\n        return params;\n    },\n    dragControlAfter(\n        moveable: MoveableManagerInterface<ResizableProps & DraggableProps>,\n        e: any,\n    ) {\n        const datas = e.datas;\n        const {\n            isResize,\n            startOffsetWidth,\n            startOffsetHeight,\n            prevWidth,\n            prevHeight,\n        } = datas;\n\n        if (!isResize || moveable.props.checkResizableError === false) {\n            return;\n        }\n        const {\n            width,\n            height,\n        } = moveable.state;\n        const errorWidth = width - (startOffsetWidth + prevWidth);\n        const errorHeight = height - (startOffsetHeight + prevHeight);\n        const isErrorWidth = Math.abs(errorWidth) > 3;\n        const isErrorHeight = Math.abs(errorHeight) > 3;\n\n        if (isErrorWidth) {\n            datas.startWidth += errorWidth;\n            datas.startOffsetWidth += errorWidth;\n            datas.prevWidth += errorWidth;\n        }\n        if (isErrorHeight) {\n            datas.startHeight += errorHeight;\n            datas.startOffsetHeight += errorHeight;\n            datas.prevHeight += errorHeight;\n        }\n        if (isErrorWidth || isErrorHeight) {\n            return this.dragControl(moveable, e);\n        }\n    },\n    dragControlEnd(\n        moveable: MoveableManagerInterface<ResizableProps & DraggableProps>,\n        e: any,\n    ) {\n        const { datas, parentEvent } = e;\n        if (!datas.isResize) {\n            return;\n        }\n        datas.isResize = false;\n\n        const params = fillEndParams<OnResizeEnd>(moveable, e, {});\n        !parentEvent && triggerEvent(moveable, \"onResizeEnd\", params);\n        return params;\n    },\n    dragGroupControlCondition: directionCondition,\n    dragGroupControlStart(moveable: MoveableGroupInterface<any, any>, e: any) {\n        const { datas } = e;\n        const params = this.dragControlStart(moveable, {...e, isGroup: true });\n\n        if (!params) {\n            return false;\n        }\n        const originalEvents = fillChildEvents(moveable, \"resizable\", e);\n        function setDist(child: MoveableManagerInterface, ev: any) {\n            const fixedDirection = datas.fixedDirection;\n            const fixedPosition = datas.fixedPosition;\n\n            const startPositions = ev.datas.startPositions || getAbsolutePosesByState(child.state);\n            const pos = getPosByDirection(startPositions, fixedDirection);\n            const [originalX, originalY] = calculate(\n                createRotateMatrix(-moveable.rotation / 180 * Math.PI, 3),\n                [pos[0] - fixedPosition[0], pos[1] - fixedPosition[1], 1],\n                3,\n            );\n            ev.datas.originalX = originalX;\n            ev.datas.originalY = originalY;\n\n            return ev;\n        }\n        const {\n            startOffsetWidth: parentStartOffsetWidth,\n            startOffsetHeight: parentStartOffsetHeight,\n        } = datas;\n\n        function updateGroupMin() {\n            const originalMinSize = datas.minSize;\n            originalEvents.forEach(ev => {\n                const {\n                    minSize: childMinSize,\n                    startOffsetWidth: childStartOffsetWidth,\n                    startOffsetHeight: childStartOffsetHeight,\n                } = ev.datas;\n\n                const parentMinWidth = parentStartOffsetWidth\n                    * (childStartOffsetWidth ? childMinSize[0] / childStartOffsetWidth : 0);\n                const parentMinHeight = parentStartOffsetHeight\n                    * (childStartOffsetHeight ? childMinSize[1] / childStartOffsetHeight : 0);\n\n                originalMinSize[0] = Math.max(originalMinSize[0], parentMinWidth);\n                originalMinSize[1] = Math.max(originalMinSize[1], parentMinHeight);\n            });\n        }\n\n        function updateGroupMax() {\n            const originalMaxSize = datas.maxSize;\n            originalEvents.forEach(ev => {\n                const {\n                    maxSize: childMaxSize,\n                    startOffsetWidth: childStartOffsetWidth,\n                    startOffsetHeight: childStartOffsetHeight,\n                } = ev.datas;\n\n                const parentMaxWidth = parentStartOffsetWidth\n                    * (childStartOffsetWidth ? childMaxSize[0] / childStartOffsetWidth : 0);\n                const parentMaxHeight = parentStartOffsetHeight\n                    * (childStartOffsetHeight ? childMaxSize[1] / childStartOffsetHeight : 0);\n\n                originalMaxSize[0] = Math.min(originalMaxSize[0], parentMaxWidth);\n                originalMaxSize[1] = Math.min(originalMaxSize[1], parentMaxHeight);\n            });\n        }\n        const events = triggerChildAbles(\n            moveable,\n            this,\n            \"dragControlStart\",\n            e,\n            (child, ev) => {\n                return setDist(child, ev);\n            },\n        );\n\n\n        updateGroupMin();\n        updateGroupMax();\n\n        const setFixedDirection = (fixedDirection: number[]) => {\n            params.setFixedDirection(fixedDirection);\n            events.forEach((ev, i) => {\n                ev.setFixedDirection(fixedDirection);\n                setDist(ev.moveable, originalEvents[i]);\n            });\n        };\n\n        datas.setFixedDirection = setFixedDirection;\n\n        const nextParams: OnResizeGroupStart = {\n            ...params,\n            targets: moveable.props.targets!,\n            events: events.map(ev => {\n                return {\n                    ...ev,\n                    setMin: (minSize: Array<number | string>) => {\n                        ev.setMin(minSize);\n                        updateGroupMin();\n                    },\n                    setMax: (maxSize: Array<number | string>) => {\n                        ev.setMax(maxSize);\n                        updateGroupMax();\n                    },\n                };\n            }),\n            setFixedDirection,\n            setMin: (minSize: Array<number | string>) => {\n                params.setMin(minSize);\n                updateGroupMin();\n            },\n            setMax: (maxSize: Array<number | string>) => {\n                params.setMax(maxSize);\n                updateGroupMax();\n            },\n        };\n        const result = triggerEvent(moveable, \"onResizeGroupStart\", nextParams);\n\n        datas.isResize = result !== false;\n        return datas.isResize ? params : false;\n    },\n    dragGroupControl(moveable: MoveableGroupInterface<any, any>, e: any) {\n        const { datas } = e;\n        if (!datas.isResize) {\n            return;\n        }\n        const props = getProps(moveable.props, \"resizable\");\n\n        catchEvent(moveable, \"onBeforeResize\", parentEvent => {\n            triggerEvent(moveable, \"onBeforeResizeGroup\", fillParams<OnBeforeResizeGroup>(moveable, e, {\n                ...parentEvent,\n                targets: props.targets!,\n            }, true));\n        });\n\n\n        const params = this.dragControl(moveable, {...e, isGroup: true });\n\n        if (!params) {\n            return;\n        }\n        const {\n            boundingWidth,\n            boundingHeight,\n            dist,\n        } = params;\n\n        const keepRatio = props.keepRatio;\n\n        const parentScale = [\n            boundingWidth / (boundingWidth - dist[0]),\n            boundingHeight / (boundingHeight - dist[1]),\n        ];\n        const fixedPosition = datas.fixedPosition;\n\n        const events = triggerChildAbles(\n            moveable,\n            this,\n            \"dragControl\",\n            e,\n            (_, ev) => {\n                const [clientX, clientY] = calculate(\n                    createRotateMatrix(moveable.rotation / 180 * Math.PI, 3),\n                    [\n                        ev.datas.originalX * parentScale[0],\n                        ev.datas.originalY * parentScale[1],\n                        1,\n                    ],\n                    3,\n                );\n\n                return {\n                    ...ev,\n                    parentDist: null,\n                    parentScale,\n                    dragClient: plus(fixedPosition, [clientX, clientY]),\n                    parentKeepRatio: keepRatio,\n                };\n            },\n        );\n        const nextParams: OnResizeGroup = {\n            targets: props.targets!,\n            events,\n            ...params,\n        };\n\n        triggerEvent(moveable, \"onResizeGroup\", nextParams);\n        return nextParams;\n    },\n    dragGroupControlEnd(moveable: MoveableGroupInterface<any, any>, e: any) {\n        const { isDrag, datas } = e;\n\n        if (!datas.isResize) {\n            return;\n        }\n\n        this.dragControlEnd(moveable, e);\n        const events = triggerChildAbles(moveable, this, \"dragControlEnd\", e);\n\n        const nextParams: OnResizeGroupEnd = fillEndParams<OnResizeGroupEnd>(moveable, e, {\n            targets: moveable.props.targets!,\n            events,\n        });\n\n        triggerEvent(moveable, \"onResizeGroupEnd\", nextParams);\n        return isDrag;\n    },\n    /**\n     * @method Moveable.Resizable#request\n     * @param {Moveable.Resizable.ResizableRequestParam} e - the Resizable's request parameter\n     * @return {Moveable.Requester} Moveable Requester\n     * @example\n\n     * // Instantly Request (requestStart - request - requestEnd)\n     * // Use Relative Value\n     * moveable.request(\"resizable\", { deltaWidth: 10, deltaHeight: 10 }, true);\n     *\n     * // Use Absolute Value\n     * moveable.request(\"resizable\", { offsetWidth: 100, offsetHeight: 100 }, true);\n     *\n     * // requestStart\n     * const requester = moveable.request(\"resizable\");\n     *\n     * // request\n     * // Use Relative Value\n     * requester.request({ deltaWidth: 10, deltaHeight: 10 });\n     * requester.request({ deltaWidth: 10, deltaHeight: 10 });\n     * requester.request({ deltaWidth: 10, deltaHeight: 10 });\n     *\n     * // Use Absolute Value\n     * moveable.request(\"resizable\", { offsetWidth: 100, offsetHeight: 100 });\n     * moveable.request(\"resizable\", { offsetWidth: 110, offsetHeight: 100 });\n     * moveable.request(\"resizable\", { offsetWidth: 120, offsetHeight: 100 });\n     *\n     * // requestEnd\n     * requester.requestEnd();\n     */\n    request(moveable: MoveableManagerInterface<any>) {\n        const datas: Record<string, any> = {};\n        let distWidth = 0;\n        let distHeight = 0;\n        const rect = moveable.getRect();\n\n        return {\n            isControl: true,\n            requestStart(e: ResizableRequestParam) {\n                return { datas, parentDirection: e.direction || [1, 1], parentIsWidth: e?.horizontal ?? true };\n            },\n            request(e: ResizableRequestParam) {\n                if (\"offsetWidth\" in e) {\n                    distWidth = e.offsetWidth! - rect.offsetWidth;\n                } else if (\"deltaWidth\" in e) {\n                    distWidth += e.deltaWidth!;\n                }\n                if (\"offsetHeight\" in e) {\n                    distHeight = e.offsetHeight! - rect.offsetHeight;\n                } else if (\"deltaHeight\" in e) {\n                    distHeight += e.deltaHeight!;\n                }\n\n\n                return { datas, parentDist: [distWidth, distHeight], parentKeepRatio: e.keepRatio };\n            },\n            requestEnd() {\n                return { datas, isDrag: true };\n            },\n        };\n    },\n    unset(moveable: MoveableManagerInterface<any, {}>) {\n        moveable.state.gestos.resizable = null;\n    },\n};\n\n/**\n * Whether or not target can be resized.\n * @name Moveable.Resizable#resizable\n * @default false\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     resizable: false,\n * });\n *\n * moveable.resizable = true;\n */\n\n/**\n * throttle of width, height when resize. If throttleResize is set to less than 1, the target may shake.\n * @name Moveable.Resizable#throttleResize\n * @default 1\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *   resizable: true,\n *   throttleResize: 1,\n * });\n *\n * moveable.throttleResize = 0;\n */\n/**\n * When resize or scale, keeps a ratio of the width, height.\n * @name Moveable.Resizable#keepRatio\n * @default false\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *   resizable: true,\n * });\n *\n * moveable.keepRatio = true;\n */\n/**\n * Set directions to show the control box.\n * @name Moveable.Resizable#renderDirections\n * @default [\"n\", \"nw\", \"ne\", \"s\", \"se\", \"sw\", \"e\", \"w\"]\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *   resizable: true,\n *   renderDirections: [\"n\", \"nw\", \"ne\", \"s\", \"se\", \"sw\", \"e\", \"w\"],\n * });\n *\n * moveable.renderDirections = [\"nw\", \"ne\", \"sw\", \"se\"];\n */\n\n/**\n * Function to convert size for resize\n * @name Moveable.Resizable#resizeFormat\n * @default oneself\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *   resizable: true,\n *   resizeFormat: v => v,\n * });\n *\n * moveable.resizeFormat = (size: number[]) => ([Math.trunc(size[0]), Math.trunc(size[1])];\n */\n\n/**\n * When the resize starts, the resizeStart event is called.\n * @memberof Moveable.Resizable\n * @event resizeStart\n * @param {Moveable.Resizable.OnResizeStart} - Parameters for the resizeStart event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, { resizable: true });\n * moveable.on(\"resizeStart\", ({ target }) => {\n *     console.log(target);\n * });\n */\n\n/**\n * When resizing, `beforeResize` is called before `resize` occurs. In `beforeResize`, you can get and set the pre-value before resizing.\n * @memberof Moveable.Resizable\n * @event beforeResize\n * @param {Moveable.Resizable.OnBeforeResize} - Parameters for the `beforeResize` event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, { resizable: true });\n * moveable.on(\"beforeResize\", ({ setFixedDirection }) => {\n *     if (shiftKey) {\n *        setFixedDirection([0, 0]);\n *     }\n * });\n * moveable.on(\"resize\", ({ target, width, height, drag }) => {\n *     target.style.width = `${width}px`;\n *     target.style.height = `${height}px`;\n *     target.style.transform = drag.transform;\n * });\n */\n\n/**\n * When resizing, the resize event is called.\n * @memberof Moveable.Resizable\n * @event resize\n * @param {Moveable.Resizable.OnResize} - Parameters for the resize event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, { resizable: true });\n * moveable.on(\"resize\", ({ target, width, height }) => {\n *     target.style.width = `${e.width}px`;\n *     target.style.height = `${e.height}px`;\n * });\n */\n/**\n * When the resize finishes, the resizeEnd event is called.\n * @memberof Moveable.Resizable\n * @event resizeEnd\n * @param {Moveable.Resizable.OnResizeEnd} - Parameters for the resizeEnd event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, { resizable: true });\n * moveable.on(\"resizeEnd\", ({ target, isDrag }) => {\n *     console.log(target, isDrag);\n * });\n */\n\n/**\n* When the group resize starts, the `resizeGroupStart` event is called.\n* @memberof Moveable.Resizable\n* @event resizeGroupStart\n* @param {Moveable.Resizable.OnResizeGroupStart} - Parameters for the `resizeGroupStart` event\n* @example\n* import Moveable from \"moveable\";\n*\n* const moveable = new Moveable(document.body, {\n*     target: [].slice.call(document.querySelectorAll(\".target\")),\n*     resizable: true\n* });\n* moveable.on(\"resizeGroupStart\", ({ targets }) => {\n*     console.log(\"onResizeGroupStart\", targets);\n* });\n*/\n\n/**\n* When the group resize, the `resizeGroup` event is called.\n* @memberof Moveable.Resizable\n* @event resizeGroup\n* @param {Moveable.Resizable.onResizeGroup} - Parameters for the `resizeGroup` event\n* @example\n* import Moveable from \"moveable\";\n*\n* const moveable = new Moveable(document.body, {\n*     target: [].slice.call(document.querySelectorAll(\".target\")),\n*     resizable: true\n* });\n* moveable.on(\"resizeGroup\", ({ targets, events }) => {\n*     console.log(\"onResizeGroup\", targets);\n*     events.forEach(ev => {\n*         const offset = [\n*             direction[0] < 0 ? -ev.delta[0] : 0,\n*             direction[1] < 0 ? -ev.delta[1] : 0,\n*         ];\n*         // ev.drag is a drag event that occurs when the group resize.\n*         const left = offset[0] + ev.drag.beforeDist[0];\n*         const top = offset[1] + ev.drag.beforeDist[1];\n*         const width = ev.width;\n*         const top = ev.top;\n*     });\n* });\n*/\n\n/**\n * When the group resize finishes, the `resizeGroupEnd` event is called.\n * @memberof Moveable.Resizable\n * @event resizeGroupEnd\n * @param {Moveable.Resizable.OnResizeGroupEnd} - Parameters for the `resizeGroupEnd` event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\n *     resizable: true\n * });\n * moveable.on(\"resizeGroupEnd\", ({ targets, isDrag }) => {\n *     console.log(\"onResizeGroupEnd\", targets, isDrag);\n * });\n */\n","import {\n    prefix, triggerEvent, fillParams,\n    calculatePosition, fillEndParams, getRotationRad, getRefTargets,\n    catchEvent, getProps, calculateMoveableClientPositions,\n    fillAfterTransform,\n} from \"../utils\";\nimport {\n    IObject, hasClass, getRad,\n    throttle,\n    getDist,\n    getKeys,\n    isArray,\n} from \"@daybrush/utils\";\nimport {\n    RotatableProps, OnRotateGroup, OnRotateGroupEnd,\n    Renderer, OnRotateGroupStart, OnRotateStart, OnRotate,\n    OnRotateEnd, MoveableClientRect, SnappableProps,\n    SnappableState, MoveableManagerInterface, MoveableGroupInterface, DraggableProps,\n    OnBeforeRotate,\n    OnBeforeRotateGroup,\n    OnResizeStart,\n    OnResize,\n    TransformObject,\n    OnDragStart,\n} from \"../types\";\nimport { triggerChildAbles } from \"../groupUtils\";\nimport { calculate, convertPositionMatrix, getOrigin, minus, plus, rotate as rotateMatrix } from \"@scena/matrix\";\nimport CustomGesto, { setCustomDrag } from \"../gesto/CustomGesto\";\nimport { checkSnapRotate } from \"./Snappable\";\nimport {\n    fillTransformStartEvent,\n    convertTransformFormat, getRotateDist,\n    getDirectionOffset,\n    fillTransformEvent,\n    setDefaultTransformIndex,\n    resolveTransformEvent,\n    getTransformDirection,\n    getPosByDirection,\n    getDirectionByPos,\n} from \"../gesto/GestoUtils\";\nimport { DirectionControlInfo, renderAroundControls, renderDirectionControlsByInfos } from \"../renderDirections\";\nimport { DIRECTIONS, DIRECTION_REGION_TO_DIRECTION } from \"../consts\";\nimport Resizable from \"./Resizable\";\nimport Draggable from \"./Draggable\";\n\n/**\n * @namespace Rotatable\n * @memberof Moveable\n * @description Rotatable indicates whether the target can be rotated.\n */\n\nfunction setRotateStartInfo(\n    moveable: MoveableManagerInterface<any, any>,\n    datas: IObject<any>, clientX: number, clientY: number,\n    rect: MoveableClientRect,\n) {\n    const groupable = moveable.props.groupable;\n    const state = moveable.state;\n    const n = state.is3d ? 4 : 3;\n    const origin = datas.origin;\n    const nextOrigin = calculatePosition(\n        moveable.state.rootMatrix,\n        // TO-DO #710\n        minus([origin[0], origin[1]], groupable ? [0, 0] : [state.left, state.top]),\n        n,\n    );\n    const startAbsoluteOrigin = plus([rect.left, rect.top], nextOrigin);\n\n    datas.startAbsoluteOrigin = startAbsoluteOrigin;\n    datas.prevDeg = getRad(startAbsoluteOrigin, [clientX, clientY]) / Math.PI * 180;\n    datas.defaultDeg = datas.prevDeg;\n    datas.prevSnapDeg = 0;\n    datas.loop = 0;\n    datas.startDist = getDist(startAbsoluteOrigin, [clientX, clientY]);\n}\n\nfunction getAbsoluteDist(\n    deg: number,\n    direction: number,\n    datas: IObject<any>,\n) {\n    const {\n        defaultDeg,\n        prevDeg,\n    } = datas;\n\n\n    let normalizedPrevDeg = prevDeg % 360;\n    let loop = Math.floor(prevDeg / 360);\n\n    if (normalizedPrevDeg < 0) {\n        normalizedPrevDeg += 360;\n    }\n\n    if (normalizedPrevDeg > deg && normalizedPrevDeg > 270 && deg < 90) {\n        // 360 => 0\n        ++loop;\n    } else if (normalizedPrevDeg < deg && normalizedPrevDeg < 90 && deg > 270) {\n        // 0 => 360\n        --loop;\n    }\n    const dist = direction * (loop * 360 + deg - defaultDeg);\n\n    datas.prevDeg = defaultDeg + dist;\n\n    return dist;\n}\nfunction getAbsoluteDistByClient(\n    clientX: number, clientY: number,\n    direction: number,\n    datas: IObject<any>,\n) {\n    return getAbsoluteDist(\n        getRad(datas.startAbsoluteOrigin, [clientX, clientY]) / Math.PI * 180,\n        direction,\n        datas,\n    );\n}\nfunction getRotateInfo(\n    moveable: MoveableManagerInterface<any, any>,\n    moveableRect: any,\n    datas: IObject<any>,\n    dist: number,\n    startValue: number,\n    checkSnap?: boolean,\n) {\n    const {\n        throttleRotate = 0,\n    } = moveable.props;\n    const prevSnapDeg = datas.prevSnapDeg;\n    let snapRotation = 0;\n    let isSnap = false;\n\n    if (checkSnap) {\n        const result = checkSnapRotate(moveable, moveableRect, dist);\n\n        isSnap = result.isSnap;\n        snapRotation = startValue + result.rotation;\n    }\n\n    if (!isSnap) {\n        snapRotation = throttle(startValue + dist, throttleRotate);\n    }\n    const snapDeg = snapRotation - startValue;\n\n    datas.prevSnapDeg = snapDeg;\n\n    return [snapDeg - prevSnapDeg, snapDeg, snapRotation];\n\n\n}\n\nexport function getReversePositionX(dir: string) {\n    if (dir === \"left\") {\n        return \"right\";\n    } else if (dir === \"right\") {\n        return \"left\";\n    }\n    return dir;\n}\nexport function getReversePositionY(dir: string) {\n    if (dir === \"top\") {\n        return \"bottom\";\n    } else if (dir === \"bottom\") {\n        return \"top\";\n    }\n    return dir;\n}\nexport function getRotationPositions(\n    rotationPosition: RotatableProps[\"rotationPosition\"],\n    [pos1, pos2, pos3, pos4]: number[][],\n    direction: number,\n): [number[], number][] {\n    if (rotationPosition === \"none\") {\n        return [];\n    }\n    if (isArray(rotationPosition)) {\n        return rotationPosition.map(child => getRotationPositions(\n            child,\n            [pos1, pos2, pos3, pos4],\n            direction,\n        )[0]);\n    }\n    const [dir1, dir2] = (rotationPosition || \"top\").split(\"-\");\n    let radPoses = [pos1, pos2];\n\n    if (dir1 === \"left\") {\n        radPoses = [pos3, pos1];\n    } else if (dir1 === \"right\") {\n        radPoses = [pos2, pos4];\n    } else if (dir1 === \"bottom\") {\n        radPoses = [pos4, pos3];\n    }\n    let pos = [\n        (radPoses[0][0] + radPoses[1][0]) / 2,\n        (radPoses[0][1] + radPoses[1][1]) / 2,\n    ];\n    const rad = getRotationRad(radPoses, direction);\n    if (dir2) {\n        const isStart = dir2 === \"top\" || dir2 === \"left\";\n        const isReverse = dir1 === \"bottom\" || dir1 === \"left\";\n\n        pos = radPoses[(isStart && !isReverse) || (!isStart && isReverse) ? 0 : 1];\n    }\n    return [[pos, rad]];\n}\n\nexport function dragControlCondition(moveable: MoveableManagerInterface<RotatableProps>, e: any) {\n    if (e.isRequest) {\n        return e.requestAble === \"rotatable\";\n    }\n    const target = e.inputEvent.target as HTMLElement;\n    if (\n        hasClass(target, prefix(\"rotation-control\"))\n        || hasClass(target, prefix(\"around-control\"))\n        || (hasClass(target, prefix(\"control\")) && hasClass(target, prefix(\"rotatable\")))\n    ) {\n        return true;\n    }\n    const rotationTarget = moveable.props.rotationTarget;\n\n    if (rotationTarget) {\n        return getRefTargets(rotationTarget, true).some(element => {\n            if (!element) {\n                return false;\n            }\n            return target === element || target.contains(element);\n        });\n    }\n    return false;\n}\n\nconst directionCSS = DIRECTIONS.map(dir => {\n    let top = \"\";\n    let left = \"\";\n    let originX = \"center\";\n    let originY = \"center\";\n\n    if (dir.indexOf(\"n\") > -1) {\n        top = \"top: -20px;\";\n        originY = \"bottom\";\n    }\n    if (dir.indexOf(\"s\") > -1) {\n        top = \"top: 0px;\";\n        originY = \"top\";\n    }\n    if (dir.indexOf(\"w\") > -1) {\n        left = \"left: -20px;\";\n        originX = \"right\";\n    }\n    if (dir.indexOf(\"e\") > -1) {\n        left = \"left: 0px;\";\n        originX = \"left\";\n    }\n    return `.around-control[data-direction*=\"${dir}\"] {\n        ${left}${top}\n        transform-origin: ${originX} ${originY};\n    }`;\n}).join(\"\\n\");\nconst css = `.rotation {\n    position: absolute;\n    height: 40px;\n    width: 1px;\n    transform-origin: 50% 100%;\n    height: calc(40px * var(--zoom));\n    top: auto;\n    left: 0;\n    bottom: 100%;\n    will-change: transform;\n}\n.rotation .rotation-line {\n    display: block;\n    width: 100%;\n    height: 100%;\n    transform-origin: 50% 50%;\n}\n.rotation .rotation-control {\n    border-color: #4af;\n    border-color: var(--moveable-color);\n    background:#fff;\n    cursor: alias;\n}\n:global .view-rotation-dragging, .rotatable.direction.control {\n    cursor: alias;\n}\n.around-control {\n    position: absolute;\n    will-change: transform;\n    width: 20px;\n    height: 20px;\n    left: -10px;\n    top: -10px;\n    box-sizing: border-box;\n    background: transparent;\n    z-index: 8;\n    cursor: alias;\n    transform-origin: center center;\n}\n.rotatable.direction.control.move {\n    cursor: move;\n}\n${directionCSS}\n`;\nexport default {\n    name: \"rotatable\",\n    canPinch: true,\n    props: {\n        rotatable: Boolean,\n        rotationPosition: String,\n        throttleRotate: Number,\n        renderDirections: Object,\n        rotationTarget: Object,\n        rotateAroundControls: Boolean,\n        edge: Boolean,\n        resolveAblesWithRotatable: Object,\n    } as const,\n    events: {\n        onRotateStart: \"rotateStart\",\n        onBeforeRotate: \"beforeRotate\",\n        onRotate: \"rotate\",\n        onRotateEnd: \"rotateEnd\",\n        onRotateGroupStart: \"rotateGroupStart\",\n        onBeforeRotateGroup: \"beforeRotateGroup\",\n        onRotateGroup: \"rotateGroup\",\n        onRotateGroupEnd: \"rotateGroupEnd\",\n    } as const,\n    css: [css],\n    viewClassName(moveable: MoveableManagerInterface<RotatableProps>) {\n        if (!moveable.isDragging(\"rotatable\")) {\n            return \"\";\n        }\n        return prefix(\"view-rotation-dragging\");\n    },\n    render(moveable: MoveableManagerInterface<RotatableProps>, React: Renderer): any {\n        const {\n            rotatable,\n            rotationPosition,\n            zoom,\n            renderDirections,\n            rotateAroundControls,\n            resolveAblesWithRotatable,\n        } = getProps(moveable.props, \"rotatable\");\n        const {\n            renderPoses,\n            direction,\n        } = moveable.getState();\n        if (!rotatable) {\n            return null;\n        }\n        const positions = getRotationPositions(rotationPosition!, renderPoses, direction);\n        const jsxs: any[] = [];\n\n        positions.forEach(([pos, rad], i) => {\n            jsxs.push(\n                <div key={`rotation${i}`} className={prefix(\"rotation\")} style={{\n                    // tslint:disable-next-line: max-line-length\n                    transform: `translate(-50%) translate(${pos[0]}px, ${pos[1]}px) rotate(${rad}rad)`,\n                }}>\n                    <div className={prefix(\"line rotation-line\")} style={{\n                        transform: `scaleX(${zoom})`,\n                    }}></div>\n                    <div className={prefix(\"control rotation-control\")} style={{\n                        transform: `translate(0.5px) scale(${zoom})`,\n                    }}></div>\n                </div>\n            );\n        });\n        if (renderDirections) {\n            const ables = getKeys(resolveAblesWithRotatable || {});\n            const resolveMap: Record<string, string> = {};\n\n            ables.forEach(name => {\n                resolveAblesWithRotatable![name]!.forEach(direction => {\n                    resolveMap[direction] = name;\n                });\n            });\n\n            let directionControlInfos: DirectionControlInfo[] = [];\n\n            if (isArray(renderDirections)) {\n                directionControlInfos = renderDirections.map(dir => {\n                    const able = resolveMap[dir];\n\n                    return {\n                        data: able ? { resolve: able } : {},\n                        classNames: able ? [`move`] : [],\n                        dir,\n                    };\n                });\n            }\n\n            jsxs.push(...renderDirectionControlsByInfos(\n                moveable,\n                \"rotatable\",\n                directionControlInfos,\n                React,\n            ));\n        }\n        if (rotateAroundControls) {\n            jsxs.push(...renderAroundControls(moveable, React));\n        }\n\n        return jsxs;\n    },\n    dragControlCondition: dragControlCondition as (moveable: any, e: any) => boolean,\n    dragControlStart(\n        moveable: MoveableManagerInterface<RotatableProps & SnappableProps & DraggableProps, SnappableState>,\n        e: any) {\n        const {\n            datas,\n            clientX, clientY,\n            parentRotate, parentFlag, isPinch,\n            isRequest,\n        } = e;\n        const state = moveable.state;\n        const {\n            target, left, top,\n            direction, beforeDirection, targetTransform,\n            moveableClientRect,\n            offsetMatrix,\n            targetMatrix,\n            allMatrix,\n            width,\n            height,\n        } = state;\n\n        if (!isRequest && !target) {\n            return false;\n        }\n\n        const rect = moveable.getRect();\n        datas.rect = rect;\n        datas.transform = targetTransform;\n        datas.left = left;\n        datas.top = top;\n        let setFixedPosition = (fixedPosition: number[]) => {\n            const {\n                allMatrix,\n                is3d,\n                width,\n                height,\n            } = moveable.state;\n            const fixedDirection = getDirectionByPos(fixedPosition, width, height);\n            datas.fixedDirection = fixedDirection;\n            datas.fixedPosition = calculatePosition(allMatrix, fixedPosition, is3d ? 4 : 3);\n\n            if (resizeStart) {\n                resizeStart.setFixedPosition(fixedPosition);\n            }\n        };\n        let setFixedDirection: OnRotateStart[\"setFixedDirection\"] = (fixedDirection: number[]) => {\n            datas.fixedDirection = fixedDirection;\n            datas.fixedPosition = getDirectionOffset(moveable, fixedDirection);\n\n            if (resizeStart) {\n                resizeStart.setFixedDirection(fixedDirection);\n            }\n        };\n        let startClientX = clientX;\n        let startClientY = clientY;\n\n        if (isRequest || isPinch || parentFlag) {\n            const externalRotate = parentRotate || 0;\n\n            datas.beforeInfo = {\n                origin: rect.beforeOrigin,\n                prevDeg: externalRotate,\n                defaultDeg: externalRotate,\n                prevSnapDeg: 0,\n                startDist: 0,\n            };\n            datas.afterInfo = {\n                ...datas.beforeInfo,\n                origin: rect.origin,\n            };\n            datas.absoluteInfo = {\n                ...datas.beforeInfo,\n                origin: rect.origin,\n                startValue: externalRotate,\n            };\n        } else {\n            const inputTarget = e.inputEvent?.target;\n\n            if (inputTarget) {\n                const regionDirection = inputTarget.getAttribute(\"data-direction\") || \"\";\n                const controlDirection = DIRECTION_REGION_TO_DIRECTION[regionDirection];\n\n                if (controlDirection) {\n                    datas.isControl = true;\n                    datas.isAroundControl = hasClass(inputTarget, prefix(\"around-control\"));\n                    datas.controlDirection = controlDirection;\n                    const resolve = inputTarget.getAttribute(\"data-resolve\");\n\n                    if (resolve) {\n                        datas.resolveAble = resolve;\n                    }\n\n                    const clientPoses = calculateMoveableClientPositions(\n                        state.rootMatrix,\n                        state.renderPoses,\n                        moveableClientRect,\n                    );\n\n\n                    [startClientX, startClientY] = getPosByDirection(clientPoses, controlDirection);\n                }\n            }\n            datas.beforeInfo = { origin: rect.beforeOrigin };\n            datas.afterInfo = { origin: rect.origin };\n            datas.absoluteInfo = {\n                origin: rect.origin,\n                startValue: rect.rotation,\n            };\n\n            const originalFixedPosition = setFixedPosition;\n\n            setFixedPosition = (fixedPosition: number[]) => {\n                const n = state.is3d ? 4 : 3;\n                const [originX, originY] = plus(getOrigin(targetMatrix, n), fixedPosition);\n                const fixedBeforeOrigin = calculate(\n                    offsetMatrix,\n                    convertPositionMatrix([originX, originY], n),\n                );\n                const fixedAfterOrigin = calculate(\n                    allMatrix,\n                    convertPositionMatrix([fixedPosition[0], fixedPosition[1]], n),\n                );\n                originalFixedPosition(fixedPosition);\n                const posDelta = state.posDelta;\n\n                datas.beforeInfo.origin = minus(fixedBeforeOrigin, posDelta);\n                datas.afterInfo.origin = minus(fixedAfterOrigin, posDelta);\n                datas.absoluteInfo.origin = minus(fixedAfterOrigin, posDelta);\n\n                setRotateStartInfo(moveable, datas.beforeInfo, startClientX, startClientY, moveableClientRect);\n                setRotateStartInfo(moveable, datas.afterInfo, startClientX, startClientY, moveableClientRect);\n                setRotateStartInfo(moveable, datas.absoluteInfo, startClientX, startClientY, moveableClientRect);\n            };\n            setFixedDirection = (fixedDirection: number[]) => {\n                const fixedPosition = getPosByDirection([\n                    [0, 0],\n                    [width, 0],\n                    [0, height],\n                    [width, height],\n                ], fixedDirection);\n\n                setFixedPosition(fixedPosition);\n            };\n        }\n\n        datas.startClientX = startClientX;\n        datas.startClientY = startClientY;\n        datas.direction = direction;\n        datas.beforeDirection = beforeDirection;\n        datas.startValue = 0;\n        datas.datas = {};\n\n        setDefaultTransformIndex(e, \"rotate\");\n\n        let dragStart: OnDragStart | false = false;\n        let resizeStart: OnResizeStart | false = false;\n\n        if (datas.isControl && datas.resolveAble) {\n            const resolveAble = datas.resolveAble;\n\n            if  (resolveAble === \"resizable\") {\n                resizeStart = Resizable.dragControlStart(moveable, {\n                    ...(new CustomGesto(\"resizable\").dragStart([0, 0], e)),\n                    parentPosition: datas.controlPosition,\n                    parentFixedPosition: datas.fixedPosition,\n                });\n            }\n        }\n\n        if (!resizeStart) {\n            dragStart = Draggable.dragStart!(\n                moveable,\n                new CustomGesto().dragStart([0, 0], e),\n            );\n        }\n\n        setFixedPosition(state.transformOrigin);\n        const params = fillParams<OnRotateStart>(moveable, e, {\n            set: (rotatation: number) => {\n                datas.startValue = rotatation * Math.PI / 180;\n            },\n            setFixedDirection,\n            setFixedPosition,\n            ...fillTransformStartEvent(e),\n            dragStart,\n            resizeStart,\n        });\n        const result = triggerEvent(moveable, \"onRotateStart\", params);\n        datas.isRotate = result !== false;\n        state.snapRenderInfo = {\n            request: e.isRequest,\n        };\n\n        return datas.isRotate ? params : false;\n    },\n    dragControl(\n        moveable: MoveableManagerInterface<RotatableProps & DraggableProps>,\n        e: any,\n    ) {\n        const { datas, clientDistX, clientDistY, parentRotate, parentFlag, isPinch, groupDelta } = e;\n        const {\n            beforeDirection,\n            beforeInfo,\n            afterInfo,\n            absoluteInfo,\n            isRotate,\n            startValue,\n            rect,\n            startClientX,\n            startClientY,\n        } = datas;\n\n        if (!isRotate) {\n            return;\n        }\n\n        resolveTransformEvent(e, \"rotate\");\n\n        const targetDirection = getTransformDirection(e);\n        const direction = beforeDirection * targetDirection;\n        const {\n            parentMoveable,\n        } = moveable.props;\n\n\n        let beforeDelta = 0;\n        let beforeDist: number;\n        let beforeRotation: number;\n\n        let delta = 0;\n        let dist: number;\n        let rotation: number;\n\n        let absoluteDelta = 0;\n        let absoluteDist: number;\n        let absoluteRotation: number;\n\n        const startRotation = 180 / Math.PI * startValue;\n        const absoluteStartRotation = absoluteInfo.startValue;\n        let isSnap = false;\n        const nextClientX = startClientX + clientDistX;\n        const nextClientY = startClientY + clientDistY;\n\n        if (!parentFlag && \"parentDist\" in e) {\n            const parentDist = e.parentDist;\n\n            beforeDist = parentDist;\n            dist = parentDist;\n            absoluteDist = parentDist;\n        } else if (isPinch || parentFlag) {\n            beforeDist = getAbsoluteDist(parentRotate, beforeDirection, beforeInfo);\n            dist = getAbsoluteDist(parentRotate, direction, afterInfo);\n            absoluteDist = getAbsoluteDist(parentRotate, direction, absoluteInfo);\n        } else {\n            beforeDist = getAbsoluteDistByClient(nextClientX, nextClientY, beforeDirection, beforeInfo);\n            dist = getAbsoluteDistByClient(nextClientX, nextClientY, direction, afterInfo);\n            absoluteDist = getAbsoluteDistByClient(nextClientX, nextClientY, direction, absoluteInfo);\n            isSnap = true;\n        }\n        beforeRotation = startRotation + beforeDist;\n        rotation = startRotation + dist;\n        absoluteRotation = absoluteStartRotation + absoluteDist;\n\n\n        triggerEvent(moveable, \"onBeforeRotate\", fillParams<OnBeforeRotate>(moveable, e, {\n            beforeRotation,\n            rotation,\n            absoluteRotation,\n            setRotation(nextRotation: number) {\n                dist = nextRotation - startRotation;\n                beforeDist = dist;\n                absoluteDist = dist;\n            },\n        }, true));\n\n        [\n            beforeDelta,\n            beforeDist,\n            beforeRotation,\n        ] = getRotateInfo(moveable, rect, beforeInfo, beforeDist, startRotation, isSnap);\n\n        [\n            delta,\n            dist,\n            rotation,\n        ] = getRotateInfo(moveable, rect, afterInfo, dist, startRotation, isSnap);\n\n        [\n            absoluteDelta,\n            absoluteDist,\n            absoluteRotation,\n        ] = getRotateInfo(moveable, rect, absoluteInfo, absoluteDist, absoluteStartRotation, isSnap);\n\n        if (!absoluteDelta && !delta && !beforeDelta && !parentMoveable) {\n            return;\n        }\n\n        const nextTransform = convertTransformFormat(\n            datas, `rotate(${rotation}deg)`, `rotate(${dist}deg)`,\n        );\n\n        const inverseDist = getRotateDist(moveable, dist, datas);\n        const inverseDelta = minus(\n            plus(groupDelta || [0, 0], inverseDist),\n            datas.prevInverseDist || [0, 0],\n        );\n        datas.prevInverseDist = inverseDist;\n\n        datas.requestValue = null;\n\n        const dragEvent = fillTransformEvent(\n            moveable,\n            nextTransform,\n            inverseDelta,\n            isPinch,\n            e,\n        );\n\n        let transformEvent: TransformObject = dragEvent;\n        const parentDistance = getDist(\n            [nextClientX, nextClientY],\n            absoluteInfo.startAbsoluteOrigin,\n        ) - absoluteInfo.startDist;\n\n        let resize: OnResize | undefined = undefined;\n\n        if (datas.resolveAble === \"resizable\") {\n            const resizeEvent = Resizable.dragControl(\n                moveable,\n                {\n                    ...setCustomDrag(e, moveable.state, [e.deltaX, e.deltaY], !!isPinch, false, \"resizable\"),\n                    resolveMatrix: true,\n                    parentDistance,\n                },\n            );\n\n            if (resizeEvent) {\n                resize = resizeEvent;\n                transformEvent = fillAfterTransform(transformEvent, resizeEvent, e);\n            }\n        }\n\n        const params = fillParams<OnRotate>(moveable, e, {\n            delta,\n            dist,\n            rotate: rotation,\n            rotation,\n\n            beforeDist,\n            beforeDelta,\n            beforeRotate: beforeRotation,\n            beforeRotation,\n\n            absoluteDist,\n            absoluteDelta,\n            absoluteRotate: absoluteRotation,\n            absoluteRotation,\n\n            isPinch: !!isPinch,\n            resize,\n            ...dragEvent,\n            ...transformEvent,\n        });\n        triggerEvent(moveable, \"onRotate\", params);\n\n        return params;\n    },\n    dragControlEnd(moveable: MoveableManagerInterface<RotatableProps>, e: any) {\n        const { datas } = e;\n\n        if (!datas.isRotate) {\n            return;\n        }\n        datas.isRotate = false;\n\n        const params = fillEndParams<OnRotateEnd>(moveable, e, {});\n\n        triggerEvent(moveable, \"onRotateEnd\", params);\n        return params;\n    },\n    dragGroupControlCondition: dragControlCondition as (moveable: any, e: any) => boolean,\n    dragGroupControlStart(moveable: MoveableGroupInterface<any, any>, e: any) {\n        const { datas } = e;\n        const {\n            left: parentLeft,\n            top: parentTop,\n            beforeOrigin: parentBeforeOrigin,\n        } = moveable.state;\n\n        const params = this.dragControlStart(moveable, e);\n\n        if (!params) {\n            return false;\n        }\n\n        params.set(datas.beforeDirection * moveable.rotation);\n\n        const events = triggerChildAbles(\n            moveable,\n            this,\n            \"dragControlStart\",\n            e,\n            (child, ev) => {\n                const { left, top, beforeOrigin } = child.state;\n                const childClient = plus(\n                    minus([left, top], [parentLeft, parentTop]),\n                    minus(beforeOrigin, parentBeforeOrigin),\n                );\n\n                ev.datas.startGroupClient = childClient;\n                ev.datas.groupClient = childClient;\n                return { ...ev, parentRotate: 0 };\n            },\n        );\n\n        const nextParams: OnRotateGroupStart = {\n            ...params,\n            targets: moveable.props.targets!,\n            events,\n        };\n        const result = triggerEvent(moveable, \"onRotateGroupStart\", nextParams);\n\n        datas.isRotate = result !== false;\n\n        return datas.isRotate ? params : false;\n    },\n    dragGroupControl(moveable: MoveableGroupInterface<any, any>, e: any) {\n        const { datas } = e;\n\n        if (!datas.isRotate) {\n            return;\n        }\n\n        catchEvent(moveable, \"onBeforeRotate\", parentEvent => {\n            triggerEvent(moveable, \"onBeforeRotateGroup\", fillParams<OnBeforeRotateGroup>(moveable, e, {\n                ...parentEvent,\n                targets: moveable.props.targets!,\n            }, true));\n        });\n        const params = this.dragControl(moveable, e);\n\n        if (!params) {\n            return;\n        }\n        const direction = datas.beforeDirection;\n        const parentRotate = params.beforeDist;\n        const rad = parentRotate / 180 * Math.PI;\n        const events = triggerChildAbles(\n            moveable,\n            this,\n            \"dragControl\",\n            e,\n            (_, ev) => {\n                const startGroupClient = ev.datas.startGroupClient;\n                const [prevClientX, prevClientY] = ev.datas.groupClient;\n                const [clientX, clientY] = rotateMatrix(startGroupClient, rad * direction);\n                const delta = [clientX - prevClientX, clientY - prevClientY];\n\n                ev.datas.groupClient = [clientX, clientY];\n                return { ...ev, parentRotate, groupDelta: delta };\n            },\n        );\n        moveable.rotation = direction * params.beforeRotation;\n\n        const nextParams: OnRotateGroup = {\n            targets: moveable.props.targets!,\n            events,\n            set(rotation: number) {\n                moveable.rotation = rotation;\n            },\n            setGroupRotation(rotation: number) {\n                moveable.rotation = rotation;\n            },\n            ...params,\n        };\n\n        triggerEvent(moveable, \"onRotateGroup\", nextParams);\n        return nextParams;\n    },\n    dragGroupControlEnd(moveable: MoveableGroupInterface<any, any>, e: any) {\n        const { isDrag, datas } = e;\n\n        if (!datas.isRotate) {\n            return;\n        }\n\n        this.dragControlEnd(moveable, e);\n        const events = triggerChildAbles(moveable, this, \"dragControlEnd\", e);\n\n        const nextParams = fillEndParams<OnRotateGroupEnd>(moveable, e, {\n            targets: moveable.props.targets!,\n            events,\n        });\n\n        triggerEvent(moveable, \"onRotateGroupEnd\", nextParams);\n        return isDrag;\n    },\n    /**\n     * @method Moveable.Rotatable#request\n     * @param {object} [e] - the Resizable's request parameter\n     * @param {number} [e.deltaRotate=0] -  delta number of rotation\n     * @param {number} [e.rotate=0] - absolute number of moveable's rotation\n     * @return {Moveable.Requester} Moveable Requester\n     * @example\n\n     * // Instantly Request (requestStart - request - requestEnd)\n     * moveable.request(\"rotatable\", { deltaRotate: 10 }, true);\n     *\n     * * moveable.request(\"rotatable\", { rotate: 10 }, true);\n     *\n     * // requestStart\n     * const requester = moveable.request(\"rotatable\");\n     *\n     * // request\n     * requester.request({ deltaRotate: 10 });\n     * requester.request({ deltaRotate: 10 });\n     * requester.request({ deltaRotate: 10 });\n     *\n     * requester.request({ rotate: 10 });\n     * requester.request({ rotate: 20 });\n     * requester.request({ rotate: 30 });\n     *\n     * // requestEnd\n     * requester.requestEnd();\n     */\n    request(moveable: MoveableManagerInterface<RotatableProps>) {\n        const datas = {};\n        let distRotate = 0;\n\n        const startRotation = moveable.getRotation();\n        return {\n            isControl: true,\n            requestStart() {\n                return { datas };\n            },\n            request(e: IObject<any>) {\n                if (\"deltaRotate\" in e) {\n                    distRotate += e.deltaRotate;\n                } else if (\"rotate\" in e) {\n                    distRotate = e.rotate - startRotation;\n                }\n\n                return { datas, parentDist: distRotate };\n            },\n            requestEnd() {\n                return { datas, isDrag: true };\n            },\n        };\n    },\n};\n/**\n * Whether or not target can be rotated. (default: false)\n * @name Moveable.Rotatable#rotatable\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body);\n *\n * moveable.rotatable = true;\n */\n/**\n * You can specify the position of the rotation. (default: \"top\")\n * @name Moveable.Rotatable#rotationPosition\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *   rotationPosition: \"top\",\n * });\n *\n * moveable.rotationPosition = \"bottom\"\n */\n\n/**\n * throttle of angle(degree) when rotate.\n * @name Moveable.Rotatable#throttleRotate\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body);\n *\n * moveable.throttleRotate = 1;\n */\n\n/**\n * When the rotate starts, the rotateStart event is called.\n * @memberof Moveable.Rotatable\n * @event rotateStart\n * @param {Moveable.Rotatable.OnRotateStart} - Parameters for the rotateStart event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, { rotatable: true });\n * moveable.on(\"rotateStart\", ({ target }) => {\n *     console.log(target);\n * });\n */\n\n/**\n* When rotating, the rotate event is called.\n* @memberof Moveable.Rotatable\n* @event rotate\n* @param {Moveable.Rotatable.OnRotate} - Parameters for the rotate event\n* @example\n* import Moveable from \"moveable\";\n*\n* const moveable = new Moveable(document.body, { rotatable: true });\n* moveable.on(\"rotate\", ({ target, transform, dist }) => {\n*     target.style.transform = transform;\n* });\n*/\n/**\n * When the rotate finishes, the rotateEnd event is called.\n * @memberof Moveable.Rotatable\n * @event rotateEnd\n * @param {Moveable.Rotatable.OnRotateEnd} - Parameters for the rotateEnd event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, { rotatable: true });\n * moveable.on(\"rotateEnd\", ({ target, isDrag }) => {\n *     console.log(target, isDrag);\n * });\n */\n\n/**\n * When the group rotate starts, the `rotateGroupStart` event is called.\n * @memberof Moveable.Rotatable\n * @event rotateGroupStart\n * @param {Moveable.Rotatable.OnRotateGroupStart} - Parameters for the `rotateGroupStart` event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\n *     rotatable: true\n * });\n * moveable.on(\"rotateGroupStart\", ({ targets }) => {\n *     console.log(\"onRotateGroupStart\", targets);\n * });\n */\n\n/**\n* When the group rotate, the `rotateGroup` event is called.\n* @memberof Moveable.Rotatable\n* @event rotateGroup\n* @param {Moveable.Rotatable.OnRotateGroup} - Parameters for the `rotateGroup` event\n* @example\n* import Moveable from \"moveable\";\n*\n* const moveable = new Moveable(document.body, {\n*     target: [].slice.call(document.querySelectorAll(\".target\")),\n*     rotatable: true\n* });\n* moveable.on(\"rotateGroup\", ({ targets, events }) => {\n*     console.log(\"onRotateGroup\", targets);\n*     events.forEach(ev => {\n*         const target = ev.target;\n*         // ev.drag is a drag event that occurs when the group rotate.\n*         const left = ev.drag.beforeDist[0];\n*         const top = ev.drag.beforeDist[1];\n*         const deg = ev.beforeDist;\n*     });\n* });\n*/\n\n/**\n * When the group rotate finishes, the `rotateGroupEnd` event is called.\n * @memberof Moveable.Rotatable\n * @event rotateGroupEnd\n * @param {Moveable.Rotatable.OnRotateGroupEnd} - Parameters for the `rotateGroupEnd` event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\n *     rotatable: true\n * });\n * moveable.on(\"rotateGroupEnd\", ({ targets, isDrag }) => {\n *     console.log(\"onRotateGroupEnd\", targets, isDrag);\n * });\n */\n","import {\n    triggerEvent, multiply2,\n    fillParams, fillEndParams, getAbsolutePosesByState,\n    catchEvent, getOffsetSizeDist, getDirectionCondition, getDirectionViewClassName, getTotalDirection,\n} from \"../utils\";\nimport { MIN_SCALE } from \"../consts\";\nimport {\n    setDragStart, resolveTransformEvent,\n    convertTransformFormat,\n    getScaleDist,\n    fillTransformStartEvent,\n    fillTransformEvent,\n    getAbsolutePosition,\n    setDefaultTransformIndex,\n    getPosByDirection,\n} from \"../gesto/GestoUtils\";\nimport { getRenderDirections } from \"../renderDirections\";\nimport {\n    ScalableProps, OnScaleGroup, OnScaleGroupEnd,\n    OnScaleGroupStart, DraggableProps, OnDragStart,\n    SnappableState, GroupableProps, OnScaleStart,\n    OnScale, OnScaleEnd, MoveableManagerInterface, MoveableGroupInterface,\n    OnBeforeScaleGroup,\n    OnBeforeScale,\n} from \"../types\";\nimport {\n    fillChildEvents,\n    triggerChildAbles,\n} from \"../groupUtils\";\nimport Draggable from \"./Draggable\";\nimport { calculate, createRotateMatrix, plus, minus } from \"@scena/matrix\";\nimport CustomGesto from \"../gesto/CustomGesto\";\nimport { checkSnapScale } from \"./Snappable\";\nimport {\n    isArray, IObject, getDist,\n    throttle,\n} from \"@daybrush/utils\";\n\nconst directionCondition = getDirectionCondition(\"scalable\");\n\n/**\n * @namespace Scalable\n * @memberof Moveable\n * @description Scalable indicates whether the target's x and y can be scale of transform.\n */\nexport default {\n    name: \"scalable\",\n    ableGroup: \"size\",\n    canPinch: true,\n    props: {\n        scalable: Boolean,\n        throttleScale: Number,\n        renderDirections: String,\n        keepRatio: Boolean,\n        edge: Boolean,\n    } as const,\n    events: {\n        onScaleStart: \"scaleStart\",\n        onBeforeScale: \"beforeScale\",\n        onScale: \"scale\",\n        onScaleEnd: \"scaleEnd\",\n        onScaleGroupStart: \"scaleGroupStart\",\n        onBeforeScaleGroup: \"beforeScaleGroup\",\n        onScaleGroup: \"scaleGroup\",\n        onScaleGroupEnd: \"scaleGroupEnd\",\n    } as const,\n    render: getRenderDirections(\"scalable\"),\n    dragControlCondition: directionCondition,\n    viewClassName: getDirectionViewClassName(\"scalable\"),\n    dragControlStart(\n        moveable: MoveableManagerInterface<ScalableProps & DraggableProps, SnappableState>,\n        e: any) {\n        const { datas, isPinch, inputEvent, parentDirection } = e;\n\n        const direction = getTotalDirection(\n            parentDirection,\n            isPinch,\n            inputEvent,\n            datas,\n        );\n        const {\n            width,\n            height,\n            targetTransform,\n            target,\n            pos1,\n            pos2,\n            pos4,\n        } = moveable.state;\n\n        if (!direction || !target) {\n            return false;\n        }\n        if (!isPinch) {\n            setDragStart(moveable, e);\n        }\n        datas.datas = {};\n        datas.transform = targetTransform;\n        datas.prevDist = [1, 1];\n        datas.direction = direction;\n        datas.startOffsetWidth = width;\n        datas.startOffsetHeight = height;\n        datas.startValue = [1, 1];\n\n        const scaleWidth = getDist(pos1, pos2);\n        const scaleHeight = getDist(pos2, pos4);\n        const isWidth = (!direction[0] && !direction[1]) || direction[0] || !direction[1];\n\n\n        datas.scaleWidth = scaleWidth;\n        datas.scaleHeight = scaleHeight;\n        datas.scaleXRatio = scaleWidth / width;\n        datas.scaleYRatio = scaleHeight / height;\n\n        setDefaultTransformIndex(e, \"scale\");\n\n\n\n        datas.isWidth = isWidth;\n\n\n        function setRatio(ratio: number) {\n            datas.ratio = ratio && isFinite(ratio) ? ratio : 0;\n        }\n\n        datas.startPositions = getAbsolutePosesByState(moveable.state);\n        function setFixedDirection(fixedDirection: number[]) {\n            datas.fixedDirection = fixedDirection;\n            datas.fixedPosition = getPosByDirection(datas.startPositions, fixedDirection);\n        }\n\n\n        datas.setFixedDirection = setFixedDirection;\n        setRatio(getDist(pos1, pos2) / getDist(pos2, pos4));\n        setFixedDirection([-direction[0], -direction[1]]);\n\n        const params = fillParams<OnScaleStart>(moveable, e, {\n            direction,\n            set: (scale: number[]) => {\n                datas.startValue = scale;\n            },\n            setRatio,\n            setFixedDirection,\n            ...fillTransformStartEvent(e),\n            dragStart: Draggable.dragStart(\n                moveable,\n                new CustomGesto().dragStart([0, 0], e),\n            ) as OnDragStart,\n        });\n        const result = triggerEvent(moveable, \"onScaleStart\", params);\n\n        datas.startFixedDirection = datas.fixedDirection;\n\n        if (result !== false) {\n            datas.isScale = true;\n            moveable.state.snapRenderInfo = {\n                request: e.isRequest,\n                direction,\n            };\n\n        }\n        return datas.isScale ? params : false;\n    },\n    dragControl(\n        moveable: MoveableManagerInterface<ScalableProps & DraggableProps & GroupableProps, SnappableState>,\n        e: any) {\n        resolveTransformEvent(e, \"scale\");\n        const {\n            datas,\n            parentKeepRatio,\n            parentFlag, isPinch,\n            dragClient,\n            isRequest,\n        } = e;\n        const {\n            prevDist,\n            direction,\n            startOffsetWidth,\n            startOffsetHeight,\n            isScale,\n            startValue,\n            isWidth,\n            ratio,\n        } = datas;\n\n        if (!isScale) {\n            return false;\n        }\n\n        const props = moveable.props;\n        const {\n            throttleScale,\n            parentMoveable,\n        } = props;\n        let sizeDirection = direction;\n\n        if (!direction[0] && !direction[1]) {\n            sizeDirection = [1, 1];\n        }\n        const keepRatio = (ratio && (parentKeepRatio != null ? parentKeepRatio : props.keepRatio)) || false;\n        const state = moveable.state;\n\n        function getNextScale() {\n            const {\n                distWidth,\n                distHeight,\n            } = getOffsetSizeDist(sizeDirection, keepRatio, datas, e);\n\n\n            let scaleX = startOffsetWidth ? (startOffsetWidth + distWidth) / startOffsetWidth : 1;\n            let scaleY = startOffsetHeight ? (startOffsetHeight + distHeight) / startOffsetHeight : 1;\n\n            scaleX = sizeDirection[0] || keepRatio ? scaleX * startValue[0] : startValue[0];\n            scaleY = sizeDirection[1] || keepRatio ? scaleY * startValue[1] : startValue[1];\n\n            if (scaleX === 0) {\n                scaleX = (prevDist[0] > 0 ? 1 : -1) * MIN_SCALE;\n            }\n            if (scaleY === 0) {\n                scaleY = (prevDist[1] > 0 ? 1 : -1) * MIN_SCALE;\n            }\n            return [scaleX, scaleY];\n        }\n\n\n        let scale = getNextScale();\n\n        if (!isPinch && moveable.props.groupable) {\n            const snapRenderInfo = state.snapRenderInfo || {};\n            const stateDirection = snapRenderInfo.direction;\n\n            if (isArray(stateDirection) && (stateDirection[0] || stateDirection[1])) {\n                state.snapRenderInfo = { direction, request: e.isRequest };\n            }\n        }\n\n        triggerEvent(moveable, \"onBeforeScale\", fillParams<OnBeforeScale>(moveable, e, {\n            scale,\n            setFixedDirection(nextFixedDirection: number[]) {\n                datas.setFixedDirection(nextFixedDirection);\n\n                scale = getNextScale();\n\n                return scale;\n            },\n            startFixedDirection: datas.startFixedDirection,\n            setScale(nextScale: number[]) {\n                scale = nextScale;\n            },\n        }, true));\n\n        const dist = [scale[0] / startValue[0], scale[1] / startValue[1]];\n        let fixedPosition = dragClient;\n        let snapDist = [0, 0];\n\n\n        if (!dragClient) {\n            if (!parentFlag && isPinch) {\n                fixedPosition = getAbsolutePosition(moveable, [0, 0]);\n            } else {\n                fixedPosition = datas.fixedPosition;\n            }\n        }\n        if (!isPinch) {\n            snapDist = checkSnapScale(\n                moveable,\n                dist,\n                direction,\n                isRequest,\n                datas,\n            );\n        }\n\n        if (keepRatio) {\n            if (sizeDirection[0] && sizeDirection[1] && snapDist[0] && snapDist[1]) {\n                if (Math.abs(snapDist[0] * startOffsetWidth) > Math.abs(snapDist[1] * startOffsetHeight)) {\n                    snapDist[1] = 0;\n                } else {\n                    snapDist[0] = 0;\n                }\n            }\n\n            const isNoSnap = !snapDist[0] && !snapDist[1];\n\n            if (isNoSnap) {\n                if (isWidth) {\n                    dist[0] = throttle(dist[0] * startValue[0], throttleScale!) / startValue[0];\n                } else {\n                    dist[1] = throttle(dist[1] * startValue[1], throttleScale!) / startValue[1];\n                }\n            }\n            if (\n                (sizeDirection[0] && !sizeDirection[1])\n                || (snapDist[0] && !snapDist[1])\n                || (isNoSnap && isWidth)\n            ) {\n                dist[0] += snapDist[0];\n                const snapHeight = startOffsetWidth * dist[0] * startValue[0] / ratio;\n\n                dist[1] = snapHeight / startOffsetHeight / startValue[1];\n            } else if (\n                (!sizeDirection[0] && sizeDirection[1])\n                || (!snapDist[0] && snapDist[1])\n                || (isNoSnap && !isWidth)\n            ) {\n                dist[1] += snapDist[1];\n                const snapWidth = startOffsetHeight * dist[1] * startValue[1] * ratio;\n\n                dist[0] = snapWidth / startOffsetWidth / startValue[0];\n            }\n        } else {\n            dist[0] += snapDist[0];\n            dist[1] += snapDist[1];\n            if (!snapDist[0]) {\n                dist[0] = throttle(dist[0] * startValue[0], throttleScale!) / startValue[0];\n            }\n            if (!snapDist[1]) {\n                dist[1] = throttle(dist[1] * startValue[1], throttleScale!) / startValue[1];\n            }\n        }\n\n        if (dist[0] === 0) {\n            dist[0] = (prevDist[0] > 0 ? 1 : -1) * MIN_SCALE;\n        }\n        if (dist[1] === 0) {\n            dist[1] = (prevDist[1] > 0 ? 1 : -1) * MIN_SCALE;\n        }\n        const delta = [dist[0] / prevDist[0], dist[1] / prevDist[1]];\n        scale = multiply2(dist, startValue);\n\n        const inverseDist = getScaleDist(moveable, dist, datas.fixedDirection, fixedPosition, datas);\n        const inverseDelta = minus(inverseDist, datas.prevInverseDist || [0, 0]);\n\n        datas.prevDist = dist;\n        datas.prevInverseDist = inverseDist;\n        if (\n            scale[0] === prevDist[0] && scale[1] === prevDist[1]\n            && inverseDelta.every(num => !num)\n            && !parentMoveable\n        ) {\n            return false;\n        }\n\n\n        const nextTransform = convertTransformFormat(\n            datas, `scale(${scale.join(\", \")})`, `scale(${dist.join(\", \")})`);\n        const params = fillParams<OnScale>(moveable, e, {\n            offsetWidth: startOffsetWidth,\n            offsetHeight: startOffsetHeight,\n            direction,\n\n            scale,\n            dist,\n            delta,\n\n            isPinch: !!isPinch,\n            ...fillTransformEvent(\n                moveable,\n                nextTransform,\n                inverseDelta,\n                isPinch,\n                e,\n            ),\n        });\n        triggerEvent(moveable, \"onScale\", params);\n\n        return params;\n    },\n    dragControlEnd(moveable: MoveableManagerInterface<ScalableProps>, e: any) {\n        const { datas } = e;\n        if (!datas.isScale) {\n            return false;\n        }\n\n        datas.isScale = false;\n\n        const scaleEndParam = fillEndParams<OnScaleEnd>(moveable, e, {});\n        triggerEvent(moveable, \"onScaleEnd\", scaleEndParam);\n        return scaleEndParam;\n    },\n    dragGroupControlCondition: directionCondition,\n    dragGroupControlStart(moveable: MoveableGroupInterface<any, any>, e: any) {\n        const { datas } = e;\n\n        const params = this.dragControlStart(moveable, e);\n\n        if (!params) {\n            return false;\n        }\n        const originalEvents = fillChildEvents(moveable, \"resizable\", e);\n\n        function setDist(child: MoveableManagerInterface, ev: any) {\n            const fixedDirection = datas.fixedDirection;\n            const fixedPosition = datas.fixedPosition;\n            const startPositions = ev.datas.startPositions || getAbsolutePosesByState(child.state);\n            const pos = getPosByDirection(startPositions, fixedDirection);\n            const [originalX, originalY] = calculate(\n                createRotateMatrix(-moveable.rotation / 180 * Math.PI, 3),\n                [pos[0] - fixedPosition[0], pos[1] - fixedPosition[1], 1],\n                3,\n            );\n            ev.datas.originalX = originalX;\n            ev.datas.originalY = originalY;\n\n            return ev;\n        }\n\n        datas.moveableScale = moveable.scale;\n\n        const events = triggerChildAbles(\n            moveable,\n            this,\n            \"dragControlStart\",\n            e,\n            (child, ev) => {\n                return setDist(child, ev);\n            },\n        );\n\n        const setFixedDirection = (fixedDirection: number[]) => {\n            params.setFixedDirection(fixedDirection);\n            events.forEach((ev, i) => {\n                ev.setFixedDirection(fixedDirection);\n                setDist(ev.moveable, originalEvents[i]);\n            });\n        };\n\n        datas.setFixedDirection = setFixedDirection;\n        const nextParams: OnScaleGroupStart = {\n            ...params,\n            targets: moveable.props.targets!,\n            events,\n            setFixedDirection,\n        };\n        const result = triggerEvent(moveable, \"onScaleGroupStart\", nextParams);\n\n        datas.isScale = result !== false;\n        return datas.isScale ? nextParams : false;\n    },\n    dragGroupControl(moveable: MoveableGroupInterface<any, any>, e: any) {\n        const { datas } = e;\n        if (!datas.isScale) {\n            return;\n        }\n\n        catchEvent(moveable, \"onBeforeScale\", parentEvent => {\n            triggerEvent(moveable, \"onBeforeScaleGroup\", fillParams<OnBeforeScaleGroup>(moveable, e, {\n                ...parentEvent,\n                targets: moveable.props.targets!,\n            }, true));\n        });\n\n        const params = this.dragControl(moveable, e);\n        if (!params) {\n            return;\n        }\n\n        const moveableScale = datas.moveableScale;\n        moveable.scale = [\n            params.scale[0] * moveableScale[0],\n            params.scale[1] * moveableScale[1],\n        ];\n        const keepRatio = moveable.props.keepRatio;\n        const { dist, scale } = params;\n\n        const fixedPosition = datas.fixedPosition;\n\n        const events = triggerChildAbles(\n            moveable,\n            this,\n            \"dragControl\",\n            e,\n            (_, ev) => {\n                const [clientX, clientY] = calculate(\n                    createRotateMatrix(moveable.rotation / 180 * Math.PI, 3),\n                    [\n                        ev.datas.originalX * dist[0],\n                        ev.datas.originalY * dist[1],\n                        1,\n                    ],\n                    3,\n                );\n\n                return {\n                    ...ev,\n                    parentDist: null,\n                    parentScale: scale,\n                    parentKeepRatio: keepRatio,\n                    dragClient: plus(fixedPosition, [clientX, clientY]),\n                };\n            },\n        );\n        const nextParams: OnScaleGroup = {\n            targets: moveable.props.targets!,\n            events,\n            ...params,\n        };\n\n        triggerEvent(moveable, \"onScaleGroup\", nextParams);\n        return nextParams;\n    },\n    dragGroupControlEnd(moveable: MoveableGroupInterface<any, any>, e: any) {\n        const { isDrag, datas } = e;\n\n        if (!datas.isScale) {\n            return;\n        }\n        this.dragControlEnd(moveable, e);\n        const events = triggerChildAbles(moveable, this, \"dragControlEnd\", e);\n\n        const nextParams = fillEndParams<OnScaleGroupEnd>(moveable, e, {\n            targets: moveable.props.targets!,\n            events,\n        });\n\n        triggerEvent(moveable, \"onScaleGroupEnd\", nextParams);\n        return isDrag;\n    },\n    /**\n     * @method Moveable.Scalable#request\n     * @param {Moveable.Scalable.ScalableRequestParam} e - the Scalable's request parameter\n     * @return {Moveable.Requester} Moveable Requester\n     * @example\n\n     * // Instantly Request (requestStart - request - requestEnd)\n     * moveable.request(\"scalable\", { deltaWidth: 10, deltaHeight: 10 }, true);\n     *\n     * // requestStart\n     * const requester = moveable.request(\"scalable\");\n     *\n     * // request\n     * requester.request({ deltaWidth: 10, deltaHeight: 10 });\n     * requester.request({ deltaWidth: 10, deltaHeight: 10 });\n     * requester.request({ deltaWidth: 10, deltaHeight: 10 });\n     *\n     * // requestEnd\n     * requester.requestEnd();\n     */\n    request() {\n        const datas = {};\n        let distWidth = 0;\n        let distHeight = 0;\n\n        return {\n            isControl: true,\n            requestStart(e: IObject<any>) {\n                return { datas, parentDirection: e.direction || [1, 1] };\n            },\n            request(e: IObject<any>) {\n                distWidth += e.deltaWidth;\n                distHeight += e.deltaHeight;\n\n                return { datas, parentDist: [distWidth, distHeight], parentKeepRatio: e.keepRatio };\n            },\n            requestEnd() {\n                return { datas, isDrag: true };\n            },\n        };\n    },\n};\n\n/**\n * Whether or not target can scaled.\n *\n * @name Moveable.Scalable#scalable\n * @default false\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body);\n *\n * moveable.scalable = true;\n */\n\n/**\n * throttle of scaleX, scaleY when scale.\n * @name Moveable.Scalable#throttleScale\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body);\n *\n * moveable.throttleScale = 0.1;\n */\n/**\n * Set directions to show the control box. (default: [\"n\", \"nw\", \"ne\", \"s\", \"se\", \"sw\", \"e\", \"w\"])\n * @name Moveable.Scalable#renderDirections\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     scalable: true,\n *   renderDirections: [\"n\", \"nw\", \"ne\", \"s\", \"se\", \"sw\", \"e\", \"w\"],\n * });\n *\n * moveable.renderDirections = [\"nw\", \"ne\", \"sw\", \"se\"];\n */\n/**\n * When resize or scale, keeps a ratio of the width, height. (default: false)\n * @name Moveable.Scalable#keepRatio\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     scalable: true,\n * });\n *\n * moveable.keepRatio = true;\n */\n/**\n * When the scale starts, the scaleStart event is called.\n * @memberof Moveable.Scalable\n * @event scaleStart\n * @param {Moveable.Scalable.OnScaleStart} - Parameters for the scaleStart event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, { scalable: true });\n * moveable.on(\"scaleStart\", ({ target }) => {\n *     console.log(target);\n * });\n */\n/**\n * When scaling, `beforeScale` is called before `scale` occurs. In `beforeScale`, you can get and set the pre-value before scaling.\n * @memberof Moveable.Scalable\n * @event beforeScale\n * @param {Moveable.Scalable.OnBeforeScale} - Parameters for the `beforeScale` event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, { scalable: true });\n * moveable.on(\"beforeScale\", ({ setFixedDirection }) => {\n *     if (shiftKey) {\n *        setFixedDirection([0, 0]);\n *     }\n * });\n * moveable.on(\"scale\", ({ target, transform, dist }) => {\n *     target.style.transform = transform;\n * });\n */\n\n/**\n * When scaling, the `scale` event is called.\n * @memberof Moveable.Scalable\n * @event scale\n * @param {Moveable.Scalable.OnScale} - Parameters for the `scale` event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, { scalable: true });\n * moveable.on(\"scale\", ({ target, transform, dist }) => {\n *     target.style.transform = transform;\n * });\n */\n/**\n * When the scale finishes, the `scaleEnd` event is called.\n * @memberof Moveable.Scalable\n * @event scaleEnd\n * @param {Moveable.Scalable.OnScaleEnd} - Parameters for the `scaleEnd` event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, { scalable: true });\n * moveable.on(\"scaleEnd\", ({ target, isDrag }) => {\n *     console.log(target, isDrag);\n * });\n */\n\n/**\n* When the group scale starts, the `scaleGroupStart` event is called.\n* @memberof Moveable.Scalable\n* @event scaleGroupStart\n* @param {Moveable.Scalable.OnScaleGroupStart} - Parameters for the `scaleGroupStart` event\n* @example\n* import Moveable from \"moveable\";\n*\n* const moveable = new Moveable(document.body, {\n*     target: [].slice.call(document.querySelectorAll(\".target\")),\n*     scalable: true\n* });\n* moveable.on(\"scaleGroupStart\", ({ targets }) => {\n*     console.log(\"onScaleGroupStart\", targets);\n* });\n*/\n\n/**\n* When the group scale, the `scaleGroup` event is called.\n* @memberof Moveable.Scalable\n* @event scaleGroup\n* @param {Moveable.Scalable.OnScaleGroup} - Parameters for the `scaleGroup` event\n* @example\n* import Moveable from \"moveable\";\n*\n* const moveable = new Moveable(document.body, {\n*     target: [].slice.call(document.querySelectorAll(\".target\")),\n*     scalable: true\n* });\n* moveable.on(\"scaleGroup\", ({ targets, events }) => {\n*     console.log(\"onScaleGroup\", targets);\n*     events.forEach(ev => {\n*         const target = ev.target;\n*         // ev.drag is a drag event that occurs when the group scale.\n*         const left = ev.drag.beforeDist[0];\n*         const top = ev.drag.beforeDist[1];\n*         const scaleX = ev.scale[0];\n*         const scaleY = ev.scale[1];\n*     });\n* });\n*/\n\n/**\n * When the group scale finishes, the `scaleGroupEnd` event is called.\n * @memberof Moveable.Scalable\n * @event scaleGroupEnd\n * @param {Moveable.Scalable.OnScaleGroupEnd} - Parameters for the `scaleGroupEnd` event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\n *     scalable: true\n * });\n * moveable.on(\"scaleGroupEnd\", ({ targets, isDrag }) => {\n *     console.log(\"onScaleGroupEnd\", targets, isDrag);\n * });\n */\n","import {\n    prefix, getLineStyle, getDirection, getAbsolutePosesByState,\n    triggerEvent, fillParams, fillEndParams, getDirectionViewClassName, fillCSSObject,\n} from \"../utils\";\nimport {\n    convertDimension, invert, multiply,\n    calculate,\n    createIdentityMatrix,\n    ignoreDimension,\n    minus,\n    createWarpMatrix,\n    plus,\n} from \"@scena/matrix\";\nimport { NEARBY_POS } from \"../consts\";\nimport {\n    setDragStart, getDragDist, getPosIndexesByDirection, setDefaultTransformIndex,\n    fillTransformStartEvent, resolveTransformEvent,\n    convertTransformFormat, fillOriginalTransform, getTransfromMatrix,\n} from \"../gesto/GestoUtils\";\nimport {\n    WarpableProps, ScalableProps, ResizableProps,\n    Renderer, SnappableProps, SnappableState,\n    OnWarpStart, OnWarp, OnWarpEnd, MoveableManagerInterface,\n} from \"../types\";\nimport { hasClass, dot, getRad } from \"@daybrush/utils\";\nimport { renderAllDirections } from \"../renderDirections\";\nimport { hasGuidelines } from \"./snappable/utils\";\nimport { checkMoveableSnapBounds } from \"./snappable/snapBounds\";\n\nfunction getMiddleLinePos(pos1: number[], pos2: number[]) {\n    return pos1.map((pos, i) => dot(pos, pos2[i], 1, 2));\n}\n\nfunction getTriangleRad(pos1: number[], pos2: number[], pos3: number[]) {\n    // pos1 Rad\n    const rad1 = getRad(pos1, pos2);\n    const rad2 = getRad(pos1, pos3);\n\n    const rad = rad2 - rad1;\n\n    return rad >= 0 ? rad : rad + 2 * Math.PI;\n}\n\nfunction isValidPos(poses1: number[][], poses2: number[][]) {\n    const rad1 = getTriangleRad(poses1[0], poses1[1], poses1[2]);\n    const rad2 = getTriangleRad(poses2[0], poses2[1], poses2[2]);\n    const pi = Math.PI;\n\n    if ((rad1 >= pi && rad2 <= pi) || (rad1 <= pi && rad2 >= pi)) {\n        return false;\n    }\n    return true;\n}\n\n/**\n * @namespace Moveable.Warpable\n * @description Warpable indicates whether the target can be warped(distorted, bented).\n */\nexport default {\n    name: \"warpable\",\n    ableGroup: \"size\",\n    props: {\n        warpable: Boolean,\n        renderDirections: Array,\n        edge: Boolean,\n    } as const,\n    events: {\n        onWarpStart: \"warpStart\",\n        onWarp: \"warp\",\n        onWarpEnd: \"warpEnd\",\n    } as const,\n    viewClassName: getDirectionViewClassName(\"warpable\"),\n    render(moveable: MoveableManagerInterface<ResizableProps & ScalableProps & WarpableProps>, React: Renderer): any[] {\n        const { resizable, scalable, warpable, zoom } = moveable.props;\n\n        if (resizable || scalable || !warpable) {\n            return [];\n        }\n        const { pos1, pos2, pos3, pos4 } = moveable.state;\n\n        const linePosFrom1 = getMiddleLinePos(pos1, pos2);\n        const linePosFrom2 = getMiddleLinePos(pos2, pos1);\n        const linePosFrom3 = getMiddleLinePos(pos1, pos3);\n        const linePosFrom4 = getMiddleLinePos(pos3, pos1);\n        const linePosTo1 = getMiddleLinePos(pos3, pos4);\n        const linePosTo2 = getMiddleLinePos(pos4, pos3);\n        const linePosTo3 = getMiddleLinePos(pos2, pos4);\n        const linePosTo4 = getMiddleLinePos(pos4, pos2);\n\n        return [\n            <div className={prefix(\"line\")}\n                key=\"middeLine1\" style={getLineStyle(linePosFrom1, linePosTo1, zoom)}></div>,\n            <div className={prefix(\"line\")}\n                key=\"middeLine2\" style={getLineStyle(linePosFrom2, linePosTo2, zoom)}></div>,\n            <div className={prefix(\"line\")}\n                key=\"middeLine3\" style={getLineStyle(linePosFrom3, linePosTo3, zoom)}></div>,\n            <div className={prefix(\"line\")}\n                key=\"middeLine4\" style={getLineStyle(linePosFrom4, linePosTo4, zoom)}></div>,\n            ...renderAllDirections(moveable, \"warpable\", React),\n        ];\n    },\n    dragControlCondition(moveable: any, e: any) {\n        if (e.isRequest) {\n            return false;\n        }\n        const target = e.inputEvent.target;\n\n        return hasClass(target, prefix(\"direction\")) && hasClass(target, prefix(\"warpable\"));\n    },\n    dragControlStart(\n        moveable: MoveableManagerInterface<WarpableProps, SnappableState>,\n        e: any,\n    ) {\n        const { datas, inputEvent } = e;\n        const { target } = moveable.props;\n        const { target: inputTarget } = inputEvent;\n        const direction = getDirection(inputTarget, datas);\n\n        if (!direction || !target) {\n            return false;\n        }\n        const state = moveable.state;\n        const {\n            transformOrigin, is3d,\n            targetTransform, targetMatrix,\n            width, height,\n            left, top,\n        } = state;\n\n        datas.datas = {};\n        datas.targetTransform = targetTransform;\n        datas.warpTargetMatrix = is3d ? targetMatrix : convertDimension(targetMatrix, 3, 4);\n        datas.targetInverseMatrix = ignoreDimension(invert(datas.warpTargetMatrix, 4), 3, 4);\n        datas.direction = direction;\n        datas.left = left;\n        datas.top = top;\n        datas.poses = [\n            [0, 0],\n            [width, 0],\n            [0, height],\n            [width, height],\n        ].map(p => minus(p, transformOrigin));\n\n        datas.nextPoses = datas.poses.map(([x, y]: number[]) => calculate(datas.warpTargetMatrix, [x, y, 0, 1], 4));\n        datas.startValue = createIdentityMatrix(4);\n        datas.prevMatrix = createIdentityMatrix(4);\n        datas.absolutePoses = getAbsolutePosesByState(state);\n        datas.posIndexes = getPosIndexesByDirection(direction);\n\n        setDragStart(moveable, e);\n        setDefaultTransformIndex(e, \"matrix3d\");\n\n        state.snapRenderInfo = {\n            request: e.isRequest,\n            direction,\n        };\n\n        const params = fillParams<OnWarpStart>(moveable, e, {\n            set: (matrix: number[]) => {\n                datas.startValue = matrix;\n            },\n            ...fillTransformStartEvent(e),\n        });\n        const result = triggerEvent(moveable, \"onWarpStart\", params);\n        if (result !== false) {\n            datas.isWarp = true;\n        }\n        return datas.isWarp;\n    },\n    dragControl(\n        moveable: MoveableManagerInterface<WarpableProps & SnappableProps, SnappableState>,\n        e: any,\n    ) {\n        const { datas, isRequest } = e;\n        let { distX, distY } = e;\n        const {\n            targetInverseMatrix, prevMatrix, isWarp, startValue,\n            poses,\n            posIndexes,\n            absolutePoses,\n        } = datas;\n\n        if (!isWarp) {\n            return false;\n        }\n        resolveTransformEvent(e, \"matrix3d\");\n        if (hasGuidelines(moveable, \"warpable\")) {\n            const selectedPoses: number[][] = posIndexes.map((index: number) => absolutePoses[index]);\n\n            if (selectedPoses.length > 1) {\n                selectedPoses.push([\n                    (selectedPoses[0][0] + selectedPoses[1][0]) / 2,\n                    (selectedPoses[0][1] + selectedPoses[1][1]) / 2,\n                ]);\n            }\n\n            const {\n                horizontal: horizontalSnapInfo,\n                vertical: verticalSnapInfo,\n            } = checkMoveableSnapBounds(\n                moveable,\n                isRequest,\n                {\n                    horizontal: selectedPoses.map(pos => pos[1] + distY),\n                    vertical: selectedPoses.map(pos => pos[0] + distX),\n                },\n            );\n\n            distY -= horizontalSnapInfo.offset;\n            distX -= verticalSnapInfo.offset;\n        }\n\n        const dist = getDragDist({ datas, distX, distY }, true);\n        const nextPoses = datas.nextPoses.slice();\n\n        posIndexes.forEach((index: number) => {\n            nextPoses[index] = plus(nextPoses[index], dist);\n        });\n\n        if (!NEARBY_POS.every(\n            nearByPoses => isValidPos(nearByPoses.map(i => poses[i]), nearByPoses.map(i => nextPoses[i])),\n        )) {\n            return false;\n        }\n        const h = createWarpMatrix(\n            poses[0],\n            poses[2],\n            poses[1],\n            poses[3],\n            nextPoses[0],\n            nextPoses[2],\n            nextPoses[1],\n            nextPoses[3],\n        );\n\n        if (!h.length) {\n            return false;\n        }\n        // B * A * M\n        const afterMatrix = multiply(targetInverseMatrix, h, 4);\n\n        // B * M * A\n        const matrix = getTransfromMatrix(datas, afterMatrix, true);\n\n        const delta = multiply(invert(prevMatrix, 4), matrix, 4);\n\n        datas.prevMatrix = matrix;\n        const totalMatrix = multiply(startValue, matrix, 4);\n        const nextTransform = convertTransformFormat(\n            datas, `matrix3d(${totalMatrix.join(\", \")})`, `matrix3d(${matrix.join(\", \")})`);\n\n        fillOriginalTransform(e, nextTransform);\n        triggerEvent(moveable, \"onWarp\", fillParams<OnWarp>(moveable, e, {\n            delta,\n            matrix: totalMatrix,\n            dist: matrix,\n            multiply,\n            transform: nextTransform,\n            ...fillCSSObject({\n                transform: nextTransform,\n            }, e),\n        }));\n        return true;\n    },\n    dragControlEnd(\n        moveable: MoveableManagerInterface<WarpableProps>,\n        e: any,\n    ) {\n        const { datas, isDrag } = e;\n        if (!datas.isWarp) {\n            return false;\n        }\n        datas.isWarp = false;\n\n        triggerEvent(moveable, \"onWarpEnd\", fillEndParams<OnWarpEnd>(moveable, e, {}));\n        return isDrag;\n    },\n};\n\n/**\n * Whether or not target can be warped. (default: false)\n * @name Moveable.Warpable#warpable\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body);\n *\n * moveable.warpable = true;\n */\n\n/**\n* Set directions to show the control box. (default: [\"n\", \"nw\", \"ne\", \"s\", \"se\", \"sw\", \"e\", \"w\"])\n* @name Moveable.Warpable#renderDirections\n* @example\n* import Moveable from \"moveable\";\n*\n* const moveable = new Moveable(document.body, {\n*     warpable: true,\n*     renderDirections: [\"n\", \"nw\", \"ne\", \"s\", \"se\", \"sw\", \"e\", \"w\"],\n* });\n*\n* moveable.renderDirections = [\"nw\", \"ne\", \"sw\", \"se\"];\n*/\n/**\n* When the warp starts, the warpStart event is called.\n* @memberof Moveable.Warpable\n* @event warpStart\n* @param {Moveable.Warpable.OnWarpStart} - Parameters for the warpStart event\n* @example\n* import Moveable from \"moveable\";\n*\n* const moveable = new Moveable(document.body, { warpable: true });\n* moveable.on(\"warpStart\", ({ target }) => {\n*     console.log(target);\n* });\n*/\n/**\n * When warping, the warp event is called.\n * @memberof Moveable.Warpable\n * @event warp\n * @param {Moveable.Warpable.OnWarp} - Parameters for the warp event\n * @example\n * import Moveable from \"moveable\";\n * let matrix = [\n *  1, 0, 0, 0,\n *  0, 1, 0, 0,\n *  0, 0, 1, 0,\n *  0, 0, 0, 1,\n * ];\n * const moveable = new Moveable(document.body, { warpable: true });\n * moveable.on(\"warp\", ({ target, transform, delta, multiply }) => {\n *    // target.style.transform = transform;\n *    matrix = multiply(matrix, delta);\n *    target.style.transform = `matrix3d(${matrix.join(\",\")})`;\n * });\n */\n/**\n * When the warp finishes, the warpEnd event is called.\n * @memberof Moveable.Warpable\n * @event warpEnd\n * @param {Moveable.Warpable.OnWarpEnd} - Parameters for the warpEnd event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, { warpable: true });\n * moveable.on(\"warpEnd\", ({ target, isDrag }) => {\n *     console.log(target, isDrag);\n * });\n */\n","import { prefix } from \"./utils\";\n\nexport const AREA_PIECES = /*#__PURE__*/prefix(\"area-pieces\");\nexport const AREA_PIECE = /*#__PURE__*/prefix(\"area-piece\");\nexport const AVOID = /*#__PURE__*/prefix(\"avoid\");\nexport const VIEW_DRAGGING = prefix(\"view-dragging\");\n","import {\n    createWarpMatrix,\n} from \"@scena/matrix\";\nimport { ref } from \"framework-utils\";\nimport { getRect, calculateInversePosition, makeMatrixCSS, prefix } from \"../utils\";\nimport {\n    Renderer, GroupableProps, DragAreaProps, MoveableManagerInterface, MoveableGroupInterface,\n} from \"../types\";\nimport { AREA_PIECE, AVOID, AREA_PIECES } from \"../classNames\";\nimport { addClass, removeClass, requestAnimationFrame } from \"@daybrush/utils\";\n\nfunction restoreStyle(moveable: MoveableManagerInterface) {\n    const el = moveable.areaElement;\n\n    if (!el) {\n        return;\n    }\n    const { width, height } = moveable.state;\n\n    removeClass(el, AVOID);\n\n    el.style.cssText += `left: 0px; top: 0px; width: ${width}px; height: ${height}px`;\n}\n\nfunction renderPieces(React: Renderer): any {\n    return (<div key=\"area_pieces\" className={AREA_PIECES}>\n        <div className={AREA_PIECE}></div>\n        <div className={AREA_PIECE}></div>\n        <div className={AREA_PIECE}></div>\n        <div className={AREA_PIECE}></div>\n    </div>);\n}\nexport default {\n    name: \"dragArea\",\n    props: {\n        dragArea: Boolean,\n        passDragArea: Boolean,\n    } as const,\n    events: {\n        onClick: \"click\",\n        onClickGroup: \"clickGroup\",\n    } as const,\n    render(moveable: MoveableManagerInterface<GroupableProps>, React: Renderer): any[] {\n        const { target, dragArea, groupable, passDragArea } = moveable.props;\n        const { width, height, renderPoses } = moveable.getState();\n\n        const className = passDragArea ? prefix(\"area\", \"pass\") : prefix(\"area\");\n        if (groupable) {\n            return [\n                <div key=\"area\" ref={ref(moveable, \"areaElement\")} className={className}></div>,\n                renderPieces(React),\n            ];\n        }\n        if (!target || !dragArea) {\n            return [];\n        }\n        const h = createWarpMatrix(\n            [0, 0],\n            [width, 0],\n            [0, height],\n            [width, height],\n            renderPoses[0],\n            renderPoses[1],\n            renderPoses[2],\n            renderPoses[3],\n        );\n        const transform = h.length ? makeMatrixCSS(h, true) : \"none\";\n\n        return [\n            <div key=\"area\" ref={ref(moveable, \"areaElement\")} className={className} style={{\n                top: \"0px\",\n                left: \"0px\",\n                width: `${width}px`,\n                height: `${height}px`,\n                transformOrigin: \"0 0\",\n                transform,\n            }}></div>,\n            renderPieces(React),\n        ];\n    },\n    dragStart(moveable: MoveableManagerInterface, { datas, clientX, clientY, inputEvent }: any) {\n        if (!inputEvent) {\n            return false;\n        }\n        datas.isDragArea = false;\n        const areaElement = moveable.areaElement;\n        const state = moveable.state;\n        const {\n            moveableClientRect,\n            renderPoses,\n            rootMatrix,\n            is3d,\n        } = state;\n        const { left, top } = moveableClientRect;\n        const {\n            left: relativeLeft,\n            top: relativeTop,\n            width,\n            height,\n        } = getRect(renderPoses);\n        const n = is3d ? 4 : 3;\n        let [posX, posY] = calculateInversePosition(rootMatrix, [clientX - left, clientY - top], n);\n\n        posX -= relativeLeft;\n        posY -= relativeTop;\n        const rects = [\n            { left: relativeLeft, top: relativeTop, width, height: posY - 10 },\n            { left: relativeLeft, top: relativeTop, width: posX - 10, height },\n            { left: relativeLeft, top: relativeTop + posY + 10, width, height: height - posY - 10 },\n            { left: relativeLeft + posX + 10, top: relativeTop, width: width - posX - 10, height },\n        ];\n\n        const children = [].slice.call(areaElement.nextElementSibling!.children) as HTMLElement[];\n        rects.forEach((rect, i) => {\n            children[i].style.cssText\n                = `left: ${rect.left}px;top: ${rect.top}px; width: ${rect.width}px; height: ${rect.height}px;`;\n        });\n        addClass(areaElement, AVOID);\n        state.disableNativeEvent = true;\n        return;\n    },\n    drag(moveable: MoveableManagerInterface, { datas, inputEvent }: any) {\n        this.enableNativeEvent(moveable);\n        if (!inputEvent) {\n            return false;\n        }\n        if (!datas.isDragArea) {\n            datas.isDragArea = true;\n            restoreStyle(moveable);\n        }\n    },\n    dragEnd(moveable: MoveableManagerInterface<DragAreaProps>, e: any) {\n        this.enableNativeEvent(moveable);\n        const { inputEvent, datas } = e;\n        if (!inputEvent) {\n            return false;\n        }\n        if (!datas.isDragArea) {\n            restoreStyle(moveable);\n        }\n    },\n    dragGroupStart(moveable: MoveableGroupInterface, e: any) {\n        return this.dragStart(moveable, e);\n    },\n    dragGroup(moveable: MoveableGroupInterface, e: any) {\n        return this.drag(moveable, e);\n    },\n    dragGroupEnd(\n        moveable: MoveableGroupInterface<DragAreaProps>,\n        e: any,\n    ) {\n        return this.dragEnd(moveable, e);\n    },\n    unset(moveable: MoveableManagerInterface<DragAreaProps>) {\n        restoreStyle(moveable);\n        moveable.state.disableNativeEvent = false;\n    },\n    enableNativeEvent(moveable: MoveableManagerInterface<DragAreaProps>) {\n        const state = moveable.state;\n        if (state.disableNativeEvent) {\n            requestAnimationFrame(() => {\n                state.disableNativeEvent = false;\n            });\n        }\n    },\n};\n\n/**\n * Add an event to the moveable area instead of the target for stopPropagation. (default: false, true in group)\n * @name Moveable#dragArea\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *  dragArea: false,\n * });\n */\n/**\n * Set `pointerEvents: none;` css to pass events in dragArea. (default: false)\n * @name Moveable#passDragArea\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *  dragArea: false,\n * });\n */\n","import { prefix, getControlTransform } from \"../utils\";\nimport { Renderer, OriginOptions, MoveableManagerInterface } from \"../types\";\nimport { makeAble } from \"./AbleManager\";\n\nexport default makeAble(\"origin\", {\n    render(moveable: MoveableManagerInterface<OriginOptions>, React: Renderer): any[] {\n        const { zoom } = moveable.props;\n        const { beforeOrigin, rotation } = moveable.getState();\n\n        return [\n            <div className={prefix(\"control\", \"origin\")}\n                style={getControlTransform(rotation, zoom!, beforeOrigin)} key=\"beforeOrigin\"></div>,\n        ];\n    },\n});\n\n/**\n * Whether or not the origin controlbox will be visible or not (default: true)\n * @name Moveable#origin\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body);\n *\n * moveable.origin = true;\n */\n","\nimport {\n    ScrollableProps, OnScroll, MoveableManagerInterface,\n    MoveableGroupInterface, MoveableRefType,\n} from \"../types\";\nimport { triggerEvent, fillParams, getRefTarget } from \"../utils\";\nimport DragScroll from \"@scena/dragscroll\";\n\nfunction getDefaultScrollPosition(e: { scrollContainer: HTMLElement, direction: number[] }) {\n    const scrollContainer = e.scrollContainer;\n\n    return [\n        scrollContainer.scrollLeft,\n        scrollContainer.scrollTop,\n    ];\n}\n/**\n * @namespace Moveable.Scrollable\n * @description Whether or not target can be scrolled to the scroll container (default: false)\n */\nexport default {\n    name: \"scrollable\",\n    canPinch: true,\n    props: {\n        scrollable: Boolean,\n        scrollContainer: Object,\n        scrollThreshold: Number,\n        scrollThrottleTime: Number,\n        getScrollPosition: Function,\n        scrollOptions: Object,\n    } as const,\n    events: {\n        onScroll: \"scroll\",\n        onScrollGroup: \"scrollGroup\",\n    } as const,\n    dragRelation: \"strong\",\n    dragStart(moveable: MoveableManagerInterface<ScrollableProps, Record<string, any>>, e: any) {\n        const props = moveable.props;\n        const {\n            scrollContainer = moveable.getContainer() as HTMLElement,\n            scrollOptions,\n        } = props;\n\n        const dragScroll = new DragScroll();\n        const scrollContainerElement = getRefTarget<HTMLElement>(scrollContainer, true);\n\n        e.datas.dragScroll = dragScroll;\n        moveable.state.dragScroll = dragScroll;\n\n        const gestoName = e.isControl ? \"controlGesto\" : \"targetGesto\";\n        const targets = e.targets;\n\n        dragScroll.on(\"scroll\", ({ container, direction }) => {\n            const params = fillParams<OnScroll>(moveable, e, {\n                scrollContainer: container,\n                direction,\n            }) as any;\n\n            const eventName = targets ? \"onScrollGroup\" : \"onScroll\" as any;\n            if (targets) {\n                params.targets = targets;\n            }\n            triggerEvent(moveable, eventName, params);\n        }).on(\"move\", ({ offsetX, offsetY, inputEvent }) => {\n            moveable[gestoName].scrollBy(offsetX, offsetY, inputEvent.inputEvent, true);\n        }).on(\"scrollDrag\", ({ next }) => {\n            next(moveable[gestoName].getCurrentEvent());\n        });\n        dragScroll.dragStart(e, {\n            container: scrollContainerElement!,\n            ...scrollOptions,\n        });\n    },\n    checkScroll(moveable: MoveableManagerInterface<ScrollableProps>, e: any) {\n        const dragScroll = e.datas.dragScroll as DragScroll;\n\n        if (!dragScroll) {\n            return;\n        }\n        const {\n            scrollContainer = moveable.getContainer() as MoveableRefType<HTMLElement>,\n            scrollThreshold = 0,\n            scrollThrottleTime = 0,\n            getScrollPosition = getDefaultScrollPosition,\n            scrollOptions,\n        } = moveable.props;\n\n        dragScroll.drag(e, {\n            container: scrollContainer!,\n            threshold: scrollThreshold,\n            throttleTime: scrollThrottleTime,\n            getScrollPosition: (ev: any) => {\n                return getScrollPosition({ scrollContainer: ev.container, direction: ev.direction });\n            },\n            ...scrollOptions,\n        });\n\n        return true;\n    },\n    drag(moveable: MoveableManagerInterface<ScrollableProps>, e: any) {\n        return this.checkScroll(moveable, e);\n    },\n    dragEnd(moveable: MoveableManagerInterface<ScrollableProps>, e: any) {\n        e.datas.dragScroll.dragEnd();\n        e.datas.dragScroll = null;\n    },\n    dragControlStart(moveable: MoveableManagerInterface<ScrollableProps>, e: any) {\n        return this.dragStart(moveable, { ...e, isControl: true });\n    },\n    dragControl(moveable: MoveableManagerInterface<ScrollableProps>, e: any) {\n        return this.drag(moveable, e);\n    },\n    dragControlEnd(moveable: MoveableManagerInterface<ScrollableProps>, e: any) {\n        return this.dragEnd(moveable, e);\n    },\n    dragGroupStart(moveable: MoveableGroupInterface, e: any) {\n        return this.dragStart(moveable, { ...e, targets: moveable.props.targets });\n    },\n    dragGroup(moveable: MoveableGroupInterface, e: any) {\n        return this.drag(moveable, { ...e, targets: moveable.props.targets });\n    },\n    dragGroupEnd(moveable: MoveableGroupInterface, e: any) {\n        return this.dragEnd(moveable, { ...e, targets: moveable.props.targets });\n    },\n    dragGroupControlStart(moveable: MoveableGroupInterface, e: any) {\n        return this.dragStart(moveable, { ...e, targets: moveable.props.targets, isControl: true });\n    },\n    dragGroupControl(moveable: MoveableGroupInterface, e: any) {\n        return this.drag(moveable, { ...e, targets: moveable.props.targets });\n    },\n    dragGroupControEnd(moveable: MoveableGroupInterface, e: any) {\n        return this.dragEnd(moveable, { ...e, targets: moveable.props.targets });\n    },\n    unset(moveable: MoveableManagerInterface<ScrollableProps, Record<string, any>>) {\n        const state = moveable.state;\n\n        state.dragScroll?.dragEnd();\n        state.dragScroll = null;\n    },\n};\n\n/**\n * When the drag cursor leaves the scrollContainer, the `scroll` event occur to scroll.\n * @memberof Moveable.Scrollable\n * @event scroll\n * @param {Moveable.Scrollable.OnScroll} - Parameters for the `scroll` event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     target: document.querySelector(\".target\"),\n * });\n * moveable.on(\"scroll\", ({ scrollContainer, direction }) => {\n *   scrollContainer.scrollLeft += direction[0] * 10;\n *   scrollContainer.scrollTop += direction[1] * 10;\n * });\n */\n\n/**\n * When the drag cursor leaves the scrollContainer, the `scrollGroup` event occur to scroll in group.\n * @memberof Moveable.Scrollable\n * @event scrollGroup\n * @param {Moveable.Scrollable.OnScrollGroup} - Parameters for the `scrollGroup` event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\n * });\n * moveable.on(\"scroll\", ({ scrollContainer, direction }) => {\n *   scrollContainer.scrollLeft += direction[0] * 10;\n *   scrollContainer.scrollTop += direction[1] * 10;\n * });\n */\n","export default {\n    name: \"\",\n    props: {\n        target: Object,\n        dragTarget: Object,\n        container: Object,\n        portalContainer: Object,\n        rootContainer: Object,\n        useResizeObserver: Boolean,\n        zoom: Number,\n        transformOrigin: Array,\n        edge: Object,\n        ables: Array,\n        className: String,\n        pinchThreshold: Number,\n        pinchOutside: Boolean,\n        triggerAblesSimultaneously: Boolean,\n        checkInput: Boolean,\n        cspNonce: String,\n        translateZ: Number,\n        hideDefaultLines: Boolean,\n        props: Object,\n        flushSync: Function,\n        stopPropagation: Boolean,\n        preventClickEventOnDrag: Boolean,\n        preventClickDefault: Boolean,\n        viewContainer: Object,\n        persistData: Object,\n        useAccuratePosition: Boolean,\n        firstRenderState: Object,\n        linePadding: Boolean,\n    } as const,\n    events: {\n        onChangeTargets: \"changeTargets\",\n    } as const,\n};\n","import { prefix, makeMatrixCSS } from \"../utils\";\nimport { Renderer, MoveableManagerInterface } from \"../types\";\nimport { createWarpMatrix } from \"@scena/matrix\";\nimport { makeAble } from \"./AbleManager\";\n\nexport default makeAble(\"padding\", {\n    render(moveable: MoveableManagerInterface, React: Renderer): any[] {\n        const props = moveable.props;\n        if (props.dragArea) {\n            return [];\n        }\n        const padding = props.padding || {};\n        const {\n            left = 0,\n            top = 0,\n            right = 0,\n            bottom = 0,\n        } = padding;\n        const {\n            renderPoses,\n            pos1,\n            pos2,\n            pos3,\n            pos4,\n        } = moveable.getState();\n\n        const poses = [pos1, pos2, pos3, pos4];\n        const paddingDirections: number[][] = [];\n\n        if (left > 0) {\n            paddingDirections.push([0, 2]);\n        }\n        if (top > 0) {\n            paddingDirections.push([0, 1]);\n        }\n        if (right > 0) {\n            paddingDirections.push([1, 3]);\n        }\n        if (bottom > 0) {\n            paddingDirections.push([2, 3]);\n        }\n        return paddingDirections.map(([dir1, dir2], i) => {\n            const paddingPos1 = poses[dir1];\n            const paddingPos2 = poses[dir2];\n            const paddingPos3 = renderPoses[dir1];\n            const paddingPos4 = renderPoses[dir2];\n\n            const h = createWarpMatrix(\n                [0, 0],\n                [100, 0],\n                [0, 100],\n                [100, 100],\n                paddingPos1,\n                paddingPos2,\n                paddingPos3,\n                paddingPos4,\n            );\n            if (!h.length) {\n                return undefined;\n            }\n            return (<div key={`padding${i}`} className={prefix(\"padding\")} style={{\n                transform: makeMatrixCSS(h, true),\n            }}></div>);\n        });\n    },\n});\n\n/**\n * Add padding around the target to increase the drag area.\n * @name Moveable#padding\n * @default null\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *  target: document.querySelector(\".target\"),\n *  padding: { left: 0, top: 0, right: 0, bottom: 0 },\n * });\n * moveable.padding = { left: 10, top: 10, right: 10, bottom: 10 },\n * moveable.updateRect();\n */\n","import { convertCSSSize } from \"../../utils\";\nimport { ControlPose } from \"../../types\";\nimport { convertUnitSize } from \"@daybrush/utils\";\n\nconst RADIUS_DIRECTIONS = [\"nw\", \"ne\", \"se\", \"sw\"] as const;\n\nfunction calculateRatio(values: number[], size: number) {\n    const sumSize = values[0] + values[1];\n    const sumRatio = sumSize > size ? size / sumSize : 1;\n\n    values[0] *= sumRatio;\n    values[1] = size - values[1] * sumRatio;\n\n    return values;\n}\nexport const HORIZONTAL_RADIUS_ORDER = [1, 2, 5, 6];\nexport const VERTICAL_RADIUS_ORDER = [0, 3, 4, 7];\nexport const HORIZONTAL_RADIUS_DIRECTIONS = [1, -1, -1, 1] as const;\nexport const VERTICAL_RADIUS_DIRECTIONS = [1, 1, -1, -1] as const;\n\nexport function getRadiusStyles(\n    nextPoses: ControlPose[],\n    isRelative: boolean,\n    width: number,\n    height: number,\n    left = 0,\n    top = 0,\n    right: number = width,\n    bottom: number = height,\n) {\n    const clipStyles: string[] = [];\n    let isVertical = false;\n\n    const radiusPoses = nextPoses.filter(pos => !pos.virtual);\n    const raws = radiusPoses.map(posInfo => {\n        const { horizontal, vertical, pos } = posInfo;\n\n        if (vertical && !isVertical) {\n            isVertical = true;\n            clipStyles.push(\"/\");\n        }\n\n        if (isVertical) {\n            const rawPos = Math.max(0, vertical === 1 ? pos[1] - top : bottom - pos[1]);\n            clipStyles.push(convertCSSSize(rawPos, height, isRelative));\n\n            return rawPos;\n        } else {\n            const rawPos = Math.max(0, horizontal === 1 ? pos[0] - left : right - pos[0]);\n            clipStyles.push(convertCSSSize(rawPos, width, isRelative));\n\n            return rawPos;\n        }\n    });\n\n    return {\n        radiusPoses,\n        styles: clipStyles,\n        raws,\n    };\n}\nexport function getRadiusRange(controlPoses: ControlPose[]) {\n    // [start, length]\n    const horizontalRange = [0, 0];\n    const verticalRange = [0, 0];\n    const length = controlPoses.length;\n\n    for (let i = 0; i < length; ++i) {\n        const clipPose = controlPoses[i];\n\n        if (!clipPose.sub) {\n            continue;\n        }\n        if (clipPose.horizontal) {\n            if (horizontalRange[1] === 0) {\n                horizontalRange[0] = i;\n            }\n            horizontalRange[1] = i - horizontalRange[0] + 1;\n            verticalRange[0] = i + 1;\n        }\n        if (clipPose.vertical) {\n            if (verticalRange[1] === 0) {\n                verticalRange[0] = i;\n            }\n            verticalRange[1] = i - verticalRange[0] + 1;\n        }\n    }\n\n    return {\n        horizontalRange,\n        verticalRange,\n    };\n}\nexport function getRadiusValues(\n    values: string[],\n    width: number,\n    height: number,\n    left: number,\n    top: number,\n    minCounts: number[] = [0, 0],\n    full = false,\n): ControlPose[] {\n    const splitIndex = values.indexOf(\"/\");\n    const splitLength = (splitIndex > -1 ? values.slice(0, splitIndex) : values).length;\n    const horizontalValues = values.slice(0, splitLength);\n    const verticalValues = values.slice(splitLength + 1);\n    const horizontalValuesLength = horizontalValues.length;\n    const verticalValuesLength = verticalValues.length;\n    const hasVerticalValues = verticalValuesLength > 0;\n    const [\n        nwValue = \"0px\",\n        neValue = nwValue,\n        seValue = nwValue,\n        swValue = neValue,\n    ] = horizontalValues;\n    const [\n        wnValue = nwValue,\n        enValue = hasVerticalValues ? wnValue : neValue,\n        esValue = hasVerticalValues ? wnValue : seValue,\n        wsValue = hasVerticalValues ? enValue : swValue,\n    ] = verticalValues;\n\n    const horizontalRawPoses = [nwValue, neValue, seValue, swValue].map(pos => convertUnitSize(pos, width));\n    const verticalRawPoses = [wnValue, enValue, esValue, wsValue].map(pos => convertUnitSize(pos, height));\n    const horizontalPoses = horizontalRawPoses.slice();\n    const verticalPoses = verticalRawPoses.slice();\n\n    [horizontalPoses[0], horizontalPoses[1]] = calculateRatio(\n        [horizontalPoses[0], horizontalPoses[1]],\n        width,\n    );\n    [horizontalPoses[3], horizontalPoses[2]] = calculateRatio(\n        [horizontalPoses[3], horizontalPoses[2]],\n        width,\n    );\n    [verticalPoses[0], verticalPoses[3]] = calculateRatio(\n        [verticalPoses[0], verticalPoses[3]], height,\n    );\n    [verticalPoses[1], verticalPoses[2]] = calculateRatio(\n        [verticalPoses[1], verticalPoses[2]], height,\n    );\n\n    const nextHorizontalPoses = full\n        ? horizontalPoses\n        : horizontalPoses.slice(0, Math.max(minCounts[0], horizontalValuesLength));\n    const nextVerticalPoses = full\n        ? verticalPoses\n        : verticalPoses.slice(0, Math.max(minCounts[1], verticalValuesLength));\n\n    return [\n        ...nextHorizontalPoses.map((pos, i) => {\n            const direction = RADIUS_DIRECTIONS[i];\n\n            return {\n                virtual: i >= horizontalValuesLength,\n                horizontal: HORIZONTAL_RADIUS_DIRECTIONS[i],\n                vertical: 0,\n                pos: [left + pos, top + (VERTICAL_RADIUS_DIRECTIONS[i] === -1 ? height : 0)],\n                sub: true,\n                raw: horizontalRawPoses[i],\n                direction,\n            };\n        }),\n        ...nextVerticalPoses.map((pos, i) => {\n            const direction = RADIUS_DIRECTIONS[i];\n\n            return {\n                virtual: i >= verticalValuesLength,\n                horizontal: 0,\n                vertical: VERTICAL_RADIUS_DIRECTIONS[i],\n                pos: [left + (HORIZONTAL_RADIUS_DIRECTIONS[i] === -1 ? width : 0), top + pos],\n                sub: true,\n                raw: verticalRawPoses[i],\n                direction,\n            };\n        }),\n    ];\n}\nexport function removeRadiusPos(\n    controlPoses: ControlPose[],\n    poses: number[][],\n    index: number,\n    startIndex: number,\n    length: number = poses.length,\n) {\n    const {\n        horizontalRange,\n        verticalRange,\n    } = getRadiusRange(controlPoses.slice(startIndex));\n    const radiuslIndex = index - startIndex;\n    let deleteCount = 0;\n\n    if (radiuslIndex === 0) {\n        deleteCount = length;\n    } else if (radiuslIndex > 0 && radiuslIndex < horizontalRange[1]) {\n        deleteCount = horizontalRange[1] - radiuslIndex;\n    } else if (radiuslIndex >= verticalRange[0]) {\n        deleteCount = verticalRange[0] + verticalRange[1] - radiuslIndex;\n    } else {\n        return;\n    }\n    controlPoses.splice(index, deleteCount);\n    poses.splice(index, deleteCount);\n}\nexport function addRadiusPos(\n    controlPoses: ControlPose[],\n    poses: number[][],\n    startIndex: number,\n    horizontalIndex: number,\n    verticalIndex: number,\n    distX: number,\n    distY: number,\n    right: number,\n    bottom: number,\n    left = 0,\n    top = 0,\n) {\n    const {\n        horizontalRange,\n        verticalRange,\n    } = getRadiusRange(controlPoses.slice(startIndex));\n    if (horizontalIndex > -1) {\n        const radiusX = HORIZONTAL_RADIUS_DIRECTIONS[horizontalIndex] === 1\n            ? distX - left\n            : right - distX;\n        for (let i = horizontalRange[1]; i <= horizontalIndex; ++i) {\n            const y = VERTICAL_RADIUS_DIRECTIONS[i] === 1 ? top : bottom;\n            let x = 0;\n            if (horizontalIndex === i) {\n                x = distX;\n            } else if (i === 0) {\n                x = left + radiusX;\n            } else if (HORIZONTAL_RADIUS_DIRECTIONS[i] === -1) {\n                x = right - (poses[startIndex][0] - left);\n            }\n            controlPoses.splice(startIndex + i, 0, {\n                horizontal: HORIZONTAL_RADIUS_DIRECTIONS[i],\n                vertical: 0,\n                pos: [x, y],\n            });\n            poses.splice(startIndex + i, 0, [x, y]);\n\n            if (i === 0) {\n                break;\n            }\n        }\n    } else if (verticalIndex > - 1) {\n        const radiusY = VERTICAL_RADIUS_DIRECTIONS[verticalIndex] === 1\n            ? distY - top\n            : bottom - distY;\n        if (horizontalRange[1] === 0 && verticalRange[1] === 0) {\n            const pos = [\n                left + radiusY,\n                top,\n            ];\n            controlPoses.push({\n                horizontal: HORIZONTAL_RADIUS_DIRECTIONS[0],\n                vertical: 0,\n                pos,\n            });\n            poses.push(pos);\n        }\n\n        const startVerticalIndex = verticalRange[0];\n        for (let i = verticalRange[1]; i <= verticalIndex; ++i) {\n            const x = HORIZONTAL_RADIUS_DIRECTIONS[i] === 1 ? left : right;\n            let y = 0;\n            if (verticalIndex === i) {\n                y = distY;\n            } else if (i === 0) {\n                y = top + radiusY;\n            } else if (VERTICAL_RADIUS_DIRECTIONS[i] === 1) {\n                y = poses[startIndex + startVerticalIndex][1];\n            } else if (VERTICAL_RADIUS_DIRECTIONS[i] === -1) {\n                y = bottom - (poses[startIndex + startVerticalIndex][1] - top);\n            }\n            controlPoses.push({\n                horizontal: 0,\n                vertical: VERTICAL_RADIUS_DIRECTIONS[i],\n                pos: [x, y],\n            });\n            poses.push([x, y]);\n            if (i === 0) {\n                break;\n            }\n        }\n    }\n}\nexport function splitRadiusPoses(\n    controlPoses: ControlPose[],\n    raws: number[] = controlPoses.map(pos => pos.raw!),\n) {\n    const horizontals = controlPoses\n        .map((pos, i) => pos.horizontal ? raws[i] : null).filter(pos => pos != null) as number[];\n    const verticals = controlPoses\n        .map((pos, i) => pos.vertical ? raws[i] : null).filter(pos => pos != null) as number[];\n\n    return {\n        horizontals,\n        verticals,\n    };\n}\n","import { splitBracket, splitComma, convertUnitSize, splitSpace, splitUnit } from \"@daybrush/utils\";\nimport { minus } from \"@scena/matrix\";\nimport { convertCSSSize } from \"../../utils\";\nimport { getRadiusStyles, getRadiusValues } from \"../roundable/borderRadius\";\nimport { MoveableManagerInterface, ClippableProps, ControlPose } from \"../../types\";\nimport { getMinMaxs } from \"overlap-area\";\n\n\nexport const CLIP_DIRECTIONS = [\n    [0, -1, \"n\"],\n    [1, 0, \"e\"],\n] as const;\n\nexport const CLIP_RECT_DIRECTIONS = [\n    [-1, -1, \"nw\"],\n    [0, -1, \"n\"],\n    [1, -1, \"ne\"],\n    [1, 0, \"e\"],\n    [1, 1, \"se\"],\n    [0, 1, \"s\"],\n    [-1, 1, \"sw\"],\n    [-1, 0, \"w\"],\n] as const;\n\n// 1 2 5 6 0 3 4 7\n// 0 1 2 3 4 5 6 7\n\nexport function getClipStyles(\n    moveable: MoveableManagerInterface<ClippableProps>,\n    clipPath: ReturnType<typeof getClipPath>,\n    poses: number[][],\n) {\n    const {\n        clipRelative,\n    } = moveable.props;\n    const {\n        width,\n        height,\n    } = moveable.state;\n    const {\n        type: clipType,\n        poses: clipPoses,\n    } = clipPath!;\n\n    const isRect = clipType === \"rect\";\n    const isCircle = clipType === \"circle\";\n    if (clipType === \"polygon\") {\n        return poses.map(pos => `${convertCSSSize(pos[0], width, clipRelative)} ${convertCSSSize(pos[1], height, clipRelative)}`);\n    } else if (isRect || clipType === \"inset\") {\n        const top = poses[1][1];\n        const right = poses[3][0];\n        const left = poses[7][0];\n        const bottom = poses[5][1];\n\n        if (isRect) {\n            return [\n                top,\n                right,\n                bottom,\n                left,\n            ].map(pos => `${pos}px`);\n        }\n        const clipStyles\n            = [top, width - right, height - bottom, left]\n                .map((pos, i) => convertCSSSize(pos, i % 2 ? width : height, clipRelative));\n\n        if (poses.length > 8) {\n            const [subWidth, subHeight] = minus(poses[4], poses[0]);\n\n            clipStyles.push(\"round\", ...getRadiusStyles(\n                clipPoses.slice(8).map((info, i) => {\n                    return {\n                        ...info,\n                        pos: poses[i],\n                    };\n                }),\n                clipRelative!,\n                subWidth,\n                subHeight,\n                left, top, right, bottom,\n            ).styles);\n        }\n        return clipStyles;\n    } else if (isCircle || clipType === \"ellipse\") {\n        const center = poses[0];\n        const ry = convertCSSSize(\n            Math.abs(poses[1][1] - center[1]),\n            isCircle ? Math.sqrt((width * width + height * height) / 2) : height,\n            clipRelative,\n        );\n\n        const clipStyles = isCircle ? [ry]\n            : [convertCSSSize(Math.abs(poses[2][0] - center[0]), width, clipRelative), ry];\n\n        clipStyles.push(\n            \"at\", convertCSSSize(center[0], width, clipRelative),\n            convertCSSSize(center[1], height, clipRelative));\n\n        return clipStyles;\n    }\n}\n\nexport function getRectPoses(top: number, right: number, bottom: number, left: number): ControlPose[] {\n    const xs = [left, (left + right) / 2, right];\n    const ys = [top, (top + bottom) / 2, bottom];\n\n    return CLIP_RECT_DIRECTIONS.map(([dirx, diry, dir]) => {\n        const x = xs[dirx + 1];\n        const y = ys[diry + 1];\n        return {\n            vertical: Math.abs(diry),\n            horizontal: Math.abs(dirx),\n            direction: dir,\n            pos: [x, y],\n        };\n    });\n}\n\nexport function getControlSize(\n    controlPoses: ControlPose[],\n) {\n    const xRange = [Infinity, -Infinity];\n    const yRange = [Infinity, -Infinity];\n\n    controlPoses.forEach(({ pos }) => {\n        xRange[0] = Math.min(xRange[0], pos[0]);\n        xRange[1] = Math.max(xRange[1], pos[0]);\n        yRange[0] = Math.min(yRange[0], pos[1]);\n        yRange[1] = Math.max(yRange[1], pos[1]);\n    });\n\n    return [\n        Math.abs(xRange[1] - xRange[0]),\n        Math.abs(yRange[1] - yRange[0]),\n    ];\n}\n\n\nexport function getClipPath(\n    target: HTMLElement | SVGElement | undefined | null,\n    width: number,\n    height: number,\n    defaultClip?: string,\n    customClip?: string,\n) {\n    if (!target) {\n        return;\n    }\n    let clipText: string | undefined = customClip;\n\n    if (!clipText) {\n        const style = getComputedStyle(target!);\n        const clipPath = style.clipPath!;\n\n        clipText = clipPath !== \"none\" ? clipPath : style.clip!;\n    }\n    if (!clipText || clipText === \"none\" || clipText === \"auto\") {\n        clipText = defaultClip;\n\n        if (!clipText) {\n            return;\n        }\n    }\n    const {\n        prefix: clipPrefix = clipText,\n        value = \"\",\n    } = splitBracket(clipText);\n    const isCircle = clipPrefix === \"circle\";\n    let splitter = \" \";\n\n    if (clipPrefix === \"polygon\") {\n        const values = splitComma(value! || `0% 0%, 100% 0%, 100% 100%, 0% 100%`);\n        splitter = \",\";\n\n        const poses: ControlPose[] = values.map(pos => {\n            const [xPos, yPos] = pos.split(\" \");\n\n            return {\n                vertical: 1,\n                horizontal: 1,\n                pos: [\n                    convertUnitSize(xPos, width),\n                    convertUnitSize(yPos, height),\n                ],\n            };\n        });\n        const minMaxs = getMinMaxs(poses.map(pos => pos.pos));\n\n        return {\n            type: clipPrefix,\n            clipText,\n            poses,\n            splitter,\n            left: minMaxs.minX,\n            right: minMaxs.maxX,\n            top: minMaxs.minY,\n            bottom: minMaxs.maxY,\n        } as const;\n    } else if (isCircle || clipPrefix === \"ellipse\") {\n        let xPos = \"\";\n        let yPos = \"\";\n        let radiusX = 0;\n        let radiusY = 0;\n        const values = splitSpace(value!);\n\n        if (isCircle) {\n            let radius = \"\";\n            [radius = \"50%\", , xPos = \"50%\", yPos = \"50%\"] = values;\n\n            radiusX = convertUnitSize(radius, Math.sqrt((width * width + height * height) / 2));\n            radiusY = radiusX;\n        } else {\n            let xRadius = \"\";\n            let yRadius = \"\";\n            [xRadius = \"50%\", yRadius = \"50%\", , xPos = \"50%\", yPos = \"50%\"] = values;\n\n            radiusX = convertUnitSize(xRadius, width);\n            radiusY = convertUnitSize(yRadius, height);\n        }\n        const centerPos = [\n            convertUnitSize(xPos, width),\n            convertUnitSize(yPos, height),\n        ];\n        const poses: ControlPose[] = [\n            {\n                vertical: 1,\n                horizontal: 1,\n                pos: centerPos,\n                direction: \"nesw\",\n            },\n            ...CLIP_DIRECTIONS.slice(0, isCircle ? 1 : 2).map(dir => ({\n                vertical: Math.abs(dir[1]),\n                horizontal: dir[0],\n                direction: dir[2],\n                sub: true,\n                pos: [\n                    centerPos[0] + dir[0] * radiusX,\n                    centerPos[1] + dir[1] * radiusY,\n                ],\n            })),\n        ];\n        return {\n            type: clipPrefix as \"circle\" | \"ellipse\",\n            clipText,\n            radiusX,\n            radiusY,\n            left: centerPos[0] - radiusX,\n            top: centerPos[1] - radiusY,\n            right: centerPos[0] + radiusX,\n            bottom: centerPos[1] + radiusY,\n            poses,\n            splitter,\n        } as const;\n    } else if (clipPrefix === \"inset\") {\n        const values = splitSpace(value! || \"0 0 0 0\");\n        const roundIndex = values.indexOf(\"round\");\n\n        const rectLength = (roundIndex > -1 ? values.slice(0, roundIndex) : values).length;\n        const radiusValues = values.slice(rectLength + 1);\n        const [\n            topValue,\n            rightValue = topValue,\n            bottomValue = topValue,\n            leftValue = rightValue,\n        ] = values.slice(0, rectLength);\n        const [top, bottom] = [topValue, bottomValue].map(pos => convertUnitSize(pos, height));\n        const [left, right] = [leftValue, rightValue].map(pos => convertUnitSize(pos, width));\n        const nextRight = width - right;\n        const nextBottom = height - bottom;\n        const radiusPoses = getRadiusValues(\n            radiusValues,\n            nextRight - left,\n            nextBottom - top,\n            left,\n            top,\n        );\n        const poses: ControlPose[] = [\n            ...getRectPoses(top, nextRight, nextBottom, left),\n            ...radiusPoses,\n        ];\n\n        return {\n            type: \"inset\",\n            clipText,\n            poses,\n            top,\n            left,\n            right: nextRight,\n            bottom: nextBottom,\n            radius: radiusValues,\n            splitter,\n        } as const;\n    } else if (clipPrefix === \"rect\") {\n        // top right bottom left\n        const values = splitComma(value! || `0px, ${width}px, ${height}px, 0px`);\n\n        splitter = \",\";\n        const [top, right, bottom, left] = values.map(pos => {\n            const { value: posValue } = splitUnit(pos);\n\n            return posValue;\n        });\n        const poses = getRectPoses(top, right, bottom, left);\n\n        return {\n            type: \"rect\",\n            clipText,\n            poses,\n            top,\n            right,\n            bottom,\n            left,\n            values,\n            splitter,\n        } as const;\n    }\n    return;\n}\n","import {\n    Renderer, ClippableProps, OnClip,\n    ClippableState, OnClipEnd, OnClipStart,\n    ControlPose, MoveableManagerInterface, DraggableProps,\n} from \"../types\";\nimport { convertUnitSize, getRad } from \"@daybrush/utils\";\nimport {\n    prefix, calculatePosition, getDiagonalSize,\n    fillParams, triggerEvent,\n    makeMatrixCSS, getRect, fillEndParams,\n    getSizeDistByDist,\n    getProps,\n    fillCSSObject,\n} from \"../utils\";\nimport { plus, minus, multiply } from \"@scena/matrix\";\nimport { getDragDist, calculatePointerDist, setDragStart } from \"../gesto/GestoUtils\";\nimport {\n    HORIZONTAL_RADIUS_ORDER, VERTICAL_RADIUS_ORDER, addRadiusPos, removeRadiusPos,\n} from \"./roundable/borderRadius\";\nimport { renderLine } from \"../renderDirections\";\nimport { checkSnapBoundPriority } from \"./snappable/snap\";\nimport { checkSnapBounds } from \"./snappable/snapBounds\";\nimport { getDefaultGuidelines } from \"./snappable/getTotalGuidelines\";\nimport {\n    getControlSize, getClipPath,\n    getClipStyles, getRectPoses,\n} from \"./clippable/utils\";\n\nexport function moveControlPos(\n    controlPoses: ControlPose[],\n    index: number,\n    dist: number[],\n    isRect?: boolean,\n    keepRatio?: boolean,\n) {\n    const { direction, sub } = controlPoses[index];\n    const dists = controlPoses.map(() => [0, 0]);\n    const directions = direction ? direction.split(\"\") : [];\n\n    if (isRect && index < 8) {\n        const verticalDirections = directions.filter(dir => dir === \"w\" || dir === \"e\");\n        const horizontalDirections = directions.filter(dir => dir === \"n\" || dir === \"s\");\n\n        const verticalDirection = verticalDirections[0];\n        const horizontalDirection = horizontalDirections[0];\n\n        dists[index] = dist;\n        const [width, height] = getControlSize(controlPoses);\n        const ratio = width && height ? width / height : 0;\n\n        if (ratio && keepRatio) {\n            // 0 1 2\n            // 7   3\n            // 6 5 4\n\n            const fixedIndex = (index + 4) % 8;\n            const fixedPosition = controlPoses[fixedIndex].pos;\n            const sizeDirection = [0, 0];\n\n            if (direction!.indexOf(\"w\") > -1) {\n                sizeDirection[0] = -1;\n            } else if (direction!.indexOf(\"e\") > -1) {\n                sizeDirection[0] = 1;\n            }\n            if (direction!.indexOf(\"n\") > -1) {\n                sizeDirection[1] = -1;\n            } else if (direction!.indexOf(\"s\") > -1) {\n                sizeDirection[1] = 1;\n            }\n\n\n            const nextDist = getSizeDistByDist(\n                [width, height],\n                dist,\n                ratio,\n                sizeDirection,\n                true,\n            );\n            const nextWidth = width + nextDist[0];\n            const nextHeight = height + nextDist[1];\n            let top = fixedPosition[1];\n            let bottom = fixedPosition[1];\n            let left = fixedPosition[0];\n            let right = fixedPosition[0];\n\n            if (sizeDirection[0] === -1) {\n                left = right - nextWidth;\n            } else if (sizeDirection[0] === 1) {\n                right = left + nextWidth;\n            } else {\n                left = left - nextWidth / 2;\n                right = right + nextWidth / 2;\n            }\n            if (sizeDirection[1] === -1) {\n                top = bottom - nextHeight;\n            } else if (sizeDirection[1] === 1) {\n                bottom = top + nextHeight;\n            } else {\n                top = bottom - nextHeight / 2;\n                bottom = top + nextHeight;\n            }\n\n            const nextControlPoses = getRectPoses(top, right, bottom, left);\n\n            controlPoses.forEach((controlPose, i) => {\n                dists[i][0] = nextControlPoses[i].pos[0] - controlPose.pos[0];\n                dists[i][1] = nextControlPoses[i].pos[1] - controlPose.pos[1];\n            });\n        } else {\n            controlPoses.forEach((controlPose, i) => {\n                const {\n                    direction: controlDir,\n                } = controlPose;\n\n                if (!controlDir) {\n                    return;\n                }\n                if (controlDir.indexOf(verticalDirection) > -1) {\n                    dists[i][0] = dist[0];\n                }\n                if (controlDir.indexOf(horizontalDirection) > -1) {\n                    dists[i][1] = dist[1];\n                }\n            });\n            if (verticalDirection) {\n                dists[1][0] = dist[0] / 2;\n                dists[5][0] = dist[0] / 2;\n            }\n            if (horizontalDirection) {\n                dists[3][1] = dist[1] / 2;\n                dists[7][1] = dist[1] / 2;\n            }\n        }\n    } else if (direction && !sub) {\n        directions.forEach(dir => {\n            const isVertical = dir === \"n\" || dir === \"s\";\n\n            controlPoses.forEach((controlPose, i) => {\n                const {\n                    direction: dirDir,\n                    horizontal: dirHorizontal,\n                    vertical: dirVertical,\n                } = controlPose;\n\n                if (!dirDir || dirDir.indexOf(dir) === -1) {\n                    return;\n                }\n                dists[i] = [\n                    isVertical || !dirHorizontal ? 0 : dist[0],\n                    !isVertical || !dirVertical ? 0 : dist[1],\n                ];\n            });\n        });\n    } else {\n        dists[index] = dist;\n    }\n\n    return dists;\n}\n\n\nfunction addClipPath(moveable: MoveableManagerInterface<ClippableProps>, e: any) {\n    const [distX, distY] = calculatePointerDist(moveable, e);\n    const { clipPath, clipIndex } = e.datas;\n    const {\n        type: clipType,\n        poses: clipPoses,\n        splitter,\n    } = (clipPath as ReturnType<typeof getClipPath>)!;\n    const poses = clipPoses.map(pos => pos.pos);\n    if (clipType === \"polygon\") {\n        poses.splice(clipIndex, 0, [distX, distY]);\n    } else if (clipType === \"inset\") {\n        const horizontalIndex = HORIZONTAL_RADIUS_ORDER.indexOf(clipIndex);\n        const verticalIndex = VERTICAL_RADIUS_ORDER.indexOf(clipIndex);\n        const length = clipPoses.length;\n\n        addRadiusPos(\n            clipPoses,\n            poses,\n            8,\n            horizontalIndex,\n            verticalIndex,\n            distX,\n            distY,\n            poses[4][0],\n            poses[4][1],\n            poses[0][0],\n            poses[0][1],\n        );\n\n        if (length === clipPoses.length) {\n            return;\n        }\n    } else {\n        return;\n    }\n    const clipStyles = getClipStyles(moveable, clipPath, poses)!;\n    const clipStyle = `${clipType}(${clipStyles.join(splitter)})`;\n\n    triggerEvent(moveable, \"onClip\", fillParams<OnClip>(moveable, e, {\n        clipEventType: \"added\",\n        clipType,\n        poses,\n        clipStyles,\n        clipStyle,\n        distX: 0,\n        distY: 0,\n        ...fillCSSObject({\n            clipPath: clipStyle,\n        }, e),\n    }));\n}\nfunction removeClipPath(moveable: MoveableManagerInterface<ClippableProps>, e: any) {\n    const { clipPath, clipIndex } = e.datas;\n    const {\n        type: clipType,\n        poses: clipPoses,\n        splitter,\n    } = (clipPath as ReturnType<typeof getClipPath>)!;\n    const poses = clipPoses.map(pos => pos.pos);\n    const length = poses.length;\n    if (clipType === \"polygon\") {\n        clipPoses.splice(clipIndex, 1);\n        poses.splice(clipIndex, 1);\n    } else if (clipType === \"inset\") {\n        if (clipIndex < 8) {\n            return;\n        }\n        removeRadiusPos(clipPoses, poses, clipIndex, 8, length);\n\n        if (length === clipPoses.length) {\n            return;\n        }\n    } else {\n        return;\n    }\n    const clipStyles = getClipStyles(moveable, clipPath, poses)!;\n    const clipStyle = `${clipType}(${clipStyles.join(splitter)})`;\n\n    triggerEvent(moveable, \"onClip\", fillParams<OnClip>(moveable, e, {\n        clipEventType: \"removed\",\n        clipType,\n        poses,\n        clipStyles,\n        clipStyle,\n        distX: 0,\n        distY: 0,\n        ...fillCSSObject({\n            clipPath: clipStyle,\n        }, e),\n    }));\n}\n/**\n * @namespace Moveable.Clippable\n * @description Whether to clip the target.\n */\n\nexport default {\n    name: \"clippable\",\n    props: {\n        clippable: Boolean,\n        defaultClipPath: String,\n        customClipPath: String,\n        keepRatio: Boolean,\n        clipRelative: Boolean,\n        clipArea: Boolean,\n        dragWithClip: Boolean,\n        clipTargetBounds: Boolean,\n        clipVerticalGuidelines: Array,\n        clipHorizontalGuidelines: Array,\n        clipSnapThreshold: Boolean,\n    } as const,\n    events: {\n        onClipStart: \"clipStart\",\n        onClip: \"clip\",\n        onClipEnd: \"clipEnd\",\n    } as const,\n    css: [\n        `.control.clip-control {\n    background: #6d6;\n    cursor: pointer;\n}\n.control.clip-control.clip-radius {\n    background: #d66;\n}\n.line.clip-line {\n    background: #6e6;\n    cursor: move;\n    z-index: 1;\n}\n.clip-area {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.clip-ellipse {\n    position: absolute;\n    cursor: move;\n    border: 1px solid #6d6;\n    border: var(--zoompx) solid #6d6;\n    border-radius: 50%;\n    transform-origin: 0px 0px;\n}`,\n        `:host {\n    --bounds-color: #d66;\n}`,\n        `.guideline {\n    pointer-events: none;\n    z-index: 2;\n}`,\n        `.line.guideline.bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}`,\n    ],\n    render(moveable: MoveableManagerInterface<ClippableProps, ClippableState>, React: Renderer): any[] {\n        const {\n            customClipPath,\n            defaultClipPath,\n            clipArea, zoom,\n            groupable,\n        } = moveable.props;\n        const {\n            target, width, height, allMatrix, is3d, left, top,\n            pos1, pos2, pos3, pos4,\n            clipPathState,\n            snapBoundInfos,\n            rotation: rotationRad,\n        } = moveable.getState();\n\n        if (!target || groupable) {\n            return [];\n        }\n\n        const clipPath = getClipPath(\n            target, width, height, defaultClipPath || \"inset\", clipPathState || customClipPath);\n\n        if (!clipPath) {\n            return [];\n        }\n        const n = is3d ? 4 : 3;\n        const type = clipPath.type;\n        const clipPoses = clipPath.poses;\n        const poses = clipPoses.map(pos => {\n            // return [x, y];\n            const calculatedPos = calculatePosition(allMatrix, pos.pos, n);\n\n            return [\n                calculatedPos[0] - left,\n                calculatedPos[1] - top,\n            ];\n        });\n\n        let controls: any[] = [];\n        let lines: any[] = [];\n\n        const isRect = type === \"rect\";\n        const isInset = type === \"inset\";\n        const isPolygon = type === \"polygon\";\n\n        if (isRect || isInset || isPolygon) {\n            const linePoses = isInset ? poses.slice(0, 8) : poses;\n\n            lines = linePoses.map((to, i) => {\n                const from = i === 0 ? linePoses[linePoses.length - 1] : linePoses[i - 1];\n\n                const rad = getRad(from, to);\n                const dist = getDiagonalSize(from, to);\n                return <div key={`clipLine${i}`} className={prefix(\"line\", \"clip-line\", \"snap-control\")}\n                    data-clip-index={i}\n                    style={{\n                        width: `${dist}px`,\n                        transform: `translate(${from[0]}px, ${from[1]}px) rotate(${rad}rad) scaleY(${zoom})`,\n                    }}></div>;\n            });\n        }\n        controls = poses.map((pos, i) => {\n            return <div key={`clipControl${i}`}\n                className={prefix(\"control\", \"clip-control\", \"snap-control\")}\n                data-clip-index={i}\n                style={{\n                    transform: `translate(${pos[0]}px, ${pos[1]}px) rotate(${rotationRad}rad) scale(${zoom})`,\n                }}></div>;\n        });\n\n        if (isInset) {\n            controls.push(...poses.slice(8).map((pos, i) => {\n                return <div key={`clipRadiusControl${i}`}\n                    className={prefix(\"control\", \"clip-control\", \"clip-radius\", \"snap-control\")}\n                    data-clip-index={8 + i}\n                    style={{\n                        transform: `translate(${pos[0]}px, ${pos[1]}px) rotate(${rotationRad}rad) scale(${zoom})`,\n                    }}></div>;\n            }));\n        }\n        if (type === \"circle\" || type === \"ellipse\") {\n            const {\n                left: clipLeft,\n                top: clipTop,\n                radiusX,\n                radiusY,\n            } = clipPath;\n\n            const [distLeft, distTop] = minus(\n                calculatePosition(allMatrix, [clipLeft!, clipTop!], n),\n                calculatePosition(allMatrix, [0, 0], n),\n            );\n            let ellipseClipPath = \"none\";\n\n            if (!clipArea) {\n                const piece = Math.max(10, radiusX! / 5, radiusY! / 5);\n                const areaPoses: number[][] = [];\n\n                for (let i = 0; i <= piece; ++i) {\n                    const rad = Math.PI * 2 / piece * i;\n                    areaPoses.push([\n                        radiusX! + (radiusX! - zoom!) * Math.cos(rad),\n                        radiusY! + (radiusY! - zoom!) * Math.sin(rad),\n                    ]);\n                }\n                areaPoses.push([radiusX!, -2]);\n                areaPoses.push([-2, -2]);\n                areaPoses.push([-2, radiusY! * 2 + 2]);\n                areaPoses.push([radiusX! * 2 + 2, radiusY! * 2 + 2]);\n                areaPoses.push([radiusX! * 2 + 2, -2]);\n                areaPoses.push([radiusX!, -2]);\n\n                ellipseClipPath = `polygon(${areaPoses.map(pos => `${pos[0]}px ${pos[1]}px`).join(\", \")})`;\n            }\n            controls.push(<div key=\"clipEllipse\" className={prefix(\"clip-ellipse\", \"snap-control\")} style={{\n                width: `${radiusX! * 2}px`,\n                height: `${radiusY! * 2}px`,\n                clipPath: ellipseClipPath,\n                transform: `translate(${-left + distLeft}px, ${-top + distTop}px) ${makeMatrixCSS(allMatrix)}`,\n            }}></div>);\n        }\n        if (clipArea) {\n            const {\n                width: allWidth,\n                height: allHeight,\n                left: allLeft,\n                top: allTop,\n            } = getRect([pos1, pos2, pos3, pos4, ...poses]);\n            if (isPolygon || isRect || isInset) {\n                const areaPoses = isInset ? poses.slice(0, 8) : poses;\n                controls.push(<div key=\"clipArea\" className={prefix(\"clip-area\", \"snap-control\")} style={{\n                    width: `${allWidth}px`,\n                    height: `${allHeight}px`,\n                    transform: `translate(${allLeft}px, ${allTop}px)`,\n                    clipPath: `polygon(${areaPoses.map(pos => `${pos[0] - allLeft}px ${pos[1] - allTop}px`).join(\", \")})`,\n                }}></div>);\n            }\n        }\n        if (snapBoundInfos) {\n            ([\"vertical\", \"horizontal\"] as const).forEach(directionType => {\n                const info = snapBoundInfos[directionType];\n                const isHorizontal = directionType === \"horizontal\";\n\n                if (info.isSnap) {\n                    lines.push(...info.snap.posInfos.map(({ pos }, i) => {\n                        const snapPos1 = minus(calculatePosition(\n                            allMatrix, isHorizontal ? [0, pos] : [pos, 0], n), [left, top]);\n                        const snapPos2 = minus(calculatePosition(\n                            allMatrix, isHorizontal ? [width, pos] : [pos, height], n), [left, top]);\n\n                        return renderLine(\n                            React, \"\", snapPos1, snapPos2, zoom!,\n                            `clip${directionType}snap${i}`, \"guideline\");\n                    }));\n                }\n                if (info.isBound) {\n                    lines.push(...info.bounds.map(({ pos }, i) => {\n                        const snapPos1 = minus(calculatePosition(\n                            allMatrix, isHorizontal ? [0, pos] : [pos, 0], n), [left, top]);\n                        const snapPos2 = minus(calculatePosition(\n                            allMatrix, isHorizontal ? [width, pos] : [pos, height], n), [left, top]);\n\n                        return renderLine(\n                            React, \"\", snapPos1, snapPos2, zoom!,\n                            `clip${directionType}bounds${i}`, \"guideline\", \"bounds\", \"bold\");\n                    }));\n                }\n            });\n        }\n        return [\n            ...controls,\n            ...lines,\n        ];\n    },\n    dragControlCondition(moveable: any, e: any) {\n        return e.inputEvent && (e.inputEvent.target.getAttribute(\"class\") || \"\").indexOf(\"clip\") > -1;\n    },\n    dragStart(moveable: MoveableManagerInterface<ClippableProps, ClippableState>, e: any) {\n        const props = moveable.props;\n        const {\n            dragWithClip = true,\n        } = props;\n\n        if (dragWithClip) {\n            return false;\n        }\n\n        return this.dragControlStart(moveable, e);\n    },\n    drag(moveable: MoveableManagerInterface<ClippableProps, ClippableState>, e: any) {\n        return this.dragControl(moveable, { ...e, isDragTarget: true });\n    },\n    dragEnd(moveable: MoveableManagerInterface<ClippableProps, ClippableState>, e: any) {\n        return this.dragControlEnd(moveable, e);\n    },\n    dragControlStart(moveable: MoveableManagerInterface<ClippableProps, ClippableState>, e: any) {\n        const state = moveable.state;\n        const { defaultClipPath, customClipPath } = moveable.props;\n        const { target, width, height } = state;\n        const inputTarget = e.inputEvent ? e.inputEvent.target : null;\n        const className = (inputTarget && inputTarget.getAttribute(\"class\")) || \"\";\n        const datas = e.datas;\n        const clipPath = getClipPath(target!, width, height, defaultClipPath || \"inset\", customClipPath);\n\n        if (!clipPath) {\n            return false;\n        }\n        const { clipText, type, poses } = clipPath;\n        const result = triggerEvent(moveable, \"onClipStart\", fillParams<OnClipStart>(moveable, e, {\n            clipType: type,\n            clipStyle: clipText,\n            poses: poses.map(pos => pos.pos),\n        }));\n\n        if (result === false) {\n            datas.isClipStart = false;\n            return false;\n        }\n        datas.isControl = className && className.indexOf(\"clip-control\") > -1;\n        datas.isLine = className.indexOf(\"clip-line\") > -1;\n        datas.isArea = className.indexOf(\"clip-area\") > -1 || className.indexOf(\"clip-ellipse\") > -1;\n        datas.clipIndex = inputTarget ? parseInt(inputTarget.getAttribute(\"data-clip-index\"), 10) : -1;\n        datas.clipPath = clipPath;\n        datas.isClipStart = true;\n        state.clipPathState = clipText;\n        setDragStart(moveable, e);\n\n        return true;\n    },\n    dragControl(moveable: MoveableManagerInterface<ClippableProps & DraggableProps, ClippableState>, e: any) {\n        const { datas, originalDatas, isDragTarget } = e;\n\n        if (!datas.isClipStart) {\n            return false;\n        }\n        const { isControl, isLine, isArea, clipIndex, clipPath } = datas as {\n            clipPath: ReturnType<typeof getClipPath>,\n            [key: string]: any,\n        };\n        if (!clipPath) {\n            return false;\n        }\n        const props = getProps(moveable.props, \"clippable\");\n\n        const { keepRatio } = props;\n        let distX = 0;\n        let distY = 0;\n\n        const originalDraggable = originalDatas.draggable;\n        const originalDist = getDragDist(e);\n\n        if (isDragTarget && originalDraggable) {\n            [distX, distY] = originalDraggable.prevBeforeDist;\n        } else {\n            [distX, distY] = originalDist;\n        }\n\n        const firstDist = [distX, distY];\n\n        const state = moveable.state;\n        const { width, height } = state;\n        const isDragWithTarget = !isArea && !isControl && !isLine;\n        const {\n            type: clipType,\n            poses: clipPoses,\n            splitter,\n        } = clipPath;\n        const poses = clipPoses.map(pos => pos.pos);\n\n        if (isDragWithTarget) {\n            distX = -distX;\n            distY = -distY;\n        }\n        const isAll = !isControl || clipPoses[clipIndex].direction === \"nesw\";\n        const isRect = clipType === \"inset\" || clipType === \"rect\";\n        let dists = clipPoses.map(() => [0, 0]);\n\n        if (isControl && !isAll) {\n            const { horizontal, vertical } = clipPoses[clipIndex];\n            const dist = [\n                distX * Math.abs(horizontal),\n                distY * Math.abs(vertical),\n            ];\n            dists = moveControlPos(clipPoses, clipIndex, dist, isRect, keepRatio);\n        } else if (isAll) {\n            dists = poses.map(() => [distX, distY]);\n        }\n        const nextPoses: number[][] = poses.map((pos, i) => plus(pos, dists[i]));\n        const guidePoses = [...nextPoses];\n\n        state.snapBoundInfos = null;\n        const isCircle = clipPath.type === \"circle\";\n        const isEllipse = clipPath.type === \"ellipse\";\n\n        if (isCircle || isEllipse) {\n            const guideRect = getRect(nextPoses);\n            const ry = Math.abs(guideRect.bottom - guideRect.top);\n            const rx = Math.abs(isEllipse ? guideRect.right - guideRect.left : ry);\n            const bottom = nextPoses[0][1] + ry;\n            const left = nextPoses[0][0] - rx;\n            const right = nextPoses[0][0] + rx;\n\n            // right\n            if (isCircle) {\n                guidePoses.push([right, guideRect.bottom]);\n                dists.push([1, 0]);\n            }\n            // bottom\n            guidePoses.push([guideRect.left, bottom]);\n            dists.push([0, 1]);\n            // left\n            guidePoses.push([left, guideRect.bottom]);\n            dists.push([1, 0]);\n        }\n\n        const guidelines = getDefaultGuidelines(\n            (props.clipHorizontalGuidelines || []).map(v => convertUnitSize(`${v}`, height)),\n            (props.clipVerticalGuidelines || []).map(v => convertUnitSize(`${v}`, width)),\n            width!, height!,\n        );\n        let guideXPoses: number[] = [];\n        let guideYPoses: number[] = [];\n\n        if (isCircle || isEllipse) {\n            guideXPoses = [guidePoses[4][0], guidePoses[2][0]];\n            guideYPoses = [guidePoses[1][1], guidePoses[3][1]];\n        } else if (isRect) {\n            const rectPoses = [guidePoses[0], guidePoses[2], guidePoses[4], guidePoses[6]];\n            const rectDists = [dists[0], dists[2], dists[4], dists[6]];\n\n            guideXPoses = rectPoses.filter((_, i) => rectDists[i][0]).map(pos => pos[0]);\n            guideYPoses = rectPoses.filter((_, i) => rectDists[i][1]).map(pos => pos[1]);\n        } else {\n            guideXPoses = guidePoses.filter((_, i) => dists[i][0]).map(pos => pos[0]);\n            guideYPoses = guidePoses.filter((_, i) => dists[i][1]).map(pos => pos[1]);\n        }\n        const boundDelta = [0, 0];\n        const {\n            horizontal: horizontalSnapInfo,\n            vertical: verticalSnapInfo,\n        } = checkSnapBounds(\n            guidelines,\n            props.clipTargetBounds && { left: 0, top: 0, right: width, bottom: height },\n            guideXPoses,\n            guideYPoses,\n            5,\n        );\n        let snapOffsetY = horizontalSnapInfo.offset;\n        let snapOffsetX = verticalSnapInfo.offset;\n\n        if (horizontalSnapInfo.isBound) {\n            boundDelta[1] += snapOffsetY;\n        }\n        if (verticalSnapInfo.isBound) {\n            boundDelta[0] += snapOffsetX;\n        }\n        if ((isEllipse || isCircle) && dists[0][0] === 0 && dists[0][1] === 0) {\n            const guideRect = getRect(nextPoses);\n            let cy = guideRect.bottom - guideRect.top;\n            let cx = isEllipse ? guideRect.right - guideRect.left : cy;\n\n\n            const distSnapX = verticalSnapInfo.isBound\n                ? Math.abs(snapOffsetX)\n                : (verticalSnapInfo.snapIndex === 0 ? -snapOffsetX : snapOffsetX);\n            const distSnapY = horizontalSnapInfo.isBound\n                ? Math.abs(snapOffsetY)\n                : (horizontalSnapInfo.snapIndex === 0 ? -snapOffsetY : snapOffsetY);\n            cx -= distSnapX;\n            cy -= distSnapY;\n\n            if (isCircle) {\n                cy = checkSnapBoundPriority(verticalSnapInfo, horizontalSnapInfo) > 0 ? cy : cx;\n                cx = cy;\n            }\n            const center = guidePoses[0];\n\n            guidePoses[1][1] = center[1] - cy;\n            guidePoses[2][0] = center[0] + cx;\n            guidePoses[3][1] = center[1] + cy;\n            guidePoses[4][0] = center[0] - cx;\n        } else if (isRect && keepRatio && isControl) {\n            const [width, height] = getControlSize(clipPoses);\n            const ratio = width && height ? width / height : 0;\n            const clipPose = clipPoses[clipIndex];\n            const direction = clipPose.direction! || \"\";\n            let top = guidePoses[1][1];\n            let bottom = guidePoses[5][1];\n            let left = guidePoses[7][0];\n            let right = guidePoses[3][0];\n\n\n            if (snapOffsetY <= snapOffsetX) {\n                snapOffsetY = snapOffsetX / ratio;\n            } else {\n                snapOffsetX = snapOffsetY * ratio;\n            }\n            if (direction!.indexOf(\"w\") > -1) {\n                left -= snapOffsetX;\n            } else if (direction!.indexOf(\"e\") > -1) {\n                right -= snapOffsetX;\n            } else {\n                left += snapOffsetX / 2;\n                right -= snapOffsetX / 2;\n            }\n            if (direction!.indexOf(\"n\") > -1) {\n                top -= snapOffsetY;\n            } else if (direction!.indexOf(\"s\") > -1) {\n                bottom -= snapOffsetY;\n            } else {\n                top += snapOffsetY / 2;\n                bottom -= snapOffsetY / 2;\n            }\n\n            const nextControlPoses = getRectPoses(top, right, bottom, left);\n\n            guidePoses.forEach((pos, i) => {\n                [pos[0], pos[1]] = nextControlPoses[i].pos;\n            });\n        } else {\n            guidePoses.forEach((pos, j) => {\n                const dist = dists[j];\n\n                if (dist[0]) {\n                    pos[0] -= snapOffsetX;\n                }\n                if (dist[1]) {\n                    pos[1] -= snapOffsetY;\n                }\n            });\n        }\n        const nextClipStyles = getClipStyles(moveable, clipPath, nextPoses)!;\n        const clipStyle = `${clipType}(${nextClipStyles.join(splitter)})`;\n\n        state.clipPathState = clipStyle;\n\n        if (isCircle || isEllipse) {\n            guideXPoses = [guidePoses[4][0], guidePoses[2][0]];\n            guideYPoses = [guidePoses[1][1], guidePoses[3][1]];\n        } else if (isRect) {\n            const rectPoses = [guidePoses[0], guidePoses[2], guidePoses[4], guidePoses[6]];\n\n            guideXPoses = rectPoses.map(pos => pos[0]);\n            guideYPoses = rectPoses.map(pos => pos[1]);\n        } else {\n            guideXPoses = guidePoses.map(pos => pos[0]);\n            guideYPoses = guidePoses.map(pos => pos[1]);\n        }\n        state.snapBoundInfos = checkSnapBounds(\n            guidelines,\n            props.clipTargetBounds && { left: 0, top: 0, right: width, bottom: height },\n            guideXPoses,\n            guideYPoses,\n            1,\n        );\n\n        if (originalDraggable) {\n            const {\n                is3d,\n                allMatrix,\n            } = state;\n            const n = is3d ? 4 : 3;\n\n            let dragDist = boundDelta;\n\n            if (isDragTarget) {\n                dragDist = [\n                    firstDist[0] + boundDelta[0] - originalDist[0],\n                    firstDist[1] + boundDelta[1] - originalDist[1],\n                ];\n            }\n            originalDraggable.deltaOffset = multiply(allMatrix, [dragDist[0], dragDist[1], 0, 0], n);\n        }\n        triggerEvent(moveable, \"onClip\", fillParams<OnClip>(moveable, e, {\n            clipEventType: \"changed\",\n            clipType,\n            poses: nextPoses,\n            clipStyle,\n            clipStyles: nextClipStyles,\n            distX,\n            distY,\n            ...fillCSSObject({\n                [clipType === \"rect\" ? \"clip\" : \"clipPath\"]: clipStyle,\n            }, e),\n        }));\n\n        return true;\n    },\n    dragControlEnd(moveable: MoveableManagerInterface<ClippableProps, ClippableState>, e: any) {\n        this.unset(moveable);\n        const { isDrag, datas, isDouble } = e;\n        const { isLine, isClipStart, isControl } = datas;\n\n        if (!isClipStart) {\n            return false;\n        }\n        triggerEvent(moveable, \"onClipEnd\", fillEndParams<OnClipEnd>(moveable, e, {}));\n        if (isDouble) {\n            if (isControl) {\n                removeClipPath(moveable, e);\n            } else if (isLine) {\n                // add\n                addClipPath(moveable, e);\n            }\n        }\n        return isDouble || isDrag;\n    },\n    unset(moveable: MoveableManagerInterface<ClippableProps, ClippableState>) {\n        moveable.state.clipPathState = \"\";\n        moveable.state.snapBoundInfos = null;\n    },\n};\n\n/**\n * Whether to clip the target. (default: false)\n * @name Moveable.Clippable#clippable\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     clippable: true,\n *     defaultClipPath: \"inset\",\n *     customClipPath: \"\",\n *     clipRelative: false,\n *     clipArea: false,\n *     dragWithClip: true,\n * });\n * moveable.on(\"clipStart\", e => {\n *     console.log(e);\n * }).on(\"clip\", e => {\n *     if (e.clipType === \"rect\") {\n *         e.target.style.clip = e.clipStyle;\n *     } else {\n *         e.target.style.clipPath = e.clipStyle;\n *     }\n * }).on(\"clipEnd\", e => {\n *     console.log(e);\n * });\n */\n/**\n *  If clippath is not set, the default value can be set. (defaultClipPath < style < customClipPath < dragging clipPath)\n * @name Moveable.Clippable#defaultClipPath\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     clippable: true,\n *     defaultClipPath: \"inset\",\n *     customClipPath: \"\",\n *     clipRelative: false,\n *     clipArea: false,\n *     dragWithClip: true,\n * });\n * moveable.on(\"clipStart\", e => {\n *     console.log(e);\n * }).on(\"clip\", e => {\n *     if (e.clipType === \"rect\") {\n *         e.target.style.clip = e.clipStyle;\n *     } else {\n *         e.target.style.clipPath = e.clipStyle;\n *     }\n * }).on(\"clipEnd\", e => {\n *     console.log(e);\n * });\n */\n\n/**\n * % Can be used instead of the absolute px (`rect` not possible) (default: false)\n * @name Moveable.Clippable#clipRelative\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     clippable: true,\n *     defaultClipPath: \"inset\",\n *     customClipPath: \"\",\n *     clipRelative: false,\n *     clipArea: false,\n *     dragWithClip: true,\n * });\n * moveable.on(\"clipStart\", e => {\n *     console.log(e);\n * }).on(\"clip\", e => {\n *     if (e.clipType === \"rect\") {\n *         e.target.style.clip = e.clipStyle;\n *     } else {\n *         e.target.style.clipPath = e.clipStyle;\n *     }\n * }).on(\"clipEnd\", e => {\n *     console.log(e);\n * });\n */\n\n/**\n * You can force the custom clipPath. (defaultClipPath < style < customClipPath < dragging clipPath)\n * @name Moveable.Clippable#customClipPath\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     clippable: true,\n *     defaultClipPath: \"inset\",\n *     customClipPath: \"\",\n *     clipRelative: false,\n *     clipArea: false,\n *     dragWithClip: true,\n * });\n * moveable.on(\"clipStart\", e => {\n *     console.log(e);\n * }).on(\"clip\", e => {\n *     if (e.clipType === \"rect\") {\n *         e.target.style.clip = e.clipStyle;\n *     } else {\n *         e.target.style.clipPath = e.clipStyle;\n *     }\n * }).on(\"clipEnd\", e => {\n *     console.log(e);\n * });\n */\n\n/**\n * When dragging the target, the clip also moves. (default: true)\n * @name Moveable.Clippable#dragWithClip\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     clippable: true,\n *     defaultClipPath: \"inset\",\n *     customClipPath: \"\",\n *     clipRelative: false,\n *     clipArea: false,\n *     dragWithClip: true,\n * });\n * moveable.on(\"clipStart\", e => {\n *     console.log(e);\n * }).on(\"clip\", e => {\n *     if (e.clipType === \"rect\") {\n *         e.target.style.clip = e.clipStyle;\n *     } else {\n *         e.target.style.clipPath = e.clipStyle;\n *     }\n * }).on(\"clipEnd\", e => {\n *     console.log(e);\n * });\n */\n\n/**\n * You can drag the clip by setting clipArea.\n * @name Moveable.Clippable#clipArea\n * @default false\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     clippable: true,\n *     defaultClipPath: \"inset\",\n *     customClipPath: \"\",\n *     clipRelative: false,\n *     clipArea: false,\n *     dragWithClip: true,\n * });\n * moveable.on(\"clipStart\", e => {\n *     console.log(e);\n * }).on(\"clip\", e => {\n *     if (e.clipType === \"rect\") {\n *         e.target.style.clip = e.clipStyle;\n *     } else {\n *         e.target.style.clipPath = e.clipStyle;\n *     }\n * }).on(\"clipEnd\", e => {\n *     console.log(e);\n * });\n */\n\n/**\n* Whether the clip is bound to the target.\n* @name Moveable.Clippable#clipTargetBounds\n* @default false\n* @example\n* import Moveable from \"moveable\";\n*\n* const moveable = new Moveable(document.body, {\n*     clippable: true,\n*     defaultClipPath: \"inset\",\n*     customClipPath: \"\",\n*     clipRelative: false,\n*     clipArea: false,\n*     dragWithClip: true,\n*     clipTargetBounds: true,\n* });\n* moveable.on(\"clipStart\", e => {\n*     console.log(e);\n* }).on(\"clip\", e => {\n*     if (e.clipType === \"rect\") {\n*         e.target.style.clip = e.clipStyle;\n*     } else {\n*         e.target.style.clipPath = e.clipStyle;\n*     }\n* }).on(\"clipEnd\", e => {\n*     console.log(e);\n* });\n*/\n\n/**\n * Add clip guidelines in the vertical direction.\n * @name Moveable.Clippable#clipVerticalGuidelines\n * @default 0\n * @example\n* import Moveable from \"moveable\";\n*\n* const moveable = new Moveable(document.body, {\n*     clippable: true,\n*     defaultClipPath: \"inset\",\n*     customClipPath: \"\",\n*     clipRelative: false,\n*     clipArea: false,\n*     dragWithClip: true,\n*     clipVerticalGuidelines: [0, 100, 200],\n*     clipHorizontalGuidelines: [0, 100, 200],\n*     clipSnapThreshold: 5,\n* });\n*/\n\n/**\n* Add clip guidelines in the horizontal direction.\n* @name Moveable.Clippable#clipHorizontalGuidelines\n* @default []\n* @example\n* import Moveable from \"moveable\";\n*\n* const moveable = new Moveable(document.body, {\n*     clippable: true,\n*     defaultClipPath: \"inset\",\n*     customClipPath: \"\",\n*     clipRelative: false,\n*     clipArea: false,\n*     dragWithClip: true,\n*     clipVerticalGuidelines: [0, 100, 200],\n*     clipHorizontalGuidelines: [0, 100, 200],\n*     clipSnapThreshold: 5,\n* });\n*/\n/**\n* istance value that can snap to clip guidelines.\n* @name Moveable.Clippable#clipSnapThreshold\n* @default 5\n* @example\n* import Moveable from \"moveable\";\n*\n* const moveable = new Moveable(document.body, {\n*     clippable: true,\n*     defaultClipPath: \"inset\",\n*     customClipPath: \"\",\n*     clipRelative: false,\n*     clipArea: false,\n*     dragWithClip: true,\n*     clipVerticalGuidelines: [0, 100, 200],\n*     clipHorizontalGuidelines: [0, 100, 200],\n*     clipSnapThreshold: 5,\n* });\n*/\n/**\n * When drag start the clip area or controls, the `clipStart` event is called.\n * @memberof Moveable.Clippable\n * @event clipStart\n * @param {Moveable.Clippable.OnClipStart} - Parameters for the `clipStart` event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     clippable: true,\n *     defaultClipPath: \"inset\",\n *     customClipPath: \"\",\n *     clipRelative: false,\n *     clipArea: false,\n *     dragWithClip: true,\n * });\n * moveable.on(\"clipStart\", e => {\n *     console.log(e);\n * }).on(\"clip\", e => {\n *     if (e.clipType === \"rect\") {\n *         e.target.style.clip = e.clipStyle;\n *     } else {\n *         e.target.style.clipPath = e.clipStyle;\n *     }\n * }).on(\"clipEnd\", e => {\n *     console.log(e);\n * });\n */\n/**\n * When drag the clip area or controls, the `clip` event is called.\n * @memberof Moveable.Clippable\n * @event clip\n * @param {Moveable.Clippable.OnClip} - Parameters for the `clip` event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     clippable: true,\n *     defaultClipPath: \"inset\",\n *     customClipPath: \"\",\n *     clipRelative: false,\n *     clipArea: false,\n *     dragWithClip: true,\n * });\n * moveable.on(\"clipStart\", e => {\n *     console.log(e);\n * }).on(\"clip\", e => {\n *     if (e.clipType === \"rect\") {\n *         e.target.style.clip = e.clipStyle;\n *     } else {\n *         e.target.style.clipPath = e.clipStyle;\n *     }\n * }).on(\"clipEnd\", e => {\n *     console.log(e);\n * });\n */\n/**\n * When drag end the clip area or controls, the `clipEnd` event is called.\n * @memberof Moveable.Clippable\n * @event clipEnd\n * @param {Moveable.Clippable.OnClipEnd} - Parameters for the `clipEnd` event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     clippable: true,\n *     defaultClipPath: \"inset\",\n *     customClipPath: \"\",\n *     clipRelative: false,\n *     clipArea: false,\n *     dragWithClip: true,\n * });\n * moveable.on(\"clipStart\", e => {\n *     console.log(e);\n * }).on(\"clip\", e => {\n *     if (e.clipType === \"rect\") {\n *         e.target.style.clip = e.clipStyle;\n *     } else {\n *         e.target.style.clipPath = e.clipStyle;\n *     }\n * }).on(\"clipEnd\", e => {\n *     console.log(e);\n * });\n */\n","import {\n    prefix, triggerEvent,\n    fillParams, calculatePoses, getRect, fillEndParams, convertCSSSize, fillCSSObject,\n} from \"../utils\";\nimport {\n    OnDragOriginStart, OnDragOrigin,\n    OnDragOriginEnd, MoveableManagerInterface, DraggableProps, OriginDraggableProps, MoveableGroupInterface,\n} from \"../types\";\nimport { hasClass, IObject } from \"@daybrush/utils\";\nimport { setDragStart, getDragDist, getNextMatrix } from \"../gesto/GestoUtils\";\nimport { minus, plus } from \"@scena/matrix\";\nimport Draggable from \"./Draggable\";\nimport CustomGesto, { setCustomDrag } from \"../gesto/CustomGesto\";\n\n/**\n * @namespace OriginDraggable\n * @memberof Moveable\n * @description Whether to drag origin (default: false)\n */\nexport default {\n    name: \"originDraggable\",\n    props: {\n        originDraggable: Boolean,\n        originRelative: Boolean,\n    } as const,\n    events: {\n        onDragOriginStart: \"dragOriginStart\",\n        onDragOrigin: \"dragOrigin\",\n        onDragOriginEnd: \"dragOriginEnd\",\n    } as const,\n    css: [\n        `:host[data-able-origindraggable] .control.origin {\n    pointer-events: auto;\n}`,\n    ],\n    dragControlCondition(_: any, e: any) {\n        if (e.isRequest) {\n            return e.requestAble === \"originDraggable\";\n        }\n        return hasClass(e.inputEvent.target, prefix(\"origin\"));\n    },\n    dragControlStart(moveable: MoveableManagerInterface<OriginDraggableProps & DraggableProps>, e: any) {\n        const { datas } = e;\n\n        setDragStart(moveable, e);\n\n        const params = fillParams<OnDragOriginStart>(moveable, e, {\n            dragStart: Draggable.dragStart(\n                moveable,\n                new CustomGesto().dragStart([0, 0], e),\n            ),\n        });\n        const result = triggerEvent(moveable, \"onDragOriginStart\", params);\n\n        datas.startOrigin = moveable.state.transformOrigin;\n        datas.startTargetOrigin = moveable.state.targetOrigin;\n        datas.prevOrigin = [0, 0];\n        datas.isDragOrigin = true;\n\n        if (result === false) {\n            datas.isDragOrigin = false;\n            return false;\n        }\n\n        return params;\n    },\n    dragControl(moveable: MoveableManagerInterface<OriginDraggableProps & DraggableProps>, e: any) {\n        const { datas, isPinch, isRequest } = e;\n\n        if (!datas.isDragOrigin) {\n            return false;\n        }\n        const [distX, distY] = getDragDist(e);\n        const state = moveable.state;\n        const {\n            width,\n            height,\n            offsetMatrix,\n            targetMatrix,\n            is3d,\n        } = state;\n        const {\n            originRelative = true,\n        } = moveable.props;\n        const n = is3d ? 4 : 3;\n        let dist = [distX, distY];\n\n        if (isRequest) {\n            const distOrigin = e.distOrigin;\n            if (distOrigin[0] || distOrigin[1]) {\n                dist = distOrigin;\n            }\n        }\n        const origin = plus(datas.startOrigin, dist);\n        const targetOrigin = plus(datas.startTargetOrigin, dist);\n        const delta = minus(dist, datas.prevOrigin);\n\n        const nextMatrix = getNextMatrix(\n            offsetMatrix,\n            targetMatrix,\n            origin,\n            n,\n        );\n\n        const rect = moveable.getRect();\n        const nextRect = getRect(calculatePoses(nextMatrix, width, height, n));\n\n        const dragDelta = [\n            rect.left - nextRect.left,\n            rect.top - nextRect.top,\n        ];\n\n        datas.prevOrigin = dist;\n        const transformOrigin = [\n            convertCSSSize(targetOrigin[0], width, originRelative),\n            convertCSSSize(targetOrigin[1], height, originRelative),\n        ].join(\" \");\n        const result = Draggable.drag(\n            moveable,\n            setCustomDrag(e, moveable.state, dragDelta, !!isPinch, false),\n        )!;\n        const params = fillParams<OnDragOrigin>(moveable, e, {\n            width,\n            height,\n            origin,\n            dist,\n            delta,\n            transformOrigin,\n            drag: result,\n            ...fillCSSObject({\n                transformOrigin,\n                transform: result.transform,\n            }, e),\n            afterTransform: result.transform,\n        });\n        triggerEvent(moveable, \"onDragOrigin\", params);\n        return params;\n    },\n    dragControlEnd(moveable: MoveableManagerInterface<OriginDraggableProps>, e: any) {\n        const { datas } = e;\n\n        if (!datas.isDragOrigin) {\n            return false;\n        }\n        triggerEvent(moveable, \"onDragOriginEnd\",\n            fillEndParams<OnDragOriginEnd>(moveable, e, {}));\n        return true;\n    },\n    dragGroupControlCondition(moveable: any, e: any) {\n        return this.dragControlCondition(moveable, e);\n    },\n    dragGroupControlStart(moveable: MoveableGroupInterface<OriginDraggableProps>, e: any) {\n        const params = this.dragControlStart(moveable, e);\n\n        if (!params) {\n            return false;\n        }\n\n        return true;\n    },\n    dragGroupControl(moveable: MoveableGroupInterface<OriginDraggableProps>, e: any) {\n        const params = this.dragControl(moveable, e);\n\n        if (!params) {\n            return false;\n        }\n        moveable.transformOrigin = params.transformOrigin;\n\n        return true;\n    },\n    /**\n    * @method Moveable.OriginDraggable#request\n    * @param {object} e - the OriginDraggable's request parameter\n    * @param {number} [e.x] - x position\n    * @param {number} [e.y] - y position\n    * @param {number} [e.deltaX] - x number to move\n    * @param {number} [e.deltaY] - y number to move\n    * @param {array} [e.deltaOrigin] - left, top number to move transform-origin\n    * @param {array} [e.origin] - transform-origin position\n    * @param {number} [e.isInstant] - Whether to execute the request instantly\n    * @return {Moveable.Requester} Moveable Requester\n    * @example\n\n    * // Instantly Request (requestStart - request - requestEnd)\n    * // Use Relative Value\n    * moveable.request(\"originDraggable\", { deltaX: 10, deltaY: 10 }, true);\n    * // Use Absolute Value\n    * moveable.request(\"originDraggable\", { x: 200, y: 100 }, true);\n    * // Use Transform Value\n    * moveable.request(\"originDraggable\", { deltaOrigin: [10, 0] }, true);\n    * moveable.request(\"originDraggable\", { origin: [100, 0] }, true);\n    * // requestStart\n    * const requester = moveable.request(\"originDraggable\");\n    *\n    * // request\n    * // Use Relative Value\n    * requester.request({ deltaX: 10, deltaY: 10 });\n    * requester.request({ deltaX: 10, deltaY: 10 });\n    * requester.request({ deltaX: 10, deltaY: 10 });\n    * // Use Absolute Value\n    * moveable.request(\"originDraggable\", { x: 200, y: 100 });\n    * moveable.request(\"originDraggable\", { x: 220, y: 100 });\n    * moveable.request(\"originDraggable\", { x: 240, y: 100 });\n    *\n    * // requestEnd\n    * requester.requestEnd();\n    */\n    request(moveable: MoveableManagerInterface<any, any>) {\n        const datas = {};\n        const rect = moveable.getRect();\n        let distX = 0;\n        let distY = 0;\n\n        const transformOrigin = rect.transformOrigin;\n        const distOrigin = [0, 0];\n\n        return {\n            isControl: true,\n            requestStart() {\n                return { datas };\n            },\n            request(e: IObject<any>) {\n                if (\"deltaOrigin\" in e) {\n                    distOrigin[0] += e.deltaOrigin[0];\n                    distOrigin[1] += e.deltaOrigin[1];\n                } else if (\"origin\" in e) {\n                    distOrigin[0] = e.origin[0] - transformOrigin[0];\n                    distOrigin[1] = e.origin[1] - transformOrigin[1];\n                } else {\n                    if (\"x\" in e) {\n                        distX = e.x - rect.left;\n                    } else if (\"deltaX\" in e) {\n                        distX += e.deltaX;\n                    }\n                    if (\"y\" in e) {\n                        distY = e.y - rect.top;\n                    } else if (\"deltaY\" in e) {\n                        distY += e.deltaY;\n                    }\n                }\n\n                return { datas, distX, distY, distOrigin };\n            },\n            requestEnd() {\n                return { datas, isDrag: true };\n            },\n        };\n    },\n};\n/**\n * Whether to drag origin (default: false)\n * @name Moveable.OriginDraggable#originDraggable\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     originDraggable: true,\n * });\n * let translate = [0, 0];\n * moveable.on(\"dragOriginStart\", e => {\n *     e.dragStart && e.dragStart.set(translate);\n * }).on(\"dragOrigin\", e => {\n *     translate = e.drag.beforeTranslate;\n *     e.target.style.cssText\n *         = `transform-origin: ${e.transformOrigin};`\n *         + `transform: translate(${translate[0]}px, ${translate[1]}px)`;\n * }).on(\"dragOriginEnd\", e => {\n *     console.log(e);\n * });\n */\n\n/**\n * % Can be used instead of the absolute px (default: true)\n * @name Moveable.OriginDraggable#originRelative\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     originDraggable: true,\n *     originRelative: false,\n * });\n * moveable.originRelative = true;\n */\n\n/**\n* When drag start the origin, the `dragOriginStart` event is called.\n* @memberof Moveable.OriginDraggable\n* @event dragOriginStart\n* @param {Moveable.OriginDraggable.OnDragOriginStart} - Parameters for the `dragOriginStart` event\n* @example\n* import Moveable from \"moveable\";\n*\n* const moveable = new Moveable(document.body, {\n*     originDraggable: true,\n* });\n* let translate = [0, 0];\n* moveable.on(\"dragOriginStart\", e => {\n*     e.dragStart && e.dragStart.set(translate);\n* }).on(\"dragOrigin\", e => {\n*     translate = e.drag.beforeTranslate;\n*     e.target.style.cssText\n*         = `transform-origin: ${e.transformOrigin};`\n*         + `transform: translate(${translate[0]}px, ${translate[1]}px)`;\n* }).on(\"dragOriginEnd\", e => {\n*     console.log(e);\n* });\n*/\n\n/**\n* When drag the origin, the `dragOrigin` event is called.\n* @memberof Moveable.OriginDraggable\n* @event dragOrigin\n* @param {Moveable.OriginDraggable.OnDragOrigin} - Parameters for the `dragOrigin` event\n* @example\n* import Moveable from \"moveable\";\n*\n* const moveable = new Moveable(document.body, {\n*     originDraggable: true,\n* });\n* let translate = [0, 0];\n* moveable.on(\"dragOriginStart\", e => {\n*     e.dragStart && e.dragStart.set(translate);\n* }).on(\"dragOrigin\", e => {\n*     translate = e.drag.beforeTranslate;\n*     e.target.style.cssText\n*         = `transform-origin: ${e.transformOrigin};`\n*         + `transform: translate(${translate[0]}px, ${translate[1]}px)`;\n* }).on(\"dragOriginEnd\", e => {\n*     console.log(e);\n* });\n*/\n\n/**\n* When drag end the origin, the `dragOriginEnd` event is called.\n* @memberof Moveable.OriginDraggable\n* @event dragOriginEnd\n* @param {Moveable.OriginDraggable.OnDragOriginEnd} - Parameters for the `dragOriginEnd` event\n* @example\n* import Moveable from \"moveable\";\n*\n* const moveable = new Moveable(document.body, {\n*     originDraggable: true,\n* });\n* let translate = [0, 0];\n* moveable.on(\"dragOriginStart\", e => {\n*     e.dragStart && e.dragStart.set(translate);\n* }).on(\"dragOrigin\", e => {\n*     translate = e.drag.beforeTranslate;\n*     e.target.style.cssText\n*         = `transform-origin: ${e.transformOrigin};`\n*         + `transform: translate(${translate[0]}px, ${translate[1]}px)`;\n* }).on(\"dragOriginEnd\", e => {\n*     console.log(e);\n* });\n*/\n","import {\n    prefix, triggerEvent,\n    fillParams, fillEndParams, calculatePosition,\n    fillCSSObject,\n    catchEvent,\n} from \"../utils\";\nimport {\n    Renderer, RoundableProps, OnRoundStart,\n    RoundableState, OnRound, ControlPose, OnRoundEnd,\n    MoveableManagerInterface,\n    OnRoundGroup,\n    MoveableGroupInterface,\n    OnRoundGroupStart,\n    OnRoundGroupEnd,\n} from \"../types\";\nimport { splitSpace } from \"@daybrush/utils\";\nimport { setDragStart, getDragDist, calculatePointerDist } from \"../gesto/GestoUtils\";\nimport { minus, plus } from \"@scena/matrix\";\nimport {\n    getRadiusValues,\n    getRadiusStyles,\n    splitRadiusPoses,\n} from \"./roundable/borderRadius\";\nimport { fillChildEvents } from \"../groupUtils\";\n\n\nfunction addBorderRadiusByLine(\n    controlPoses: ControlPose[],\n    lineIndex: number,\n    distX: number,\n    distY: number,\n) {\n    // lineIndex\n    // 0 top\n    // 1 right\n    // 2 bottom\n    // 3 left\n\n    const horizontalsLength = controlPoses.filter(({ virtual, horizontal }) => horizontal && !virtual).length;\n    const verticalsLength = controlPoses.filter(({ virtual, vertical }) => vertical && !virtual).length;\n    let controlIndex = -1;\n\n    //top\n    if (lineIndex === 0) {\n        if (horizontalsLength === 0) {\n            controlIndex = 0;\n        } else if (horizontalsLength === 1) {\n            controlIndex = 1;\n        }\n    }\n    // bottom\n    if (lineIndex === 2) {\n        if (horizontalsLength <= 2) {\n            controlIndex = 2;\n        } else if (horizontalsLength <= 3) {\n            controlIndex = 3;\n        }\n    }\n    // left\n    if (lineIndex === 3) {\n        if (verticalsLength === 0) {\n            controlIndex = 4;\n        } else if (verticalsLength < 4) {\n            controlIndex = 7;\n        }\n    }\n\n    // right\n    if (lineIndex === 1) {\n        if (verticalsLength <= 1) {\n            controlIndex = 5;\n        } else if (verticalsLength <= 2) {\n            controlIndex = 6;\n        }\n    }\n    if (controlIndex === -1 || !controlPoses[controlIndex].virtual) {\n        return;\n    }\n    const controlPoseInfo = controlPoses[controlIndex];\n\n    addBorderRadius(controlPoses, controlIndex);\n\n    if (controlIndex < 4) {\n        controlPoseInfo.pos[0] = distX;\n    } else {\n        controlPoseInfo.pos[1] = distY;\n    }\n}\nfunction addBorderRadius(\n    controlPoses: ControlPose[],\n    index: number,\n) {\n    if (index < 4) {\n        controlPoses.slice(0, index + 1).forEach(info => {\n            info.virtual = false;\n        });\n    } else {\n        if (controlPoses[0].virtual) {\n            controlPoses[0].virtual = false;\n        }\n        controlPoses.slice(4, index + 1).forEach(info => {\n            info.virtual = false;\n        });\n    }\n}\nfunction removeBorderRadius(\n    controlPoses: ControlPose[],\n    index: number,\n) {\n    if (index < 4) {\n        controlPoses.slice(index, 4).forEach(info => {\n            info.virtual = true;\n        });\n    } else {\n        controlPoses.slice(index).forEach(info => {\n            info.virtual = true;\n        });\n    }\n}\nfunction getBorderRadius(\n    borderRadius: string,\n    width: number,\n    height: number,\n    minCounts: number[] = [0, 0],\n    full?: boolean,\n) {\n    let values: string[] = [];\n\n    if (!borderRadius || borderRadius === \"0px\") {\n        values = [];\n    } else {\n        values = splitSpace(borderRadius);\n    }\n\n    return getRadiusValues(values, width, height, 0, 0, minCounts, full);\n}\n\nfunction triggerRoundEvent(\n    moveable: MoveableManagerInterface<RoundableProps, RoundableState>,\n    e: any,\n    dist: number[],\n    delta: number[],\n    nextPoses: ControlPose[],\n) {\n    const state = moveable.state;\n    const {\n        width,\n        height,\n    } = state;\n    const {\n        raws,\n        styles,\n        radiusPoses,\n    } = getRadiusStyles(\n        nextPoses,\n        moveable.props.roundRelative!,\n        width,\n        height,\n    );\n    const {\n        horizontals,\n        verticals,\n    } = splitRadiusPoses(radiusPoses, raws);\n    const borderRadius = styles.join(\" \");\n\n    state.borderRadiusState = borderRadius;\n    const params = fillParams<OnRound>(moveable, e, {\n        horizontals,\n        verticals,\n        borderRadius,\n        width,\n        height,\n        delta,\n        dist,\n        ...fillCSSObject({\n            borderRadius,\n        }, e),\n    });\n    triggerEvent(moveable, \"onRound\", params);\n\n    return params;\n}\n\n\nfunction getStyleBorderRadius(moveable: MoveableManagerInterface<RoundableProps, RoundableState>) {\n    const {\n        style,\n    } = moveable.getState();\n    let borderRadius = style.borderRadius || \"\";\n\n    if (!borderRadius && moveable.props.groupable) {\n        const firstTarget = moveable.getTargets()[0];\n\n\n        if (firstTarget) {\n            borderRadius = getComputedStyle(firstTarget).borderRadius;\n            style.borderRadius = borderRadius;\n        }\n    }\n    return borderRadius;\n}\n\n/**\n * @namespace Moveable.Roundable\n * @description Whether to show and drag or double click border-radius\n */\n\nexport default {\n    name: \"roundable\",\n    props: {\n        roundable: Boolean,\n        roundRelative: Boolean,\n        minRoundControls: Array,\n        maxRoundControls: Array,\n        roundClickable: Boolean,\n        roundPadding: Number,\n        isDisplayShadowRoundControls: Boolean,\n    } as const,\n    events: {\n        onRoundStart: \"roundStart\",\n        onRound: \"round\",\n        onRoundEnd: \"roundEnd\",\n        onRoundGroupStart: \"roundGroupStart\",\n        onRoundGroup: \"roundGroup\",\n        onRoundGroupEnd: \"roundGroupEnd\",\n    } as const,\n    css: [\n        `.control.border-radius {\n    background: #d66;\n    cursor: pointer;\n    z-index: 3;\n}`,\n        `.control.border-radius.vertical {\n    background: #d6d;\n    z-index: 2;\n}`,\n        `.control.border-radius.virtual {\n    opacity: 0.5;\n    z-index: 1;\n}`,\n        `:host.round-line-clickable .line.direction {\n    cursor: pointer;\n}`,\n    ],\n    className(moveable: MoveableManagerInterface<RoundableProps, RoundableState>) {\n        const roundClickable = moveable.props.roundClickable;\n\n        return roundClickable === true || roundClickable === \"line\" ? prefix(\"round-line-clickable\") : \"\";\n    },\n    requestStyle(): Array<keyof CSSStyleDeclaration> {\n        return [\"borderRadius\"];\n    },\n    render(moveable: MoveableManagerInterface<RoundableProps, RoundableState>, React: Renderer): any {\n        const {\n            target,\n            width,\n            height,\n            allMatrix,\n            is3d,\n            left,\n            top,\n            borderRadiusState,\n        } = moveable.getState();\n\n        const {\n            minRoundControls = [0, 0],\n            maxRoundControls = [4, 4],\n            zoom,\n            roundPadding = 0,\n            isDisplayShadowRoundControls,\n            groupable,\n        } = moveable.props;\n\n        if (!target) {\n            return null;\n        }\n\n        const borderRadius = borderRadiusState || getStyleBorderRadius(moveable);\n        const n = is3d ? 4 : 3;\n        const radiusValues = getBorderRadius(\n            borderRadius,\n            width, height,\n            minRoundControls,\n            true,\n        );\n\n        if (!radiusValues) {\n            return null;\n        }\n        let verticalCount = 0;\n        let horizontalCount = 0;\n        const basePos = groupable ? [0, 0] : [left, top];\n\n        return radiusValues.map((v, i) => {\n            const horizontal = v.horizontal;\n            const vertical = v.vertical;\n            const direction = v.direction || \"\";\n            const originalPos = [...v.pos];\n\n            horizontalCount += Math.abs(horizontal);\n            verticalCount += Math.abs(vertical);\n\n\n            if (horizontal && direction.indexOf(\"n\") > -1) {\n                originalPos[1] -= roundPadding;\n            }\n            if (vertical && direction.indexOf(\"w\") > -1) {\n                originalPos[0] -= roundPadding;\n            }\n            if (horizontal && direction.indexOf(\"s\") > -1) {\n                originalPos[1] += roundPadding;\n            }\n            if (vertical && direction.indexOf(\"e\") > -1) {\n                originalPos[0] += roundPadding;\n            }\n            const pos = minus(calculatePosition(allMatrix, originalPos, n), basePos);\n\n            const isDisplay = v.vertical\n                ? verticalCount <= maxRoundControls[1] && (isDisplayShadowRoundControls || !v.virtual)\n                : horizontalCount <= maxRoundControls[0] && (isDisplayShadowRoundControls || !v.virtual);\n\n            return <div key={`borderRadiusControl${i}`}\n                className={prefix(\n                    \"control\", \"border-radius\",\n                    v.vertical ? \"vertical\" : \"\",\n                    v.virtual ? \"virtual\" : \"\",\n                )}\n                data-radius-index={i}\n                style={{\n                    display: isDisplay ? \"block\" : \"none\",\n                    transform: `translate(${pos[0]}px, ${pos[1]}px) scale(${zoom})`,\n                }}></div>;\n        });\n    },\n    dragControlCondition(moveable: any, e: any) {\n        if (!e.inputEvent || e.isRequest) {\n            return false;\n        }\n        const className = (e.inputEvent.target.getAttribute(\"class\") || \"\");\n\n        return className.indexOf(\"border-radius\") > -1\n            || (className.indexOf(\"moveable-line\") > -1 && className.indexOf(\"moveable-direction\") > -1);\n    },\n    dragGroupControlCondition(moveable: any, e: any) {\n        return this.dragControlCondition(moveable, e);\n    },\n    dragControlStart(moveable: MoveableManagerInterface<RoundableProps, RoundableState>, e: any) {\n        const { inputEvent, datas } = e;\n        const inputTarget = inputEvent.target;\n        const className = (inputTarget.getAttribute(\"class\") || \"\");\n        const isControl = className.indexOf(\"border-radius\") > -1;\n        const isLine = className.indexOf(\"moveable-line\") > -1 && className.indexOf(\"moveable-direction\") > -1;\n        const controlIndex = isControl ? parseInt(inputTarget.getAttribute(\"data-radius-index\"), 10) : -1;\n        let lineIndex = -1;\n\n        if (isLine) {\n            const indexAttr = inputTarget.getAttribute(\"data-line-key\")! || \"\";\n\n            if (indexAttr) {\n                lineIndex = parseInt(indexAttr.replace(/render-line-/g, \"\"), 10);\n\n                if (isNaN(lineIndex)) {\n                    lineIndex = -1;\n                }\n            }\n        }\n\n        if (!isControl && !isLine) {\n            return false;\n        }\n\n        const params = fillParams<OnRoundStart>(moveable, e, {});\n\n        const result = triggerEvent(\n            moveable, \"onRoundStart\", params);\n\n        if (result === false) {\n            return false;\n        }\n\n        datas.lineIndex = lineIndex;\n        datas.controlIndex = controlIndex;\n        datas.isControl = isControl;\n        datas.isLine = isLine;\n\n        setDragStart(moveable, e);\n\n        const {\n            roundRelative,\n            minRoundControls = [0, 0],\n        } = moveable.props;\n        const state = moveable.state;\n        const {\n            width,\n            height,\n        } = state;\n\n        datas.isRound = true;\n        datas.prevDist = [0, 0];\n        const borderRadius = getStyleBorderRadius(moveable);\n        const controlPoses = getBorderRadius(\n            borderRadius || \"\",\n            width,\n            height,\n            minRoundControls,\n            true,\n        ) || [];\n\n        datas.controlPoses = controlPoses;\n\n        state.borderRadiusState = getRadiusStyles(\n            controlPoses,\n            roundRelative!,\n            width,\n            height,\n        ).styles.join(\" \");\n        return params;\n    },\n    dragControl(moveable: MoveableManagerInterface<RoundableProps, RoundableState>, e: any) {\n        const { datas } = e;\n        const controlPoses = datas.controlPoses as ControlPose[];\n\n        if (!datas.isRound || !datas.isControl || !controlPoses.length) {\n            return false;\n        }\n        const index = datas.controlIndex as number;\n\n        const [distX, distY] = getDragDist(e);\n        const dist = [distX, distY];\n        const delta = minus(dist, datas.prevDist);\n        const {\n            maxRoundControls = [4, 4],\n        } = moveable.props;\n        const { width, height } = moveable.state;\n        const selectedControlPose = controlPoses[index];\n\n        const selectedVertical = selectedControlPose.vertical;\n        const selectedHorizontal = selectedControlPose.horizontal;\n\n        // 0: [0, 1, 2, 3] maxCount === 1\n        // 0: [0, 2] maxCount === 2\n        // 1: [1, 3] maxCount === 2\n\n        // 0: [0] maxCount === 3\n        // 1: [1, 3] maxCount === 3\n\n        const dists = controlPoses.map(pose => {\n            const { horizontal, vertical } = pose;\n            const poseDist = [\n                horizontal * selectedHorizontal * dist[0],\n                vertical * selectedVertical * dist[1],\n            ];\n            if (horizontal) {\n                if (maxRoundControls[0] === 1) {\n                    return poseDist;\n                } else if (maxRoundControls[0] < 4 && horizontal !== selectedHorizontal) {\n                    return poseDist;\n                }\n            } else if (maxRoundControls[1] === 0) {\n                poseDist[1] = vertical * selectedHorizontal * dist[0] / width * height;\n\n                return poseDist;\n            } else if (selectedVertical) {\n                if (maxRoundControls[1] === 1) {\n                    return poseDist;\n                } else if (maxRoundControls[1] < 4 && vertical !== selectedVertical) {\n                    return poseDist;\n                }\n            }\n            return [0, 0];\n        });\n\n        dists[index] = dist;\n        const nextPoses = controlPoses.map((info, i) => {\n            return {\n                ...info,\n                pos: plus(info.pos, dists[i]),\n            };\n        });\n\n        if (index < 4) {\n            nextPoses.slice(0, index + 1).forEach(info => {\n                info.virtual = false;\n            });\n        } else {\n            nextPoses.slice(4, index + 1).forEach(info => {\n                info.virtual = false;\n            });\n        }\n\n        datas.prevDist = [distX, distY];\n\n        return triggerRoundEvent(\n            moveable,\n            e,\n            dist,\n            delta,\n            nextPoses,\n        );\n    },\n    dragControlEnd(moveable: MoveableManagerInterface<RoundableProps, RoundableState>, e: any) {\n        const state = moveable.state;\n\n        state.borderRadiusState = \"\";\n        const { datas, isDouble } = e;\n        if (!datas.isRound) {\n            return false;\n        }\n        const {\n            isControl,\n            controlIndex,\n            isLine,\n            lineIndex,\n        } = datas;\n        const controlPoses = datas.controlPoses as ControlPose[];\n        const length = controlPoses.filter(({ virtual }) => virtual).length;\n        const {\n            roundClickable = true,\n        } = moveable.props;\n\n        if (isDouble && roundClickable) {\n            if (isControl && (roundClickable === true || roundClickable === \"control\")) {\n                removeBorderRadius(controlPoses, controlIndex);\n            } else if (isLine && (roundClickable === true || roundClickable === \"line\")) {\n                const [distX, distY] = calculatePointerDist(moveable, e);\n\n                addBorderRadiusByLine(controlPoses, lineIndex, distX, distY);\n            }\n\n            if (length !== controlPoses.filter(({ virtual }) => virtual).length) {\n                triggerRoundEvent(\n                    moveable,\n                    e,\n                    [0, 0],\n                    [0, 0],\n                    controlPoses,\n                );\n            }\n        }\n        const params = fillEndParams<OnRoundEnd>(moveable, e, {});\n\n        triggerEvent(moveable, \"onRoundEnd\", params);\n        state.borderRadiusState = \"\";\n        return params;\n    },\n    dragGroupControlStart(moveable: MoveableGroupInterface<RoundableProps, RoundableState>, e: any) {\n        const result = this.dragControlStart(moveable, e);\n\n        if (!result) {\n            return false;\n        }\n\n        const moveables = moveable.moveables;\n        const targets = moveable.props.targets!;\n        const events = fillChildEvents(moveable, \"roundable\", e);\n\n        const nextParams: OnRoundGroupStart = {\n            targets: moveable.props.targets!,\n            events: events.map((ev, i) => {\n                return {\n                    ...ev,\n                    target: targets[i],\n                    moveable: moveables[i],\n                    currentTarget: moveables[i],\n                };\n            }),\n            ...result,\n        };\n\n        triggerEvent(moveable, \"onRoundGroupStart\", nextParams);\n        return result;\n    },\n    dragGroupControl(moveable: MoveableGroupInterface<RoundableProps, RoundableState>, e: any) {\n        const result = this.dragControl(moveable, e);\n\n\n        if (!result) {\n            return false;\n        }\n\n        const moveables = moveable.moveables;\n        const targets = moveable.props.targets!;\n        const events = fillChildEvents(moveable, \"roundable\", e);\n\n        const nextParams: OnRoundGroup = {\n            targets: moveable.props.targets!,\n            events: events.map((ev, i) => {\n                return {\n                    ...ev,\n                    target: targets[i],\n                    moveable: moveables[i],\n                    currentTarget: moveables[i],\n                    ...fillCSSObject({\n                        borderRadius: result.borderRadius,\n                    }, ev),\n                };\n            }),\n            ...result,\n        };\n\n        triggerEvent(moveable, \"onRoundGroup\", nextParams);\n        return nextParams;\n    },\n    dragGroupControlEnd(moveable: MoveableGroupInterface<RoundableProps, RoundableState>, e: any) {\n        const moveables = moveable.moveables;\n        const targets = moveable.props.targets!;\n        const events = fillChildEvents(moveable, \"roundable\", e);\n\n        catchEvent(moveable, \"onRound\", parentEvent => {\n            const nextParams: OnRoundGroup = {\n                targets: moveable.props.targets!,\n                events: events.map((ev, i) => {\n                    return {\n                        ...ev,\n                        target: targets[i],\n                        moveable: moveables[i],\n                        currentTarget: moveables[i],\n                        ...fillCSSObject({\n                            borderRadius: parentEvent.borderRadius,\n                        }, ev),\n                    };\n                }),\n                ...parentEvent,\n            };\n            triggerEvent(moveable, \"onRoundGroup\", nextParams);\n        });\n        const result = this.dragControlEnd(moveable, e);\n\n        if (!result) {\n            return false;\n        }\n        const nextParams: OnRoundGroupEnd = {\n            targets: moveable.props.targets!,\n            events: events.map((ev, i) => {\n                return {\n                    ...ev,\n                    target: targets[i],\n                    moveable: moveables[i],\n                    currentTarget: moveables[i],\n                    lastEvent: ev.datas?.lastEvent,\n                };\n            }),\n            ...result,\n        };\n\n        triggerEvent(moveable, \"onRoundGroupEnd\", nextParams);\n        return nextParams;\n    },\n    unset(moveable: MoveableManagerInterface<RoundableProps, RoundableState>) {\n        moveable.state.borderRadiusState = \"\";\n    },\n};\n/**\n * Whether to show and drag or double click border-radius, (default: false)\n * @name Moveable.Roundable#roundable\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     roundable: true,\n *     roundRelative: false,\n * });\n * moveable.on(\"roundStart\", e => {\n *     console.log(e);\n * }).on(\"round\", e => {\n *     e.target.style.borderRadius = e.borderRadius;\n * }).on(\"roundEnd\", e => {\n *     console.log(e);\n * });\n */\n/**\n * % Can be used instead of the absolute px\n * @name Moveable.Roundable#roundRelative\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     roundable: true,\n *     roundRelative: false,\n * });\n * moveable.on(\"roundStart\", e => {\n *     console.log(e);\n * }).on(\"round\", e => {\n *     e.target.style.borderRadius = e.borderRadius;\n * }).on(\"roundEnd\", e => {\n *     console.log(e);\n * });\n */\n/**\n * Minimum number of round controls. It moves in proportion by control. [horizontal, vertical] (default: [0, 0])\n * @name Moveable.Roundable#minRoundControls\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     roundable: true,\n *     roundRelative: false,\n *     minRoundControls: [0, 0],\n * });\n * moveable.minRoundControls = [1, 0];\n */\n/**\n * Maximum number of round controls. It moves in proportion by control. [horizontal, vertical] (default: [4, 4])\n * @name Moveable.Roundable#maxRoundControls\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     roundable: true,\n *     roundRelative: false,\n *     maxRoundControls: [4, 4],\n * });\n * moveable.maxRoundControls = [1, 0];\n */\n/**\n * Whether you can add/delete round controls by double-clicking a line or control.\n * @name Moveable.Roundable#roundClickable\n * @default true\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     roundable: true,\n *     roundRelative: false,\n *     roundClickable: true,\n * });\n * moveable.roundClickable = false;\n */\n\n/**\n * Whether to show a round control that does not actually exist as a shadow\n * @name Moveable.Roundable#isDisplayShadowRoundControls\n * @default false\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     roundable: true,\n *     isDisplayShadowRoundControls: false,\n * });\n * moveable.isDisplayShadowRoundControls = true;\n */\n\n\n/**\n * The padding value of the position of the round control\n * @name Moveable.Roundable#roundPadding\n * @default false\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     roundable: true,\n *     roundPadding: 0,\n * });\n * moveable.roundPadding = 15;\n */\n\n/**\n * When drag start the clip area or controls, the `roundStart` event is called.\n * @memberof Moveable.Roundable\n * @event roundStart\n * @param {Moveable.Roundable.OnRoundStart} - Parameters for the `roundStart` event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     roundable: true,\n *     roundRelative: false,\n * });\n * moveable.on(\"roundStart\", e => {\n *     console.log(e);\n * }).on(\"round\", e => {\n *     e.target.style.borderRadius = e.borderRadius;\n * }).on(\"roundEnd\", e => {\n *     console.log(e);\n * });\n */\n\n\n/**\n * When drag or double click the border area or controls, the `round` event is called.\n * @memberof Moveable.Roundable\n * @event round\n * @param {Moveable.Roundable.OnRound} - Parameters for the `round` event\n * @example\n  * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     roundable: true,\n *     roundRelative: false,\n * });\n * moveable.on(\"roundStart\", e => {\n *     console.log(e);\n * }).on(\"round\", e => {\n *     e.target.style.borderRadius = e.borderRadius;\n * }).on(\"roundEnd\", e => {\n *     console.log(e);\n * });\n */\n\n\n/**\n * When drag end the border area or controls, the `roundEnd` event is called.\n * @memberof Moveable.Roundable\n * @event roundEnd\n * @param {Moveable.Roundable.onRoundEnd} - Parameters for the `roundEnd` event\n * @example\n  * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     roundable: true,\n *     roundRelative: false,\n * });\n * moveable.on(\"roundStart\", e => {\n *     console.log(e);\n * }).on(\"round\", e => {\n *     e.target.style.borderRadius = e.borderRadius;\n * }).on(\"roundEnd\", e => {\n *     console.log(e);\n * });\n */\n\n\n/**\n * When drag start the clip area or controls, the `roundGroupStart` event is called.\n * @memberof Moveable.Roundable\n * @event roundGroupStart\n * @param {Moveable.Roundable.OnRoundGroupStart} - Parameters for the `roundGroupStart` event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     targets: [target1, target2, target3],\n *     roundable: true,\n * });\n * moveable.on(\"roundGroupStart\", e => {\n *     console.log(e.targets);\n * }).on(\"roundGroup\", e => {\n *   e.events.forEach(ev => {\n *       ev.target.style.cssText += ev.cssText;\n *   });\n * }).on(\"roundGroupEnd\", e => {\n *     console.log(e);\n * });\n */\n\n\n/**\n * When drag or double click the border area or controls, the `roundGroup` event is called.\n * @memberof Moveable.Roundable\n * @event roundGroup\n * @param {Moveable.Roundable.OnRoundGroup} - Parameters for the `roundGroup` event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     targets: [target1, target2, target3],\n *     roundable: true,\n * });\n * moveable.on(\"roundGroupStart\", e => {\n *     console.log(e.targets);\n * }).on(\"roundGroup\", e => {\n *   e.events.forEach(ev => {\n *       ev.target.style.cssText += ev.cssText;\n *   });\n * }).on(\"roundGroupEnd\", e => {\n *     console.log(e);\n * });\n */\n\n\n/**\n * When drag end the border area or controls, the `roundGroupEnd` event is called.\n * @memberof Moveable.Roundable\n * @event roundGroupEnd\n * @param {Moveable.Roundable.onRoundGroupEnd} - Parameters for the `roundGroupEnd` event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     targets: [target1, target2, target3],\n *     roundable: true,\n * });\n * moveable.on(\"roundGroupStart\", e => {\n *     console.log(e.targets);\n * }).on(\"roundGroup\", e => {\n *     e.events.forEach(ev => {\n *         ev.target.style.cssText += ev.cssText;\n *     });\n * }).on(\"roundGroupEnd\", e => {\n *     console.log(e);\n * });\n */\n","import {\n    MoveableManagerInterface, BeforeRenderableProps,\n    OnBeforeRenderStart, OnBeforeRender, OnBeforeRenderEnd,\n    MoveableGroupInterface, OnBeforeRenderGroupStart,\n    OnBeforeRenderGroup, OnBeforeRenderGroupEnd,\n} from \"../types\";\nimport { fillParams, triggerEvent } from \"../utils\";\nimport { convertMatrixtoCSS, createIdentityMatrix } from \"@scena/matrix\";\nimport { isArray, splitSpace } from \"@daybrush/utils\";\nimport { fillChildEvents } from \"../groupUtils\";\n\n\nfunction isIdentityMatrix(matrix: string, is3d?: boolean) {\n    const n = is3d ? 4 : 3;\n    const identityMatrix = createIdentityMatrix(n);\n    const value = `matrix${is3d ? \"3d\" : \"\"}(${identityMatrix.join(\",\")})`;\n\n    return matrix === value || matrix === `matrix(1,0,0,1,0,0)`;\n}\nexport default {\n    isPinch: true,\n    name: \"beforeRenderable\",\n    props: {\n    } as const,\n    events: {\n        onBeforeRenderStart: \"beforeRenderStart\",\n        onBeforeRender: \"beforeRender\",\n        onBeforeRenderEnd: \"beforeRenderEnd\",\n        onBeforeRenderGroupStart: \"beforeRenderGroupStart\",\n        onBeforeRenderGroup: \"beforeRenderGroup\",\n        onBeforeRenderGroupEnd: \"beforeRenderGroupEnd\",\n    } as const,\n    dragRelation: \"weak\",\n    setTransform(moveable: MoveableManagerInterface<BeforeRenderableProps>, e: any) {\n        const {\n            is3d,\n            target,\n            targetMatrix,\n        } = moveable.state;\n        const transform = target?.style.transform;\n        const cssMatrix = is3d\n            ? `matrix3d(${targetMatrix.join(\",\")})`\n            : `matrix(${convertMatrixtoCSS(targetMatrix, true)})`;\n        const startTransform = !transform || transform === \"none\" ? cssMatrix : transform;\n\n        e.datas.startTransforms = isIdentityMatrix(startTransform, is3d) ? [] : splitSpace(startTransform);\n    },\n    resetStyle(e: any) {\n        const datas = e.datas;\n\n        datas.nextStyle = {};\n        datas.nextTransforms = e.datas.startTransforms;\n        datas.nextTransformAppendedIndexes = [];\n    },\n    fillDragStartParams(moveable: MoveableManagerInterface<BeforeRenderableProps>, e: any) {\n        return fillParams<OnBeforeRenderStart>(moveable, e, {\n            setTransform: (transform: string | string[]) => {\n                e.datas.startTransforms = isArray(transform) ? transform : splitSpace(transform);\n            },\n            isPinch: !!e.isPinch,\n        });\n    },\n    fillDragParams(moveable: MoveableManagerInterface<BeforeRenderableProps>, e: any) {\n        return fillParams<OnBeforeRender>(moveable, e, {\n            isPinch: !!e.isPinch,\n        });\n    },\n    dragStart(moveable: MoveableManagerInterface<BeforeRenderableProps>, e: any) {\n        this.setTransform(moveable, e);\n        this.resetStyle(e);\n\n        triggerEvent(moveable, `onBeforeRenderStart`, this.fillDragStartParams(moveable, e));\n    },\n    drag(moveable: MoveableManagerInterface<BeforeRenderableProps>, e: any) {\n        this.resetStyle(e);\n        triggerEvent(moveable, `onBeforeRender`, fillParams<OnBeforeRender>(moveable, e, {\n            isPinch: !!e.isPinch,\n        }));\n    },\n    dragEnd(moveable: MoveableManagerInterface<BeforeRenderableProps>, e: any) {\n        triggerEvent(moveable, `onBeforeRenderEnd`, fillParams<OnBeforeRenderEnd>(moveable, e, {\n            isPinch: !!e.isPinch,\n            isDrag: e.isDrag,\n        }));\n    },\n    dragGroupStart(moveable: MoveableGroupInterface<BeforeRenderableProps>, e: any) {\n        this.dragStart(moveable, e);\n\n        const events = fillChildEvents(moveable, \"beforeRenderable\", e);\n        const moveables = moveable.moveables;\n        const params = events.map((childEvent, i) => {\n            const childMoveable = moveables[i];\n\n            this.setTransform(childMoveable, childEvent);\n            this.resetStyle(childEvent);\n\n            return this.fillDragStartParams(childMoveable, childEvent);\n        });\n        triggerEvent(moveable, `onBeforeRenderGroupStart`, fillParams<OnBeforeRenderGroupStart>(moveable, e, {\n            isPinch: !!e.isPinch,\n            targets: moveable.props.targets,\n            setTransform() { },\n            events: params,\n        }));\n    },\n    dragGroup(moveable: MoveableGroupInterface<BeforeRenderableProps>, e: any) {\n        this.drag(moveable, e);\n\n        const events = fillChildEvents(moveable, \"beforeRenderable\", e);\n        const moveables = moveable.moveables;\n        const params = events.map((childEvent, i) => {\n            const childMoveable = moveables[i];\n\n            this.resetStyle(childEvent);\n            return this.fillDragParams(childMoveable, childEvent);\n        });\n        triggerEvent(moveable, `onBeforeRenderGroup`, fillParams<OnBeforeRenderGroup>(moveable, e, {\n            isPinch: !!e.isPinch,\n            targets: moveable.props.targets,\n            events: params,\n        }));\n    },\n    dragGroupEnd(moveable: MoveableGroupInterface<BeforeRenderableProps>, e: any) {\n        this.dragEnd(moveable, e);\n\n        triggerEvent(moveable, `onBeforeRenderGroupEnd`, fillParams<OnBeforeRenderGroupEnd>(moveable, e, {\n            isPinch: !!e.isPinch,\n            isDrag: e.isDrag,\n            targets: moveable.props.targets,\n        }));\n    },\n    dragControlStart(moveable: MoveableManagerInterface<BeforeRenderableProps>, e: any) {\n        return this.dragStart(moveable, e);\n    },\n    dragControl(moveable: MoveableManagerInterface<BeforeRenderableProps>, e: any) {\n        return this.drag(moveable, e);\n    },\n    dragControlEnd(moveable: MoveableManagerInterface<BeforeRenderableProps>, e: any) {\n        return this.dragEnd(moveable, e);\n    },\n    dragGroupControlStart(moveable: MoveableGroupInterface<BeforeRenderableProps>, e: any) {\n        return this.dragGroupStart(moveable, e);\n    },\n    dragGroupControl(moveable: MoveableGroupInterface<BeforeRenderableProps>, e: any) {\n        return this.dragGroup(moveable, e);\n    },\n    dragGroupControlEnd(moveable: MoveableGroupInterface<BeforeRenderableProps>, e: any) {\n        return this.dragGroupEnd(moveable, e);\n    },\n} as const;\n","import { getNextStyle, getNextTransformText } from \"../gesto/GestoUtils\";\nimport { fillChildEvents } from \"../groupUtils\";\nimport {\n    MoveableManagerInterface, RenderableProps, OnRenderStart, OnRender,\n    OnRenderEnd, MoveableGroupInterface,\n    OnRenderGroupStart, OnRenderGroup, OnRenderGroupEnd,\n} from \"../types\";\nimport { triggerEvent, fillParams, fillCSSObject } from \"../utils\";\n\nexport default {\n    name: \"renderable\",\n    props: {\n    } as const,\n    events: {\n        onRenderStart: \"renderStart\",\n        onRender: \"render\",\n        onRenderEnd: \"renderEnd\",\n        onRenderGroupStart: \"renderGroupStart\",\n        onRenderGroup: \"renderGroup\",\n        onRenderGroupEnd: \"renderGroupEnd\",\n    } as const,\n    dragRelation: \"weak\",\n    dragStart(moveable: MoveableManagerInterface<RenderableProps>, e: any) {\n        triggerEvent(moveable, `onRenderStart`, fillParams<OnRenderStart>(moveable, e, {\n            isPinch: !!e.isPinch,\n        }));\n    },\n    drag(moveable: MoveableManagerInterface<RenderableProps>, e: any) {\n        triggerEvent(moveable, `onRender`, this.fillDragParams(moveable, e));\n    },\n    dragAfter(moveable: MoveableManagerInterface<RenderableProps>, e: any) {\n        if (e.resultCount) {\n            return this.drag(moveable, e);\n        }\n    },\n    dragEnd(moveable: MoveableManagerInterface<RenderableProps>, e: any) {\n        triggerEvent(moveable, `onRenderEnd`, this.fillDragEndParams(moveable, e));\n    },\n    dragGroupStart(moveable: MoveableGroupInterface<RenderableProps>, e: any) {\n        triggerEvent(moveable, `onRenderGroupStart`, fillParams<OnRenderGroupStart>(moveable, e, {\n            isPinch: !!e.isPinch,\n            targets: moveable.props.targets,\n        }));\n    },\n    dragGroup(moveable: MoveableGroupInterface<RenderableProps>, e: any) {\n        const events = fillChildEvents(moveable, \"beforeRenderable\", e);\n        const moveables = moveable.moveables;\n        const params = events.map((childEvent, i) => {\n            const childMoveable = moveables[i];\n\n            return this.fillDragParams(childMoveable, childEvent);\n        });\n\n        triggerEvent(moveable, `onRenderGroup`, fillParams<OnRenderGroup>(moveable, e, {\n            isPinch: !!e.isPinch,\n            targets: moveable.props.targets,\n            transform: getNextTransformText(e),\n            ...fillCSSObject(getNextStyle(e)),\n            events: params,\n        },));\n    },\n    dragGroupEnd(moveable: MoveableGroupInterface<RenderableProps>, e: any) {\n        const events = fillChildEvents(moveable, \"beforeRenderable\", e);\n        const moveables = moveable.moveables;\n        const params = events.map((childEvent, i) => {\n            const childMoveable = moveables[i];\n\n            return this.fillDragEndParams(childMoveable, childEvent);\n        });\n\n        triggerEvent(moveable, `onRenderGroupEnd`, fillParams<OnRenderGroupEnd>(moveable, e, {\n            isPinch: !!e.isPinch,\n            isDrag: e.isDrag,\n            targets: moveable.props.targets,\n            events: params,\n            transform: getNextTransformText(e),\n            ...fillCSSObject(getNextStyle(e)),\n        }));\n    },\n    dragControlStart(moveable: MoveableManagerInterface<RenderableProps>, e: any) {\n        return this.dragStart(moveable, e);\n    },\n    dragControl(moveable: MoveableManagerInterface<RenderableProps>, e: any) {\n        return this.drag(moveable, e);\n    },\n    dragControlAfter(moveable: MoveableManagerInterface<RenderableProps>, e: any) {\n        return this.dragAfter(moveable, e);\n    },\n    dragControlEnd(moveable: MoveableManagerInterface<RenderableProps>, e: any) {\n        return this.dragEnd(moveable, e);\n    },\n    dragGroupControlStart(moveable: MoveableGroupInterface<RenderableProps>, e: any) {\n        return this.dragGroupStart(moveable, e);\n    },\n    dragGroupControl(moveable: MoveableGroupInterface<RenderableProps>, e: any) {\n        return this.dragGroup(moveable, e);\n    },\n    dragGroupControlEnd(moveable: MoveableGroupInterface<RenderableProps>, e: any) {\n        return this.dragGroupEnd(moveable, e);\n    },\n    fillDragParams(moveable: MoveableManagerInterface<RenderableProps>, e: any) {\n        return fillParams<OnRender>(moveable, e, {\n            isPinch: !!e.isPinch,\n            transform: getNextTransformText(e),\n            ...fillCSSObject(getNextStyle(e)),\n        });\n    },\n    fillDragEndParams(moveable: MoveableManagerInterface<RenderableProps>, e: any) {\n        return fillParams<OnRenderEnd>(moveable, e, {\n            isPinch: !!e.isPinch,\n            isDrag: e.isDrag,\n            transform: getNextTransformText(e),\n            ...fillCSSObject(getNextStyle(e)),\n        });\n    },\n} as const;\n","import { Able, MoveableManagerInterface, MoveableGroupInterface } from \"../types\";\nimport { hasClass, IObject } from \"@daybrush/utils\";\nimport { convertDragDist, defaultSync } from \"../utils\";\nimport Gesto, { GestoOptions } from \"gesto\";\nimport BeforeRenderable from \"../ables/BeforeRenderable\";\nimport Renderable from \"../ables/Renderable\";\n\nexport function triggerAble(\n    moveable: MoveableManagerInterface,\n    ableType: string,\n    eventOperation: string,\n    eventAffix: string,\n    eventType: any,\n    e: any,\n    requestInstant?: boolean,\n) {\n    const isStart = eventType === \"Start\";\n    const target = moveable.state.target;\n    const isRequest = e.isRequest;\n\n    if (\n        !target\n        || (isStart && eventAffix.indexOf(\"Control\") > -1\n            && !isRequest && moveable.areaElement === e.inputEvent.target)\n    ) {\n        return false;\n    }\n    // \"drag\" \"Control\" \"After\"\n    const eventName = `${eventOperation}${eventAffix}${eventType}`;\n    const conditionName = `${eventOperation}${eventAffix}Condition`;\n    const isEnd = eventType === \"End\";\n    const isAfter = eventType === \"After\";\n    const isFirstStart = isStart && (\n        !moveable.targetGesto || !moveable.controlGesto\n        || (!moveable.targetGesto.isFlag() || !moveable.controlGesto.isFlag())\n    );\n\n    if (isFirstStart) {\n        moveable.updateRect(eventType, true, false);\n    }\n    e.clientDistX = e.distX;\n    e.clientDistY = e.distY;\n    if (eventType === \"\" && !isRequest) {\n        // Convert distX, distY\n        convertDragDist(moveable.state, e);\n    }\n    // const isGroup = eventAffix.indexOf(\"Group\") > -1;\n    const ables: Able[] = [...(moveable as any)[ableType]];\n\n    if (isRequest) {\n        const requestAble = e.requestAble;\n\n        if (!ables.some(able => able.name === requestAble)) {\n            ables.push(...moveable.props.ables!.filter(able => able.name === requestAble));\n        }\n    }\n    if (!ables.length || ables.every(able => able.dragRelation)) {\n        return false;\n    }\n    const eventAbles: Able[] = [BeforeRenderable, ...ables, Renderable].filter((able: any) => able[eventName]);\n    const datas = e.datas;\n\n    if (isFirstStart) {\n        eventAbles.forEach(able => {\n            able.unset && able.unset(moveable);\n        });\n    }\n\n    const inputEvent = e.inputEvent;\n    let inputTarget: Element;\n\n    if (isEnd && inputEvent) {\n        inputTarget = document.elementFromPoint(e.clientX, e.clientY) || inputEvent.target;\n    }\n    let resultCount = 0;\n\n    let isDragStop = false;\n    const stop = () => {\n        isDragStop = true;\n        e.stop?.();\n    };\n    const results = eventAbles.filter((able: any) => {\n        const ableName = able.name;\n        const nextDatas = datas[ableName] || (datas[ableName] = {});\n\n        if (isStart) {\n            nextDatas.isEventStart = !able[conditionName] || able[conditionName](moveable, e);\n        }\n\n        if (nextDatas.isEventStart) {\n            const result = able[eventName](moveable, {\n                ...e,\n                stop,\n                resultCount,\n                datas: nextDatas,\n                originalDatas: datas,\n                inputTarget,\n            });\n\n            (moveable as any)._emitter.off();\n            if (isStart && result === false) {\n                nextDatas.isEventStart = false;\n            }\n            resultCount += result || nextDatas.isEventStart ? 1 : 0;\n            return result;\n        }\n        return false;\n    });\n\n    const isUpdate = results.length;\n    let isForceEnd = false;\n\n    // end ables\n    if (isDragStop) {\n        isForceEnd = true;\n    }\n    if (!isForceEnd && isStart && eventAbles.length && !isUpdate) {\n        isForceEnd = eventAbles.filter(able => {\n            const ableName = able.name;\n            const nextDatas = datas[ableName];\n\n            if (nextDatas.isEventStart) {\n                if (able.dragRelation === \"strong\") {\n                    return false;\n                }\n                // start drag\n                return true;\n            }\n            // cancel event\n            return false;\n        }).length as any;\n    }\n\n    if (isEnd || isForceEnd) {\n        moveable.state.gestos = {};\n\n        if ((moveable as MoveableGroupInterface).moveables) {\n            (moveable as MoveableGroupInterface).moveables.forEach(childMoveable => {\n                childMoveable.state.gestos = {};\n            });\n        }\n        eventAbles.forEach(able => {\n            able.unset && able.unset(moveable);\n        });\n    }\n    if (isStart && !isForceEnd && !isRequest && isUpdate) {\n        e?.preventDefault();\n    }\n    if (moveable.isUnmounted || isForceEnd) {\n        return false;\n    }\n    if ((!isStart && isUpdate && !requestInstant) || isEnd) {\n        const flushSync = moveable.props.flushSync || defaultSync;\n\n        flushSync(() => {\n            moveable.updateRect(isEnd ? eventType : \"\", true, false);\n            moveable.forceUpdate();\n        });\n\n    }\n    if (!isStart && !isEnd && !isAfter && isUpdate && !requestInstant) {\n        triggerAble(moveable, ableType, eventOperation, eventAffix, eventType + \"After\", e);\n    }\n    return true;\n}\n\nexport function checkMoveableTarget(moveable: MoveableManagerInterface) {\n    return (e: { inputEvent: Event }) => {\n        const {\n            dragTarget,\n        } = moveable.props;\n        const eventTarget = e.inputEvent.target as Element;\n        const areaElement = moveable.areaElement;\n\n        return dragTarget && (eventTarget === dragTarget || dragTarget.contains(eventTarget))\n            || eventTarget === areaElement\n            || (!moveable.isMoveableElement(eventTarget) && !moveable.controlBox.getElement().contains(eventTarget))\n            || hasClass(eventTarget, \"moveable-area\")\n            || hasClass(eventTarget, \"moveable-padding\")\n            || hasClass(eventTarget, \"moveable-edgeDraggable\");\n    };\n}\n\nexport function getTargetAbleGesto(\n    moveable: MoveableManagerInterface,\n    moveableTarget: HTMLElement | SVGElement,\n    eventAffix: string,\n) {\n    const controlBox = moveable.controlBox.getElement();\n    const targets: Array<HTMLElement | SVGElement> = [];\n    const dragTarget = moveable.props.dragTarget;\n\n    targets.push(controlBox);\n\n    if (!moveable.props.dragArea || dragTarget) {\n        targets.push(moveableTarget);\n    }\n\n    return getAbleGesto(moveable, targets, \"targetAbles\", eventAffix, {\n        dragStart: checkMoveableTarget(moveable),\n        pinchStart: checkMoveableTarget(moveable),\n    });\n}\nexport function getAbleGesto(\n    moveable: MoveableManagerInterface,\n    target: HTMLElement | SVGElement | Array<HTMLElement | SVGElement>,\n    ableType: string,\n    eventAffix: string,\n    conditionFunctions: IObject<any> = {},\n) {\n    const isTargetAbles = ableType === \"targetAbles\";\n    const {\n        pinchOutside,\n        pinchThreshold,\n        preventClickEventOnDrag,\n        preventClickDefault,\n        checkInput,\n    } = moveable.props;\n    const options: GestoOptions = {\n        preventDefault: true,\n        preventRightClick: true,\n        preventWheelClick: true,\n        container: window,\n        pinchThreshold,\n        pinchOutside,\n        preventClickEventOnDrag: isTargetAbles ? preventClickEventOnDrag : false,\n        preventClickEventOnDragStart: isTargetAbles ? preventClickDefault : false,\n        preventClickEventByCondition: isTargetAbles ? null : (e: MouseEvent) => {\n            return moveable.controlBox.getElement().contains(e.target as Element);\n        },\n        checkInput: isTargetAbles ? checkInput : false,\n    };\n    const gesto = new Gesto(target!, options);\n    const isControl = eventAffix === \"Control\";\n\n    [\"drag\", \"pinch\"].forEach(eventOperation => {\n        [\"Start\", \"\", \"End\"].forEach(eventType => {\n\n            gesto.on(`${eventOperation}${eventType}` as any, e => {\n                const eventName = e.eventType;\n\n                if (conditionFunctions[eventName] && !conditionFunctions[eventName](e)) {\n                    e.stop();\n                    return;\n                }\n                const result = triggerAble(moveable, ableType, eventOperation, eventAffix, eventType, e);\n\n                if (!result) {\n                    e.stop();\n                } else if (moveable.props.stopPropagation || (eventType === \"Start\" && isControl)) {\n                    e?.inputEvent?.stopPropagation();\n                }\n            });\n        });\n    });\n\n    return gesto;\n}\n","import { Able, MoveableManagerInterface } from \"./types\";\n\nexport default class EventManager {\n    private ables: Able[] = [];\n    constructor(\n        private target: HTMLElement | SVGElement | null,\n        private moveable: MoveableManagerInterface | null,\n        private eventName: string,\n    ) {\n        target!.addEventListener(eventName.toLowerCase(), this._onEvent);\n    }\n    public setAbles(ables: Able[]) {\n        this.ables = ables;\n    }\n    public destroy() {\n        this.target!.removeEventListener(this.eventName.toLowerCase(), this._onEvent);\n        this.target = null;\n        this.moveable = null;\n    }\n    private _onEvent = (e: Event) => {\n        const eventName = this.eventName;\n        const moveable = this.moveable!;\n\n        if (moveable.state.disableNativeEvent) {\n            return;\n        }\n        this.ables.forEach(able => {\n            (able as any)[eventName](moveable, {\n                inputEvent: e,\n            });\n        });\n    }\n}\n","import {\n    convertCSStoMatrix, convertDimension,\n    createIdentityMatrix, createOriginMatrix, createScaleMatrix,\n} from \"@scena/matrix\";\nimport { IS_WEBKIT, IS_SAFARI_ABOVE15, IS_FIREFOX } from \"../consts\";\nimport { MatrixInfo } from \"../types\";\nimport {\n    getOffsetInfo, getElementTransform,\n    getTransformMatrix, getPositionFixedInfo,\n    convert3DMatrixes, getOffsetPosInfo,\n    getSVGMatrix, getBodyOffset, getAbsoluteMatrix,\n} from \"../utils\";\n\n\nexport function getShadowRoot(parentElement: HTMLElement | SVGElement) {\n    if (parentElement && parentElement.getRootNode) {\n        const rootNode = parentElement.getRootNode();\n\n        if (rootNode.nodeType === 11) {\n            return rootNode;\n        }\n    }\n    return;\n}\n\nexport function getMatrixStackInfo(\n    target: SVGElement | HTMLElement,\n    container?: SVGElement | HTMLElement | null,\n    checkContainer?: boolean,\n) {\n    let el: SVGElement | HTMLElement | null = target;\n    const matrixes: MatrixInfo[] = [];\n    const documentElement = document.documentElement || document.body;\n    let requestEnd = !checkContainer && target === container || target === documentElement;\n    let isEnd = requestEnd;\n    let is3d = false;\n    let n = 3;\n    let transformOrigin!: number[];\n    let targetTransformOrigin!: number[];\n    let targetMatrix!: number[];\n\n    let hasFixed = false;\n    let offsetContainer = getOffsetInfo(container, container, true).offsetParent;\n    let zoom = 1;\n\n    while (el && !isEnd) {\n        isEnd = requestEnd;\n        const style: CSSStyleDeclaration = getComputedStyle(el);\n        const position = style.position;\n        const transform = getElementTransform(el, style);\n        let matrix: number[] = convertCSStoMatrix(getTransformMatrix(transform));\n        const isFixed = position === \"fixed\";\n        let fixedInfo: {\n            hasTransform: boolean;\n            fixedContainer: HTMLElement | null;\n        } = {\n            hasTransform: false,\n            fixedContainer: null,\n        };\n        if (isFixed) {\n            hasFixed = true;\n            fixedInfo = getPositionFixedInfo(el);\n\n            offsetContainer = fixedInfo.fixedContainer!;\n        }\n\n        // convert 3 to 4\n        const length = matrix.length;\n\n        if (!is3d && length === 16) {\n            is3d = true;\n            n = 4;\n\n            convert3DMatrixes(matrixes);\n            if (targetMatrix) {\n                targetMatrix = convertDimension(targetMatrix, 3, 4);\n            }\n        }\n        if (is3d && length === 9) {\n            matrix = convertDimension(matrix, 3, 4);\n        }\n        const {\n            tagName,\n            hasOffset,\n            isSVG,\n            origin,\n            targetOrigin,\n            offset: offsetPos,\n        } = getOffsetPosInfo(el, target, style);\n        let [\n            offsetLeft,\n            offsetTop,\n        ] = offsetPos;\n\n        if (tagName === \"svg\" && targetMatrix) {\n            // scale matrix for svg's SVGElements.\n            matrixes.push({\n                type: \"target\",\n                target: el,\n                matrix: getSVGMatrix(el as SVGSVGElement, n),\n            });\n            matrixes.push({\n                type: \"offset\",\n                target: el,\n                matrix: createIdentityMatrix(n),\n            });\n        }\n\n        let offsetParent: HTMLElement;\n        let isOffsetEnd = false;\n        let isStatic = false;\n\n        const targetZoom = parseFloat((style as any).zoom) || 1;\n\n        if (isFixed) {\n            offsetParent = fixedInfo.fixedContainer!;\n            isOffsetEnd = true;\n        } else {\n            const offsetInfo = getOffsetInfo(el, container, false, true, style);\n            const offsetZoom = offsetInfo.offsetZoom;\n\n            offsetParent = offsetInfo.offsetParent;\n            isOffsetEnd = offsetInfo.isEnd;\n            isStatic = offsetInfo.isStatic;\n            zoom *= offsetZoom;\n\n            if (offsetZoom !== 1 && isStatic) {\n                offsetLeft -= offsetParent.offsetLeft;\n                offsetTop -= offsetParent.offsetTop;\n            } else if (IS_FIREFOX) {\n                const parentSlotElement = offsetInfo.parentSlotElement;\n\n                if (parentSlotElement) {\n                    let customOffsetParent: HTMLElement | null = offsetParent;\n                    let customOffsetLeft = 0;\n                    let customOffsetTop = 0;\n\n                    while (customOffsetParent) {\n                        if (!getShadowRoot(customOffsetParent)) {\n                            break;\n                        }\n                        customOffsetLeft += customOffsetParent.offsetLeft;\n                        customOffsetTop += customOffsetParent.offsetTop;\n                        customOffsetParent = customOffsetParent.offsetParent as HTMLElement;\n                    }\n                    offsetLeft -= customOffsetLeft;\n                    offsetTop -= customOffsetTop;\n                }\n            }\n        }\n\n        if (\n            IS_WEBKIT && !IS_SAFARI_ABOVE15\n            && hasOffset && !isSVG && isStatic\n            && (position === \"relative\" || position === \"static\")\n        ) {\n            offsetLeft -= offsetParent.offsetLeft;\n            offsetTop -= offsetParent.offsetTop;\n            requestEnd = requestEnd || isOffsetEnd;\n        }\n\n        let parentClientLeft = 0;\n        let parentClientTop = 0;\n        let fixedClientLeft = 0;\n        let fixedClientTop = 0;\n\n        if (isFixed) {\n            if (hasOffset && fixedInfo.hasTransform) {\n                // border\n                fixedClientLeft = offsetParent.clientLeft;\n                fixedClientTop = offsetParent.clientTop;\n            }\n        } else {\n            if (hasOffset && offsetContainer !== offsetParent) {\n                // border\n                parentClientLeft = offsetParent.clientLeft;\n                parentClientTop = offsetParent.clientTop;\n            }\n            if (hasOffset && offsetParent === documentElement) {\n                const margin = getBodyOffset(el, false, style);\n\n                offsetLeft += margin[0];\n                offsetTop += margin[1];\n            }\n        }\n\n        matrixes.push({\n            type: \"target\",\n            target: el,\n            matrix: getAbsoluteMatrix(matrix, n, origin),\n        });\n\n        if (hasOffset) {\n            const isElementTarget = el === target;\n            const scrollLeft = isElementTarget ? 0 : el.scrollLeft;\n            const scrollTop = isElementTarget ? 0 : el.scrollTop;\n\n            matrixes.push({\n                type: \"offset\",\n                target: el,\n                matrix: createOriginMatrix([\n                    offsetLeft - scrollLeft + parentClientLeft - fixedClientLeft,\n                    offsetTop - scrollTop + parentClientTop - fixedClientTop,\n                ], n),\n            });\n        } else {\n            // svg\n            matrixes.push({\n                type: \"offset\",\n                target: el,\n                origin,\n            });\n        }\n        // transform으로 계산되지 않는 zoom을 위한 (0, 0) 을 기준 matrix 추가.\n        if (targetZoom !== 1) {\n            matrixes.push({\n                type: \"zoom\",\n                target: el,\n                matrix: getAbsoluteMatrix(createScaleMatrix([targetZoom, targetZoom], n), n, [0, 0]),\n            });\n        }\n        if (!targetMatrix) {\n            targetMatrix = matrix;\n        }\n        if (!transformOrigin) {\n            transformOrigin = origin;\n        }\n        if (!targetTransformOrigin) {\n            targetTransformOrigin = targetOrigin;\n        }\n\n        if (isEnd || isFixed) {\n            break;\n        } else {\n            el = offsetParent;\n            requestEnd = isOffsetEnd;\n        }\n        if (!checkContainer || el === documentElement) {\n            isEnd = requestEnd;\n        }\n    }\n    if (!targetMatrix) {\n        targetMatrix = createIdentityMatrix(n);\n    }\n    if (!transformOrigin) {\n        transformOrigin = [0, 0];\n    }\n    if (!targetTransformOrigin) {\n        targetTransformOrigin = [0, 0];\n    }\n\n    return {\n        zoom,\n        offsetContainer,\n        matrixes,\n        targetMatrix,\n        transformOrigin,\n        targetOrigin: targetTransformOrigin,\n        is3d,\n        hasFixed,\n    };\n}\n","import { createIdentityMatrix, convertDimension, multiply, createOriginMatrix, ignoreDimension } from \"@scena/matrix\";\nimport { convert3DMatrixes, getOffsetInfo, getSVGOffset, makeMatrixCSS } from \"../utils\";\nimport { getMatrixStackInfo } from \"./getMatrixStackInfo\";\n\nexport interface MoveableElementMatrixInfo {\n    hasZoom: boolean;\n    hasFixed: boolean;\n    originalRootMatrix: number[];\n    rootMatrix: number[];\n    beforeMatrix: number[];\n    offsetMatrix: number[];\n    allMatrix: number[];\n    targetMatrix: number[];\n    transformOrigin: number[];\n    targetOrigin: number[];\n    is3d: boolean;\n    targetTransform: string;\n    offsetContainer: HTMLElement | null,\n    offsetRootContainer: HTMLElement | null,\n}\n\nexport function calculateMatrixStack(\n    target: SVGElement | HTMLElement,\n    container?: SVGElement | HTMLElement | null,\n    rootContainer: SVGElement | HTMLElement | null | undefined = container,\n    isAbsolute3d?: boolean,\n    // prevMatrix?: number[],\n    // prevRootMatrix?: number[],\n    // prevN?: number,\n): MoveableElementMatrixInfo {\n    const {\n        matrixes,\n        is3d,\n        targetMatrix: prevTargetMatrix,\n        transformOrigin,\n        targetOrigin,\n        offsetContainer,\n        hasFixed,\n        zoom: containerZoom,\n    } = getMatrixStackInfo(target, container); // prevMatrix\n    const {\n        matrixes: rootMatrixes,\n        is3d: isRoot3d,\n        offsetContainer: offsetRootContainer,\n        zoom: rootZoom,\n    } = getMatrixStackInfo(offsetContainer, rootContainer, true); // prevRootMatrix\n\n    // if (rootContainer === document.body) {\n    //     console.log(offsetContainer, rootContainer, rootMatrixes);\n    // }\n    const isNext3d = isAbsolute3d || isRoot3d || is3d;\n    const n = isNext3d ? 4 : 3;\n    const isSVGGraphicElement = target.tagName.toLowerCase() !== \"svg\" && \"ownerSVGElement\" in target;\n    let targetMatrix = prevTargetMatrix;\n    // let allMatrix = prevMatrix ? convertDimension(prevMatrix, prevN!, n) : createIdentityMatrix(n);\n    // let rootMatrix = prevRootMatrix ? convertDimension(prevRootMatrix, prevN!, n) : createIdentityMatrix(n);\n    // let beforeMatrix = prevMatrix ? convertDimension(prevMatrix, prevN!, n) : createIdentityMatrix(n);\n    let allMatrix = createIdentityMatrix(n);\n    let rootMatrix = createIdentityMatrix(n);\n    let beforeMatrix = createIdentityMatrix(n);\n    let offsetMatrix = createIdentityMatrix(n);\n    const length = matrixes.length;\n\n    rootMatrixes.reverse();\n    matrixes.reverse();\n\n    if (!is3d && isNext3d) {\n        targetMatrix = convertDimension(targetMatrix, 3, 4);\n\n        convert3DMatrixes(matrixes);\n    }\n    if (!isRoot3d && isNext3d) {\n        convert3DMatrixes(rootMatrixes);\n    }\n\n\n    // rootMatrix = (...) -> container -> offset -> absolute -> offset -> absolute(targetMatrix)\n    // rootMatrixBeforeOffset = lastOffsetMatrix -> (...) -> container\n    // beforeMatrix = (... -> container -> offset -> absolute) -> offset -> absolute(targetMatrix)\n    // offsetMatrix = (... -> container -> offset -> absolute -> offset) -> absolute(targetMatrix)\n\n    rootMatrixes.forEach(info => {\n        rootMatrix = multiply(rootMatrix, info.matrix!, n);\n    });\n    const originalRootContainer = rootContainer || document.body;\n    const endContainer = rootMatrixes[0]?.target\n        || getOffsetInfo(originalRootContainer, originalRootContainer, true).offsetParent;\n    const rootMatrixBeforeOffset = rootMatrixes.slice(1).reduce((matrix, info) => {\n        return multiply(matrix, info.matrix!, n);\n    }, createIdentityMatrix(n));\n    matrixes.forEach((info, i) => {\n        if (length - 2 === i) {\n            // length - 3\n            beforeMatrix = allMatrix.slice();\n        }\n        if (length - 1 === i) {\n            // length - 2\n            offsetMatrix = allMatrix.slice();\n        }\n\n        // calculate for SVGElement\n        if (!info.matrix) {\n            const nextInfo = matrixes[i + 1];\n            const offset = getSVGOffset(\n                info,\n                nextInfo,\n                endContainer,\n                n,\n                multiply(rootMatrixBeforeOffset, allMatrix, n),\n            );\n            info.matrix = createOriginMatrix(offset, n);\n        }\n        allMatrix = multiply(allMatrix, info.matrix!, n);\n    });\n    const isMatrix3d = !isSVGGraphicElement && is3d;\n\n    if (!targetMatrix) {\n        targetMatrix = createIdentityMatrix(isMatrix3d ? 4 : 3);\n    }\n    const targetTransform = makeMatrixCSS(\n        isSVGGraphicElement && targetMatrix.length === 16\n            ? convertDimension(targetMatrix, 4, 3) : targetMatrix,\n        isMatrix3d,\n    );\n\n    const originalRootMatrix = rootMatrix;\n    rootMatrix = ignoreDimension(rootMatrix, n, n);\n\n    return {\n        hasZoom: containerZoom !== 1 || rootZoom !== 1,\n        hasFixed,\n        rootMatrix,\n        originalRootMatrix,\n        beforeMatrix,\n        offsetMatrix,\n        allMatrix,\n        targetMatrix,\n        targetTransform,\n        transformOrigin,\n        targetOrigin,\n        is3d: isNext3d,\n        offsetContainer,\n        offsetRootContainer,\n    };\n}\n","import { createIdentityMatrix } from \"@scena/matrix\";\nimport { ElementSizes, MoveablePosition } from \"../types\";\nimport { calculateMoveablePosition, getSize, getRotationRad } from \"../utils\";\nimport { calculateMatrixStack, MoveableElementMatrixInfo } from \"./calculateMatrixStack\";\n\nexport interface MoveableElementInfo extends MoveableElementMatrixInfo, MoveablePosition, ElementSizes {\n    width: number;\n    height: number;\n    rotation: number;\n}\n\nexport function calculateElementInfo(\n    target?: SVGElement | HTMLElement | null,\n    container?: SVGElement | HTMLElement | null,\n    rootContainer: HTMLElement | SVGElement | null | undefined = container,\n    isAbsolute3d?: boolean,\n): MoveableElementInfo {\n    let width = 0;\n    let height = 0;\n    let rotation = 0;\n    let allResult: {} = {};\n\n    const sizes = getSize(target);\n\n    if (target) {\n        width = sizes.offsetWidth;\n        height = sizes.offsetHeight;\n    }\n\n    if (target) {\n        const result = calculateMatrixStack(\n            target,\n            container,\n            rootContainer,\n            isAbsolute3d,\n            // prevMatrix, prevRootMatrix, prevN,\n        );\n\n        const position = calculateMoveablePosition(\n            result.allMatrix,\n            result.transformOrigin,\n            width, height,\n        );\n        allResult = {\n            ...result,\n            ...position,\n        };\n        const rotationPosition = calculateMoveablePosition(\n            result.allMatrix, [50, 50], 100, 100,\n        );\n        rotation = getRotationRad([rotationPosition.pos1, rotationPosition.pos2], rotationPosition.direction);\n    }\n    const n = isAbsolute3d ? 4 : 3;\n\n    return {\n        hasZoom: false,\n        width,\n        height,\n        rotation,\n        ...sizes,\n        originalRootMatrix: createIdentityMatrix(n),\n        rootMatrix: createIdentityMatrix(n),\n        beforeMatrix: createIdentityMatrix(n),\n        offsetMatrix: createIdentityMatrix(n),\n        allMatrix: createIdentityMatrix(n),\n        targetMatrix: createIdentityMatrix(n),\n        targetTransform: \"\",\n        transformOrigin: [0, 0],\n        targetOrigin: [0, 0],\n        is3d: !!isAbsolute3d,\n        left: 0,\n        top: 0,\n        right: 0,\n        bottom: 0,\n        origin: [0, 0],\n        pos1: [0, 0],\n        pos2: [0, 0],\n        pos3: [0, 0],\n        pos4: [0, 0],\n        direction: 1,\n        hasFixed: false,\n        offsetContainer: null,\n        offsetRootContainer: null,\n        ...allResult,\n    };\n}\n\n\nexport function getElementInfo(\n    target: SVGElement | HTMLElement,\n    container?: SVGElement | HTMLElement | null,\n    rootContainer: SVGElement | HTMLElement | null | undefined = container,\n) {\n    return calculateElementInfo(target, container, rootContainer, true);\n}\n","import { plus, getOrigin, multiply, minus } from \"@scena/matrix\";\nimport { MoveableClientRect, Writable } from \"../types\";\nimport {\n    calculateInversePosition,\n    calculateMoveablePosition,\n    getClientRect, getClientRectByPosition, getOffsetInfo, getTransformOrigin, resetClientRect,\n} from \"../utils\";\nimport { calculateElementInfo, MoveableElementInfo } from \"./getElementInfo\";\n\n\nexport interface MoveableTargetInfo extends MoveableElementInfo {\n    targetClientRect: MoveableClientRect;\n    containerClientRect: MoveableClientRect;\n    moveableClientRect: MoveableClientRect;\n    rootContainerClientRect: MoveableClientRect;\n    beforeDirection: 1 | -1;\n    beforeOrigin: number[];\n    offsetDelta: number[],\n    originalBeforeOrigin: number[];\n    target: HTMLElement | SVGElement | null | undefined;\n    style: Partial<Writable<CSSStyleDeclaration>>;\n}\n\nexport function getMoveableTargetInfo(\n    moveableElement?: HTMLElement | null,\n    target?: HTMLElement | SVGElement | null,\n    container?: HTMLElement | SVGElement | null,\n    parentContainer?: HTMLElement | SVGElement | null,\n    rootContainer?: HTMLElement | SVGElement | null,\n    requestStyle: Array<keyof CSSStyleDeclaration> = [],\n): MoveableTargetInfo {\n    let beforeDirection: 1 | -1 = 1;\n    let beforeOrigin = [0, 0];\n    let targetClientRect = resetClientRect();\n    let moveableClientRect = resetClientRect();\n    let containerClientRect = resetClientRect();\n    let rootContainerClientRect = resetClientRect();\n    let offsetDelta = [0, 0];\n    const style: Partial<Writable<CSSStyleDeclaration>> = {};\n\n    const result = calculateElementInfo(\n        target, container!, rootContainer!,\n        true,\n    );\n    if (target) {\n        const computedStyle = getComputedStyle(target);\n\n        requestStyle.forEach(name => {\n            style[name] = computedStyle[name] as any;\n        });\n        const n = result.is3d ? 4 : 3;\n        const beforePosition = calculateMoveablePosition(\n            result.offsetMatrix,\n            plus(result.transformOrigin, getOrigin(result.targetMatrix, n)),\n            result.width, result.height,\n        );\n        beforeDirection = beforePosition.direction;\n        beforeOrigin = plus(\n            beforePosition.origin,\n            [beforePosition.left - result.left, beforePosition.top - result.top],\n        );\n\n        rootContainerClientRect = getClientRect(result.offsetRootContainer!);\n\n\n        const offsetContainer = getOffsetInfo(parentContainer, parentContainer, true).offsetParent\n            || result.offsetRootContainer!;\n\n        if (result.hasZoom) {\n            const absoluteTargetPosition = calculateMoveablePosition(\n                multiply(result.originalRootMatrix, result.allMatrix),\n                result.transformOrigin,\n                result.width, result.height,\n            );\n            const absoluteContainerPosition = calculateMoveablePosition(\n                result.originalRootMatrix,\n                getTransformOrigin(getComputedStyle(offsetContainer)).map(pos => parseFloat(pos)),\n                offsetContainer.offsetWidth, offsetContainer.offsetHeight,\n            );\n            targetClientRect = getClientRectByPosition(absoluteTargetPosition, rootContainerClientRect);\n            containerClientRect = getClientRectByPosition(\n                absoluteContainerPosition,\n                rootContainerClientRect,\n                offsetContainer,\n                true,\n            );\n\n            if (moveableElement) {\n                const left = absoluteTargetPosition.left;\n                const top = absoluteTargetPosition.top;\n                moveableClientRect = getClientRectByPosition({\n                    left,\n                    top,\n                    bottom: top,\n                    right: top,\n                }, rootContainerClientRect);\n            }\n        } else {\n            targetClientRect = getClientRect(target);\n            containerClientRect = getClientRect(offsetContainer, true);\n\n            if (moveableElement) {\n                moveableClientRect = getClientRect(moveableElement);\n            }\n            const {\n                left: containerClientRectLeft,\n                top: containerClientRectTop,\n                clientLeft: containterClientLeft,\n                clientTop: containerClientTop,\n            } = containerClientRect;\n            const clientDelta = [\n                targetClientRect.left - containerClientRectLeft,\n                targetClientRect.top - containerClientRectTop,\n            ];\n\n            offsetDelta = minus(\n                calculateInversePosition(result.rootMatrix, clientDelta, 4),\n                [containterClientLeft! + result.left, containerClientTop! + result.top],\n            );\n        }\n    }\n\n    return {\n        targetClientRect,\n        containerClientRect,\n        moveableClientRect,\n        rootContainerClientRect,\n        beforeDirection,\n        beforeOrigin,\n        originalBeforeOrigin: beforeOrigin,\n        target,\n        style,\n        offsetDelta,\n        ...result,\n    };\n}\n","import { minus } from \"@scena/matrix\";\nimport { getMinMaxs } from \"overlap-area\";\nimport { MoveableManagerState, PersistRectData } from \"../types\";\n\n\nexport function getPersistState(rect: PersistRectData): Partial<MoveableManagerState> | null {\n    let {\n        pos1,\n        pos2,\n        pos3,\n        pos4,\n    } = rect;\n    if (!pos1 || !pos2 || !pos3 || !pos4) {\n        return null;\n    }\n    const minPos = getMinMaxs([pos1!, pos2!, pos3!, pos4!]);\n    const posDelta = [minPos.minX, minPos.minY];\n    const origin = minus(rect.origin!, posDelta);\n\n    pos1 = minus(pos1, posDelta);\n    pos2 = minus(pos2, posDelta);\n    pos3 = minus(pos3, posDelta);\n    pos4 = minus(pos4, posDelta);\n    return {\n        ...rect,\n        left: rect.left,\n        top: rect.top,\n        posDelta,\n        pos1,\n        pos2,\n        pos3,\n        pos4,\n        origin,\n        beforeOrigin: origin,\n        // originalBeforeOrigin: origin,\n        isPersisted: true,\n    };\n}\n","import * as React from \"react\";\nimport { createElement } from \"react\";\nimport { PREFIX } from \"./consts\";\nimport {\n    prefix,\n    unset,\n    getAbsolutePosesByState,\n    getRect,\n    filterAbles,\n    equals,\n    flat,\n    groupByMap,\n    calculatePadding,\n    getAbsoluteRotation,\n    defaultSync,\n    getRefTarget,\n    groupBy,\n} from \"./utils\";\nimport Gesto from \"gesto\";\nimport { ref } from \"framework-utils\";\nimport {\n    MoveableManagerProps, MoveableManagerState, Able,\n    RectInfo, Requester, PaddingBox, HitRect, MoveableManagerInterface,\n    MoveableDefaultOptions,\n    GroupableProps,\n} from \"./types\";\nimport { triggerAble, getTargetAbleGesto, getAbleGesto, checkMoveableTarget } from \"./gesto/getAbleGesto\";\nimport { plus } from \"@scena/matrix\";\nimport {\n    addClass, cancelAnimationFrame, find,\n    getKeys, IObject, removeClass, requestAnimationFrame,\n} from \"@daybrush/utils\";\nimport { renderLine } from \"./renderDirections\";\nimport { fitPoints, getAreaSize, getOverlapSize, isInside } from \"overlap-area\";\nimport EventManager from \"./EventManager\";\nimport styled from \"react-css-styled\";\nimport EventEmitter from \"@scena/event-emitter\";\nimport { getMoveableTargetInfo } from \"./utils/getMoveableTargetInfo\";\nimport { VIEW_DRAGGING } from \"./classNames\";\nimport { diff } from \"@egjs/list-differ\";\nimport { getPersistState } from \"./utils/persist\";\n// import { getClipPath } from \"./ables/clippable/utils\";\n\nexport default class MoveableManager<T = {}>\n    extends React.PureComponent<MoveableManagerProps<T>, MoveableManagerState> {\n    public static defaultProps: Required<MoveableManagerProps> = {\n        target: null,\n        dragTarget: null,\n        container: null,\n        rootContainer: null,\n        origin: true,\n        parentMoveable: null,\n        wrapperMoveable: null,\n        isWrapperMounted: false,\n        parentPosition: null,\n        portalContainer: null,\n        useResizeObserver: false,\n        linePadding: 0,\n        ables: [],\n        pinchThreshold: 20,\n        dragArea: false,\n        passDragArea: false,\n        transformOrigin: \"\",\n        className: \"\",\n        zoom: 1,\n        triggerAblesSimultaneously: false,\n        padding: {},\n        pinchOutside: true,\n        checkInput: false,\n        groupable: false,\n        hideDefaultLines: false,\n        cspNonce: \"\",\n        translateZ: 0,\n        cssStyled: null,\n        customStyledMap: {},\n        props: {},\n        stopPropagation: false,\n        preventClickDefault: false,\n        preventClickEventOnDrag: true,\n        flushSync: defaultSync,\n        firstRenderState: null,\n        persistData: null,\n        viewContainer: null,\n        useAccuratePosition: false,\n    };\n    public state: MoveableManagerState = {\n        container: null,\n        gestos: {},\n        renderPoses: [[0, 0], [0, 0], [0, 0], [0, 0]],\n        disableNativeEvent: false,\n        posDelta: [0, 0],\n        ...getMoveableTargetInfo(null),\n    };\n    public renderState: Record<string, any> = {};\n    public enabledAbles: Able[] = [];\n    public targetAbles: Able[] = [];\n    public controlAbles: Able[] = [];\n    public controlBox!: { getElement(): HTMLElement };\n    public areaElement!: HTMLElement;\n    public targetGesto!: Gesto;\n    public controlGesto!: Gesto;\n    public rotation = 0;\n    public scale: number[] = [1, 1];\n    public isMoveableMounted = false;\n    public isUnmounted = false;\n\n    public events: Record<string, EventManager | null> = {\n        \"mouseEnter\": null,\n        \"mouseLeave\": null,\n    };\n\n    protected _emitter: EventEmitter = new EventEmitter();\n    protected _prevTarget: HTMLElement | SVGElement | null | undefined = null;\n    protected _prevDragArea = false;\n    protected _isPropTargetChanged = false;\n    protected _hasFirstTarget = false;\n\n    private _observer: ResizeObserver | null = null;\n    private _observerId = 0;\n    public _rootContainer: HTMLElement | null | undefined = null;\n    private _viewContainer: HTMLElement | null | undefined = null;\n    private _viewClassNames: string[] = [];\n\n    public render() {\n        const props = this.props;\n        const state = this.getState();\n        const {\n            parentPosition,\n            className,\n            target: propsTarget,\n            zoom, cspNonce,\n            translateZ,\n            cssStyled: ControlBoxElement,\n            portalContainer,\n            groupable,\n            linePadding,\n        } = props;\n\n        this._checkUpdateRootContainer();\n        this.checkUpdate();\n        this.updateRenderPoses();\n\n        const [parentLeft, parentTop] = parentPosition as number[] || [0, 0];\n        const {\n            left,\n            top,\n            target: stateTarget,\n            direction,\n            hasFixed,\n            offsetDelta,\n        } = state;\n        const groupTargets = (props as any).targets;\n        const isDragging = this.isDragging();\n        const ableAttributes: IObject<boolean> = {};\n        this.getEnabledAbles().forEach(able => {\n            ableAttributes[`data-able-${able.name.toLowerCase()}`] = true;\n        });\n        const ableClassName = this._getAbleClassName();\n        const isDisplay\n            = (groupTargets && groupTargets.length && (stateTarget || groupable))\n            || propsTarget\n            || (!this._hasFirstTarget && this.state.isPersisted);\n        const isVisible = this.controlBox || this.props.firstRenderState || this.props.persistData;\n        const translate = [left - parentLeft, top - parentTop];\n\n        if (!groupable && props.useAccuratePosition) {\n            translate[0] += offsetDelta[0];\n            translate[1] += offsetDelta[1];\n        }\n        const style: Record<string, any> = {\n            \"position\": hasFixed ? \"fixed\" : \"absolute\",\n            \"display\": isDisplay ? \"block\" : \"none\",\n            \"visibility\": isVisible ? \"visible\" : \"hidden\",\n            \"transform\": `translate3d(${translate[0]}px, ${translate[1]}px, ${translateZ})`,\n            \"--zoom\": zoom,\n            \"--zoompx\": `${zoom}px`,\n        };\n        if (linePadding) {\n            style[\"--moveable-line-padding\"] = linePadding;\n        }\n        return (\n            <ControlBoxElement\n                cspNonce={cspNonce}\n                ref={ref(this, \"controlBox\")}\n                className={`${prefix(\"control-box\", direction === -1 ? \"reverse\" : \"\", isDragging ? \"dragging\" : \"\")} ${ableClassName} ${className}`}\n                {...ableAttributes}\n                onClick={this._onPreventClick}\n                portalContainer={portalContainer}\n                style={style}>\n                {this.renderAbles()}\n                {this._renderLines()}\n            </ControlBoxElement>\n        );\n    }\n    public componentDidMount() {\n        this.isMoveableMounted = true;\n        this.isUnmounted = false;\n        this.controlBox.getElement();\n        const props = this.props;\n        const { parentMoveable, container, wrapperMoveable } = props;\n\n\n        this._checkUpdateRootContainer();\n        this._checkUpdateViewContainer();\n        this._updateTargets();\n        this._updateNativeEvents();\n        this._updateEvents();\n        this.updateCheckInput();\n        this._updateObserver(this.props);\n\n        if (!container && !parentMoveable && !wrapperMoveable && !this.state.isPersisted) {\n            this.updateRect(\"\", false, false);\n            this.forceUpdate();\n        }\n    }\n    public componentDidUpdate(prevProps: any) {\n        this._checkUpdateRootContainer();\n        this._checkUpdateViewContainer();\n        this._updateNativeEvents();\n        this._updateEvents();\n        this._updateTargets();\n        this.updateCheckInput();\n        this._updateObserver(prevProps);\n    }\n    public componentWillUnmount() {\n        this.isMoveableMounted = false;\n        this.isUnmounted = true;\n        this._emitter.off();\n\n        const viewContainer = this._viewContainer;\n\n        if (viewContainer) {\n            this._changeAbleViewClassNames([]);\n        }\n        unset(this, \"targetGesto\");\n        unset(this, \"controlGesto\");\n\n        const events = this.events;\n        for (const name in events) {\n            const manager = events[name];\n            manager && manager.destroy();\n        }\n    }\n    public getTargets(): Array<HTMLElement | SVGElement> {\n        const target = this.props.target;\n        return target ? [target] : [];\n    }\n    /**\n     * Get the able used in MoveableManager.\n     * @method Moveable#getAble\n     * @param - able name\n     */\n    public getAble<T extends Able>(ableName: string): T | undefined {\n        const ables: Able[] = this.props.ables || [];\n\n        return find(ables, able => able.name === ableName) as T;\n    }\n    public getContainer(): HTMLElement | SVGElement {\n        const { parentMoveable, wrapperMoveable, container } = this.props;\n\n        return container!\n            || (wrapperMoveable && wrapperMoveable.getContainer())\n            || (parentMoveable && parentMoveable.getContainer())\n            || this.controlBox.getElement().parentElement!;\n    }\n    /**\n     * Check if the target is an element included in the moveable.\n     * @method Moveable#isMoveableElement\n     * @param - the target\n     * @example\n     * import Moveable from \"moveable\";\n     *\n     * const moveable = new Moveable(document.body);\n     *\n     * window.addEventListener(\"click\", e => {\n     *     if (!moveable.isMoveableElement(e.target)) {\n     *         moveable.target = e.target;\n     *     }\n     * });\n     */\n    public isMoveableElement(target: Element) {\n        return target && (target.getAttribute?.(\"class\") || \"\").indexOf(PREFIX) > -1;\n    }\n    /**\n     * You can drag start the Moveable through the external `MouseEvent`or `TouchEvent`. (Angular: ngDragStart)\n     * @method Moveable#dragStart\n     * @param - external `MouseEvent`or `TouchEvent`\n     * @example\n     * import Moveable from \"moveable\";\n     *\n     * const moveable = new Moveable(document.body);\n     *\n     * document.body.addEventListener(\"mousedown\", e => {\n     *     if (!moveable.isMoveableElement(e.target)) {\n     *          moveable.dragStart(e);\n     *     }\n     * });\n     */\n    public dragStart(e: MouseEvent | TouchEvent) {\n        const targetGesto = this.targetGesto;\n        const controlGesto = this.controlGesto;\n\n        if (targetGesto && checkMoveableTarget(this)({ inputEvent: e })) {\n            if (!targetGesto.isFlag()) {\n                targetGesto.triggerDragStart(e);\n            }\n        } else if (controlGesto && this.isMoveableElement(e.target as Element)) {\n            if (!controlGesto.isFlag()) {\n                controlGesto.triggerDragStart(e);\n            }\n        }\n        return this;\n    }\n    /**\n     * Hit test an element or rect on a moveable target.\n     * (100% = 100)\n     * @method Moveable#hitTest\n     * @param - element or rect to test\n     * @return - Get hit test rate (rate > 0 is hitted)\n     * @example\n     * import Moveable from \"moveable\";\n     *\n     * const moveable = new Moveable(document.body);\n     *\n     * document.body.addEventListener(\"mousedown\", e => {\n     *     if (moveable.hitTest(e.target) > 0) {\n     *          console.log(\"hiited\");\n     *     }\n     * });\n     */\n    public hitTest(el: Element | HitRect): number {\n        const { target, pos1, pos2, pos3, pos4, targetClientRect } = this.state;\n\n        if (!target) {\n            return 0;\n        }\n        let rect: Required<HitRect>;\n\n        if (el instanceof Element) {\n            const clientRect = el.getBoundingClientRect();\n\n            rect = {\n                left: clientRect.left,\n                top: clientRect.top,\n                width: clientRect.width,\n                height: clientRect.height,\n            };\n        } else {\n            rect = { width: 0, height: 0, ...el };\n        }\n\n        const {\n            left: rectLeft,\n            top: rectTop,\n            width: rectWidth,\n            height: rectHeight,\n        } = rect;\n        const points = fitPoints([pos1, pos2, pos4, pos3], targetClientRect);\n        const size = getOverlapSize(points, [\n            [rectLeft, rectTop],\n            [rectLeft + rectWidth, rectTop],\n            [rectLeft + rectWidth, rectTop + rectHeight],\n            [rectLeft, rectTop + rectHeight],\n        ]);\n        const totalSize = getAreaSize(points);\n\n        if (!size || !totalSize) {\n            return 0;\n        }\n\n        return Math.min(100, size / totalSize * 100);\n    }\n    /**\n     * Whether the coordinates are inside Moveable\n     * @method Moveable#isInside\n     * @param - x coordinate\n     * @param - y coordinate\n     * @return - True if the coordinate is in moveable or false\n     * @example\n     * import Moveable from \"moveable\";\n     *\n     * const moveable = new Moveable(document.body);\n     *\n     * document.body.addEventListener(\"mousedown\", e => {\n     *     if (moveable.isInside(e.clientX, e.clientY)) {\n     *          console.log(\"inside\");\n     *     }\n     * });\n     */\n    public isInside(clientX: number, clientY: number) {\n        const { target, pos1, pos2, pos3, pos4, targetClientRect } = this.state;\n\n        if (!target) {\n            return false;\n        }\n        return isInside([clientX, clientY], fitPoints([pos1, pos2, pos4, pos3], targetClientRect));\n    }\n    /**\n     * If the width, height, left, and top of all elements change, update the shape of the moveable.\n     * @method Moveable#updateRect\n     * @example\n     * import Moveable from \"moveable\";\n     *\n     * const moveable = new Moveable(document.body);\n     *\n     * window.addEventListener(\"resize\", e => {\n     *     moveable.updateRect();\n     * });\n     */\n    public updateRect(type?: \"Start\" | \"\" | \"End\", isTarget?: boolean, isSetState: boolean = true) {\n        const props = this.props;\n        const parentMoveable = props.parentMoveable;\n        const state = this.state;\n        const target = (state.target || this.props.target) as HTMLElement | SVGElement;\n        const container = this.getContainer();\n        const rootContainer = parentMoveable\n            ? (parentMoveable as any)._rootContainer\n            : this._rootContainer;\n        const nextState = getMoveableTargetInfo(\n            this.controlBox && this.controlBox.getElement(),\n            target,\n            container,\n            container,\n            rootContainer || container,\n            this._getRequestStyles(),\n        );\n\n        if (!target && this._hasFirstTarget && props.persistData) {\n            const persistState = getPersistState(props.persistData);\n\n            for (const name in persistState) {\n                (nextState as any)[name] = (persistState as any)[name];\n            }\n        }\n        this.updateState(\n            nextState,\n            parentMoveable ? false : isSetState,\n        );\n    }\n    /**\n     * Check if the moveable state is being dragged.\n     * @method Moveable#isDragging\n     * @param - If you want to check if able is dragging, specify ableName.\n     * @example\n     * import Moveable from \"moveable\";\n     *\n     * const moveable = new Moveable(document.body);\n     *\n     * // false\n     * console.log(moveable.isDragging());\n     *\n     * moveable.on(\"drag\", () => {\n     *   // true\n     *   console.log(moveable.isDragging());\n     * });\n     */\n    public isDragging(ableName?: string) {\n        const targetGesto = this.targetGesto;\n        const controlGesto = this.controlGesto;\n\n        if (targetGesto?.isFlag()) {\n            if (!ableName) {\n                return true;\n            }\n            const data = targetGesto.getEventData();\n\n            return !!data[ableName]?.isEventStart;\n        }\n        if (controlGesto?.isFlag()) {\n            if (!ableName) {\n                return true;\n            }\n            const data = controlGesto.getEventData();\n\n            return !!data[ableName]?.isEventStart;\n        }\n        return false;\n    }\n    /**\n     * If the width, height, left, and top of the only target change, update the shape of the moveable.\n     * @method Moveable#updateTarget\n     * @example\n     * import Moveable from \"moveable\";\n     *\n     * const moveable = new Moveable(document.body);\n     *\n     * moveable.updateTarget();\n     */\n    public updateTarget(type?: \"Start\" | \"\" | \"End\") {\n        this.updateRect(type, true);\n    }\n    /**\n     * You can get the vertex information, position and offset size information of the target based on the container.\n     * @method Moveable#getRect\n     * @return - The Rect Info\n     * @example\n     * import Moveable from \"moveable\";\n     *\n     * const moveable = new Moveable(document.body);\n     *\n     * const rectInfo = moveable.getRect();\n     */\n    public getRect(): RectInfo {\n        const state = this.state;\n        const poses = getAbsolutePosesByState(this.state);\n        const [pos1, pos2, pos3, pos4] = poses;\n        const rect = getRect(poses);\n        const {\n            width: offsetWidth,\n            height: offsetHeight,\n        } = state;\n        const {\n            width,\n            height,\n            left,\n            top,\n        } = rect;\n        const statePos = [state.left, state.top];\n        const origin = plus(statePos, state.origin);\n        const beforeOrigin = plus(statePos, state.beforeOrigin);\n        const transformOrigin = state.transformOrigin;\n\n        return {\n            width,\n            height,\n            left,\n            top,\n            pos1,\n            pos2,\n            pos3,\n            pos4,\n            offsetWidth,\n            offsetHeight,\n            beforeOrigin,\n            origin,\n            transformOrigin,\n            rotation: this.getRotation(),\n        };\n    }\n    /**\n     * Get a manager that manages the moveable's state and props.\n     * @method Moveable#getManager\n     * @return - The Rect Info\n     * @example\n     * import Moveable from \"moveable\";\n     *\n     * const moveable = new Moveable(document.body);\n     *\n     * const manager = moveable.getManager(); // real moveable class instance\n     */\n    public getManager(): MoveableManagerInterface<any, any> {\n        return this as any;\n    }\n    /**\n     * You can stop the dragging currently in progress through a method from outside.\n     * @method Moveable#stopDrag\n     * @return - The Rect Info\n     * @example\n     * import Moveable from \"moveable\";\n     *\n     * const moveable = new Moveable(document.body);\n     *\n     * moveable.stopDrag();\n     */\n    public stopDrag(type?: \"target\" | \"control\"): void {\n        if (!type || type === \"target\") {\n            this.targetGesto?.stop();\n        }\n        if (!type || type === \"control\") {\n            this.controlGesto?.stop();\n        }\n    }\n    public getRotation() {\n        const {\n            pos1,\n            pos2,\n            direction,\n        } = this.state;\n\n        return getAbsoluteRotation(pos1, pos2, direction);\n    }\n    /**\n     * Request able through a method rather than an event.\n     * At the moment of execution, requestStart is executed,\n     * and then request and requestEnd can be executed through Requester.\n     * @method Moveable#request\n     * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Draggable.html#request|Draggable Requester}\n     * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Resizable.html#request|Resizable Requester}\n     * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Scalable.html#request|Scalable Requester}\n     * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Rotatable.html#request|Rotatable Requester}\n     * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.OriginDraggable.html#request|OriginDraggable Requester}\n     * @param - ableName\n     * @param - request to be able params.\n     * @param - If isInstant is true, request and requestEnd are executed immediately.\n     * @return - Able Requester. If there is no request in able, nothing will work.\n     * @example\n     * import Moveable from \"moveable\";\n     *\n     * const moveable = new Moveable(document.body);\n     *\n     * // Instantly Request (requestStart - request - requestEnd)\n     * moveable.request(\"draggable\", { deltaX: 10, deltaY: 10 }, true);\n     *\n     * // Start move\n     * const requester = moveable.request(\"draggable\");\n     * requester.request({ deltaX: 10, deltaY: 10 });\n     * requester.request({ deltaX: 10, deltaY: 10 });\n     * requester.request({ deltaX: 10, deltaY: 10 });\n     * requester.requestEnd();\n     */\n    public request(ableName: string, param: IObject<any> = {}, isInstant?: boolean): Requester {\n        const { ables, groupable } = this.props as any;\n        const requsetAble: Able = ables!.filter((able: Able) => able.name === ableName)[0];\n\n        if (this.isDragging() || !requsetAble || !requsetAble.request) {\n            return {\n                request() {\n                    return this;\n                },\n                requestEnd() {\n                    return this;\n                },\n            };\n        }\n        const self = this;\n        const ableRequester = requsetAble.request(this);\n\n        const requestInstant = isInstant || param.isInstant;\n        const ableType = ableRequester.isControl ? \"controlAbles\" : \"targetAbles\";\n        const eventAffix = `${(groupable ? \"Group\" : \"\")}${ableRequester.isControl ? \"Control\" : \"\"}`;\n\n        const requester = {\n            request(ableParam: IObject<any>) {\n                triggerAble(self, ableType, \"drag\", eventAffix, \"\", {\n                    ...ableRequester.request(ableParam),\n                    requestAble: ableName,\n                    isRequest: true,\n                }, requestInstant);\n                return this;\n            },\n            requestEnd() {\n                triggerAble(self, ableType, \"drag\", eventAffix, \"End\", {\n                    ...ableRequester.requestEnd(),\n                    requestAble: ableName,\n                    isRequest: true,\n                }, requestInstant);\n                return this;\n            },\n        };\n\n        triggerAble(self, ableType, \"drag\", eventAffix, \"Start\", {\n            ...ableRequester.requestStart(param),\n            requestAble: ableName,\n            isRequest: true,\n        }, requestInstant);\n\n        return requestInstant ? requester.request(param).requestEnd() : requester;\n    }\n    /**\n     * Remove the Moveable object and the events.\n     * @method Moveable#destroy\n     * @example\n     * import Moveable from \"moveable\";\n     *\n     * const moveable = new Moveable(document.body);\n     *\n     * moveable.destroy();\n     */\n    public destroy(): void {\n        this.componentWillUnmount();\n    }\n    public updateRenderPoses() {\n        const state = this.getState();\n        const props = this.props;\n        const {\n            originalBeforeOrigin,\n            transformOrigin,\n            allMatrix, is3d,\n            pos1, pos2, pos3, pos4,\n            left: stateLeft,\n            top: stateTop,\n            // offsetWidth,\n            // offsetHeight,\n            isPersisted,\n        } = state;\n        const {\n            left = 0,\n            top = 0,\n            bottom = 0,\n            right = 0,\n        } = (props.padding || {}) as PaddingBox;\n        const n = is3d ? 4 : 3;\n\n        // const clipPathInfo = getClipPath(\n        //     props.target,\n        //     offsetWidth,\n        //     offsetHeight,\n        // );\n\n        // if (clipPathInfo) {\n        //     left -= Math.max(0, clipPathInfo.left);\n        //     top -= Math.max(0, clipPathInfo.top);\n        //     bottom -= Math.max(0, offsetHeight - clipPathInfo.bottom);\n        //     right -= Math.max(0, offsetWidth - clipPathInfo.right);\n        // }\n\n        let absoluteOrigin: number[] = [];\n\n        if (isPersisted) {\n            absoluteOrigin = transformOrigin;\n        } else if (this.controlBox && props.groupable) {\n            absoluteOrigin = originalBeforeOrigin;\n        } else {\n            absoluteOrigin = plus(originalBeforeOrigin, [stateLeft, stateTop]);\n        }\n\n        state.renderPoses = [\n            plus(pos1, calculatePadding(allMatrix, [-left, -top], transformOrigin, absoluteOrigin, n)),\n            plus(pos2, calculatePadding(allMatrix, [right, -top], transformOrigin, absoluteOrigin, n)),\n            plus(pos3, calculatePadding(allMatrix, [-left, bottom], transformOrigin, absoluteOrigin, n)),\n            plus(pos4, calculatePadding(allMatrix, [right, bottom], transformOrigin, absoluteOrigin, n)),\n        ];\n    }\n    public checkUpdate() {\n        this._isPropTargetChanged = false;\n        const { target, container, parentMoveable } = this.props;\n        const {\n            target: stateTarget,\n            container: stateContainer,\n        } = this.state;\n\n        if (!stateTarget && !target) {\n            return;\n        }\n        this.updateAbles();\n\n        const isTargetChanged = !equals(stateTarget, target);\n        const isChanged = isTargetChanged || !equals(stateContainer, container);\n\n        if (!isChanged) {\n            return;\n        }\n        const moveableContainer = container || this.controlBox;\n\n        if (moveableContainer) {\n            this.unsetAbles();\n        }\n        this.updateState({ target, container });\n\n        if (!parentMoveable && moveableContainer) {\n            this.updateRect(\"End\", false, false);\n        }\n        this._isPropTargetChanged = isTargetChanged;\n    }\n    public waitToChangeTarget(): Promise<void> {\n        return new Promise(() => { });\n    }\n    public triggerEvent(name: string, e: any): any {\n        this._emitter.trigger(name, e);\n        const callback = (this.props as any)[name];\n\n        return callback && callback(e);\n    }\n    public useCSS(tag: string, css: string) {\n        const customStyleMap = this.props.customStyledMap as Record<string, any>;\n\n        const key = tag + css;\n\n        if (!customStyleMap[key]) {\n            customStyleMap[key] = styled(tag, css);\n        }\n        return customStyleMap[key];\n    }\n    public checkUpdateRect = () => {\n        if (this.isDragging()) {\n            return;\n        }\n        const parentMoveable = this.props.parentMoveable;\n\n        if (parentMoveable) {\n            (parentMoveable as MoveableManager).checkUpdateRect();\n            return;\n        }\n        cancelAnimationFrame(this._observerId);\n        this._observerId = requestAnimationFrame(() => {\n            if (this.isDragging()) {\n                return;\n            }\n            this.updateRect();\n        });\n    }\n    public getState(): MoveableManagerState {\n        const props = this.props;\n        if (props.target || (props as any).targets?.length) {\n            this._hasFirstTarget = true;\n        }\n        const hasControlBox = this.controlBox;\n        const persistData = props.persistData;\n        const firstRenderState = props.firstRenderState;\n\n        if (firstRenderState && !hasControlBox) {\n            return firstRenderState;\n        }\n        if (!this._hasFirstTarget && persistData) {\n            const persistState = getPersistState(persistData);\n\n            if (persistState) {\n                this.updateState(persistState, false);\n                return this.state;\n            }\n        }\n        (this.state as any).isPersisted = false;\n        return this.state;\n    }\n    public updateSelectors() { }\n    protected unsetAbles() {\n        this.targetAbles.forEach(able => {\n            if (able.unset) {\n                able.unset(this);\n            }\n        });\n    }\n    protected updateAbles(\n        ables: Able[] = this.props.ables!,\n        eventAffix: string = \"\",\n    ) {\n        const props = this.props as any;\n        const triggerAblesSimultaneously = props.triggerAblesSimultaneously;\n        const enabledAbles = this.getEnabledAbles(ables);\n\n        const dragStart = `drag${eventAffix}Start` as \"dragStart\";\n        const pinchStart = `pinch${eventAffix}Start` as \"pinchStart\";\n        const dragControlStart = `drag${eventAffix}ControlStart` as \"dragControlStart\";\n\n        const targetAbles = filterAbles(enabledAbles, [dragStart, pinchStart], triggerAblesSimultaneously);\n        const controlAbles = filterAbles(enabledAbles, [dragControlStart], triggerAblesSimultaneously);\n\n        this.enabledAbles = enabledAbles;\n        this.targetAbles = targetAbles;\n        this.controlAbles = controlAbles;\n    }\n    protected updateState(nextState: any, isSetState?: boolean) {\n        if (isSetState) {\n            if (this.isUnmounted) {\n                return;\n            }\n            this.setState(nextState);\n        } else {\n            const state = this.state;\n\n            for (const name in nextState) {\n                (state as any)[name] = nextState[name];\n            }\n        }\n    }\n    protected getEnabledAbles(ables: Able[] = this.props.ables!) {\n        const props = this.props as any;\n\n        return ables.filter(able => able && (\n            (able.always && props[able.name] !== false)\n            || props[able.name]));\n    }\n    protected renderAbles() {\n        const props = this.props as any;\n        const triggerAblesSimultaneously = props.triggerAblesSimultaneously;\n        const Renderer = {\n            createElement,\n        };\n\n        this.renderState = {};\n\n        return groupByMap(flat<any>(\n            filterAbles(this.getEnabledAbles(), [\"render\"], triggerAblesSimultaneously).map(({ render }) => {\n                return render!(this, Renderer) || [];\n            })).filter(el => el), ({ key }) => key).map(group => group[0]);\n    }\n    protected updateCheckInput() {\n        this.targetGesto && (this.targetGesto.options.checkInput = this.props.checkInput);\n    }\n    protected _getRequestStyles() {\n        const styleNames = this.getEnabledAbles().reduce((names, able) => {\n            const ableStyleNames = (able.requestStyle?.() ?? []) as Array<keyof CSSStyleDeclaration>;\n\n            return [...names, ...ableStyleNames];\n        }, [] as Array<keyof CSSStyleDeclaration>);\n\n\n        return styleNames;\n    }\n    protected _updateObserver(prevProps: MoveableDefaultOptions) {\n        const props = this.props;\n        const target = props.target;\n\n        if (!window.ResizeObserver || !target || !props.useResizeObserver) {\n            this._observer?.disconnect();\n            return;\n        }\n\n        if (prevProps.target === target && this._observer) {\n            return;\n        }\n\n        const observer = new ResizeObserver(this.checkUpdateRect);\n\n        observer.observe(target!, {\n            box: \"border-box\",\n        });\n        this._observer = observer;\n\n        return;\n    }\n    protected _updateEvents() {\n        const controlBoxElement = this.controlBox.getElement();\n        const hasTargetAble = this.targetAbles.length;\n        const hasControlAble = this.controlAbles.length;\n        const props = this.props;\n        const target = props.dragTarget || props.target;\n        const isUnset = (!hasTargetAble && this.targetGesto)\n            || this._isTargetChanged(true);\n\n        if (isUnset) {\n            unset(this, \"targetGesto\");\n            this.updateState({ gesto: null });\n        }\n        if (!hasControlAble) {\n            unset(this, \"controlGesto\");\n        }\n\n        if (target && hasTargetAble && !this.targetGesto) {\n            this.targetGesto = getTargetAbleGesto(this, target!, \"\");\n        }\n        if (!this.controlGesto && hasControlAble) {\n            this.controlGesto = getAbleGesto(this, controlBoxElement, \"controlAbles\", \"Control\");\n        }\n    }\n    protected _updateTargets() {\n        const props = this.props;\n\n        this._prevTarget = props.dragTarget || props.target;\n        this._prevDragArea = props.dragArea!;\n    }\n    private _renderLines() {\n        const props = this.props;\n        const {\n            zoom,\n            hideDefaultLines,\n            hideChildMoveableDefaultLines,\n            parentMoveable,\n        } = props as MoveableManagerProps<GroupableProps>;\n\n        if (hideDefaultLines || (parentMoveable && hideChildMoveableDefaultLines)) {\n            return [];\n        }\n        const renderPoses = this.getState().renderPoses;\n        const Renderer = {\n            createElement,\n        };\n\n        return [\n            [0, 1],\n            [1, 3],\n            [3, 2],\n            [2, 0],\n        ].map(([from, to], i) => {\n            return renderLine(Renderer, \"\", renderPoses[from], renderPoses[to], zoom!, `render-line-${i}`);\n        });\n    }\n    private _onPreventClick = (e: any) => {\n        e.stopPropagation();\n        e.preventDefault();\n        // removeEvent(window, \"click\", this._onPreventClick, true);\n    }\n    private _isTargetChanged(useDragArea?: boolean) {\n        const props = this.props;\n        const target = props.dragTarget || props.target;\n        const prevTarget = this._prevTarget;\n        const prevDragArea = this._prevDragArea;\n        const dragArea = props.dragArea;\n\n        // check target without dragArea\n        const isTargetChanged = !dragArea && prevTarget !== target;\n        const isDragAreaChanged = (useDragArea || dragArea) && prevDragArea !== dragArea;\n\n        return isTargetChanged || isDragAreaChanged;\n    }\n    private _updateNativeEvents() {\n        const props = this.props;\n        const target = props.dragArea ? this.areaElement : this.state.target;\n        const events = this.events;\n        const eventKeys = getKeys(events);\n\n        if (this._isTargetChanged()) {\n            for (const eventName in events) {\n                const manager = events[eventName];\n                manager && manager.destroy();\n                events[eventName] = null;\n            }\n        }\n        if (!target) {\n            return;\n        }\n        const enabledAbles = this.enabledAbles;\n        eventKeys.forEach(eventName => {\n            const ables = filterAbles(enabledAbles, [eventName] as any);\n            const hasAbles = ables.length > 0;\n            let manager = events[eventName];\n\n            if (!hasAbles) {\n                if (manager) {\n                    manager.destroy();\n                    events[eventName] = null;\n                }\n                return;\n            }\n            if (!manager) {\n                manager = new EventManager(target, this, eventName);\n                events[eventName] = manager;\n            }\n            manager.setAbles(ables);\n        });\n    }\n    private _checkUpdateRootContainer() {\n        const rootContainer = this.props.rootContainer;\n\n        if (!this._rootContainer && rootContainer) {\n            this._rootContainer = getRefTarget(rootContainer, true);\n        }\n    }\n    private _checkUpdateViewContainer() {\n        const viewContainerOption = this.props.viewContainer;\n\n        if (!this._viewContainer && viewContainerOption) {\n            this._viewContainer = getRefTarget(viewContainerOption, true);\n        }\n        const viewContainer = this._viewContainer;\n\n        if (viewContainer) {\n            this._changeAbleViewClassNames([\n                ...this._getAbleViewClassNames(),\n                this.isDragging() ? VIEW_DRAGGING : \"\",\n            ]);\n        }\n    }\n    private _changeAbleViewClassNames(classNames: string[]) {\n        const viewContainer = this._viewContainer!;\n        const nextClassNames = groupBy(\n            classNames.filter(Boolean),\n            el => el,\n        ).map(([className]) => className);\n        const prevClassNames = this._viewClassNames;\n\n        const {\n            removed,\n            added,\n        } = diff(prevClassNames, nextClassNames);\n\n        removed.forEach(index => {\n            removeClass(viewContainer, prevClassNames[index]);\n        });\n        added.forEach(index => {\n            addClass(viewContainer, nextClassNames[index]);\n        });\n\n        this._viewClassNames = nextClassNames;\n\n    }\n    private _getAbleViewClassNames() {\n        return (this.getEnabledAbles().map(able => {\n            return (able.viewClassName?.(this) || \"\");\n        }).join(\" \") + ` ${this._getAbleClassName(\"-view\")}`).split(/\\s+/g);\n    }\n    private _getAbleClassName(classPrefix = \"\") {\n        const ables = this.getEnabledAbles();\n\n        const targetGesto = this.targetGesto;\n        const controlGesto = this.controlGesto;\n        const targetGestoData: Record<string, any> = targetGesto?.isFlag()\n            ? targetGesto.getEventData() : {};\n        const controlGestoData: Record<string, any> = controlGesto?.isFlag()\n            ? controlGesto.getEventData() : {};\n\n        return ables.map(able => {\n            const name = able.name;\n            let className = able.className?.(this) || \"\";\n\n            if (\n                targetGestoData[name]?.isEventStart\n                || controlGestoData[name]?.isEventStart\n            ) {\n                className += ` ${prefix(`${name}${classPrefix}-dragging`)}`;\n            }\n            return className.trim();\n        }).filter(Boolean).join(\" \");\n    }\n}\n\n/**\n * The target to indicate Moveable Control Box.\n * @name Moveable#target\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body);\n * moveable.target = document.querySelector(\".target\");\n */\n/**\n * Zooms in the elements of a moveable.\n * @name Moveable#zoom\n * @default 1\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body);\n * moveable.zoom = 2;\n */\n\n/**\n * Whether the target size is detected and updated whenever it changes.\n * @name Moveable#useResizeObserver\n * @default false\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body);\n * moveable.useResizeObserver = true;\n */\n\n/**\n * Resize, Scale Events at edges\n * @name Moveable#edge\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body);\n * moveable.edge = true;\n */\n\n/**\n * You can specify the className of the moveable controlbox.\n * @name Moveable#className\n * @default \"\"\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *   className: \"\",\n * });\n *\n * moveable.className = \"moveable1\";\n */\n\n/**\n * The target(s) to drag Moveable target(s)\n * @name Moveable#dragTarget\n * @default target\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body);\n * moveable.target = document.querySelector(\".target\");\n * moveable.dragTarget = document.querySelector(\".dragTarget\");\n */\n\n/**\n * `renderStart` event occurs at the first start of all events.\n * @memberof Moveable\n * @event renderStart\n * @param {Moveable.OnRenderStart} - Parameters for the `renderStart` event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     target: document.querySelector(\".target\"),\n * });\n * moveable.on(\"renderStart\", ({ target }) => {\n *     console.log(\"onRenderStart\", target);\n * });\n */\n\n/**\n * `render` event occurs before the target is drawn on the screen.\n * @memberof Moveable\n * @event render\n * @param {Moveable.OnRender} - Parameters for the `render` event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     target: document.querySelector(\".target\"),\n * });\n * moveable.on(\"render\", ({ target }) => {\n *     console.log(\"onRender\", target);\n * });\n */\n\n/**\n * `renderEnd` event occurs at the end of all events.\n * @memberof Moveable\n * @event renderEnd\n * @param {Moveable.OnRenderEnd} - Parameters for the `renderEnd` event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     target: document.querySelector(\".target\"),\n * });\n * moveable.on(\"renderEnd\", ({ target }) => {\n *     console.log(\"onRenderEnd\", target);\n * });\n */\n\n/**\n * `renderGroupStart` event occurs at the first start of all events in group.\n * @memberof Moveable\n * @event renderGroupStart\n * @param {Moveable.OnRenderGroupStart} - Parameters for the `renderGroupStart` event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\n * });\n * moveable.on(\"renderGroupStart\", ({ targets }) => {\n *     console.log(\"onRenderGroupStart\", targets);\n * });\n */\n\n/**\n * `renderGroup` event occurs before the target is drawn on the screen in group.\n * @memberof Moveable\n * @event renderGroup\n * @param {Moveable.OnRenderGroup} - Parameters for the `renderGroup` event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\n * });\n * moveable.on(\"renderGroup\", ({ targets }) => {\n *     console.log(\"onRenderGroup\", targets);\n * });\n */\n\n/**\n * `renderGroupEnd` event occurs at the end of all events in group.\n * @memberof Moveable\n * @event renderGroupEnd\n * @param {Moveable.OnRenderGroupEnd} - Parameters for the `renderGroupEnd` event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\n * });\n * moveable.on(\"renderGroupEnd\", ({ targets }) => {\n *     console.log(\"onRenderGroupEnd\", targets);\n * });\n */\n","import { minus } from \"@scena/matrix\";\nimport { refs } from \"framework-utils\";\nimport MoveableManager from \"../MoveableManager\";\nimport { renderLine } from \"../renderDirections\";\nimport { Renderer, MoveableGroupInterface, GroupableProps } from \"../types\";\nimport { flat } from \"../utils\";\n\nexport default {\n    name: \"groupable\",\n    props: {\n        defaultGroupRotate: Number,\n        defaultGroupOrigin: String,\n        groupable: Boolean,\n        groupableProps: Object,\n        targetGroups: Object,\n        hideChildMoveableDefaultLines: Boolean,\n    } as const,\n    events: {} as const,\n    render(moveable: MoveableGroupInterface<GroupableProps>, React: Renderer): any[] {\n        const props = moveable.props;\n        let targets: Array<HTMLElement | SVGElement | undefined | null> = props.targets || [];\n\n        moveable.moveables = [];\n        const { left, top, isPersisted } = moveable.getState();\n        const position = [left, top];\n        const zoom = props.zoom || 1;\n        const renderGroupRects = moveable.renderGroupRects;\n        let persistDatChildren = props.persistData?.children || [];\n\n        if (isPersisted) {\n            targets = persistDatChildren.map(() => null);\n        } else {\n            persistDatChildren = [];\n        }\n\n        return [\n            ...targets.map((target, i) => {\n                return <MoveableManager<GroupableProps>\n                    key={\"moveable\" + i}\n                    ref={refs(moveable, \"moveables\", i)}\n                    target={target}\n                    origin={false}\n                    cssStyled={props.cssStyled}\n                    customStyledMap={props.customStyledMap}\n                    useResizeObserver={props.useResizeObserver}\n                    hideChildMoveableDefaultLines={props.hideChildMoveableDefaultLines}\n                    parentMoveable={moveable}\n                    parentPosition={position}\n                    persistData={persistDatChildren[i]}\n                    zoom={zoom}\n                />;\n            }),\n            ...flat(renderGroupRects.map(({ pos1, pos2, pos3, pos4 }, i) => {\n                const poses = [pos1, pos2, pos3, pos4];\n\n                return [\n                    [0, 1],\n                    [1, 3],\n                    [3, 2],\n                    [2, 0],\n                ].map(([from, to], j) => {\n                    return renderLine(\n                        React,\n                        \"\",\n                        minus(poses[from], position),\n                        minus(poses[to], position),\n                        zoom,\n                        `group-rect-${i}-${j}`,\n                    );\n                });\n            })),\n        ];\n    },\n};\n","import {\n    MoveableManagerInterface, MoveableGroupInterface,\n    ClickableProps, OnClick, OnClickGroup,\n} from \"../types\";\nimport { triggerEvent, fillParams } from \"../utils\";\nimport { findIndex } from \"@daybrush/utils\";\nimport { makeAble } from \"./AbleManager\";\n\nexport default makeAble(\"clickable\", {\n    props: {\n        clickable: Boolean,\n    },\n    events: {\n        onClick: \"click\",\n        onClickGroup: \"clickGroup\",\n    } as const,\n    always: true,\n    dragRelation: \"weak\",\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    dragStart() {\n        return;\n    },\n    dragControlStart() {\n        return;\n    },\n    dragGroupStart(moveable: MoveableManagerInterface<ClickableProps>, e: any) {\n        e.datas.inputTarget = e.inputEvent && e.inputEvent.target;\n    },\n    dragEnd(moveable: MoveableManagerInterface<ClickableProps>, e: any) {\n        const target = moveable.props.target!;\n        const inputEvent = e.inputEvent;\n        const inputTarget = e.inputTarget;\n        const isMoveableElement = moveable.isMoveableElement(inputTarget);\n        const containsElement = !isMoveableElement && moveable.controlBox.getElement().contains(inputTarget);\n\n        if (\n            !inputEvent || !inputTarget || e.isDrag\n            || moveable.isMoveableElement(inputTarget)\n            || containsElement\n            // External event duplicate target or dragAreaElement\n        ) {\n            return;\n        }\n        const containsTarget = target.contains(inputTarget);\n\n        triggerEvent(moveable, \"onClick\", fillParams<OnClick>(moveable, e, {\n            isDouble: e.isDouble,\n            inputTarget,\n            isTarget: target === inputTarget,\n            moveableTarget: moveable.props.target!,\n            containsTarget,\n        }));\n    },\n    dragGroupEnd(moveable: MoveableGroupInterface<ClickableProps>, e: any) {\n        const inputEvent = e.inputEvent;\n        const inputTarget = e.inputTarget;\n\n        if (\n            !inputEvent || !inputTarget || e.isDrag\n            || moveable.isMoveableElement(inputTarget)\n            // External event duplicate target or dragAreaElement\n            || e.datas.inputTarget === inputTarget\n        ) {\n            return;\n        }\n        const targets = moveable.props.targets!;\n        let targetIndex = targets.indexOf(inputTarget);\n        const isTarget = targetIndex > -1;\n        let containsTarget = false;\n\n        if (targetIndex === -1) {\n            targetIndex = findIndex(targets, parentTarget => parentTarget.contains(inputTarget));\n            containsTarget = targetIndex > -1;\n        }\n\n        triggerEvent(moveable, \"onClickGroup\", fillParams<OnClickGroup>(moveable, e, {\n            isDouble: e.isDouble,\n            targets,\n            inputTarget,\n            targetIndex,\n            isTarget,\n            containsTarget,\n            moveableTarget: targets[targetIndex],\n        }));\n    },\n    dragControlEnd(moveable: MoveableManagerInterface<ClickableProps>, e: any) {\n        this.dragEnd(moveable, e);\n    },\n    dragGroupControlEnd(moveable: MoveableManagerInterface<ClickableProps>, e: any) {\n        this.dragEnd(moveable, e);\n    },\n});\n\n/**\n * When you click on the element, the `click` event is called.\n * @memberof Moveable\n * @event click\n * @param {Moveable.OnClick} - Parameters for the `click` event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     target: document.querySelector(\".target\"),\n * });\n * moveable.on(\"click\", ({ hasTarget, containsTarget, targetIndex }) => {\n *     // If you click on an element other than the target and not included in the target, index is -1.\n *     console.log(\"onClickGroup\", target, hasTarget, containsTarget, targetIndex);\n * });\n */\n\n/**\n * When you click on the element inside the group, the `clickGroup` event is called.\n * @memberof Moveable\n * @event clickGroup\n * @param {Moveable.OnClickGroup} - Parameters for the `clickGroup` event\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\n * });\n * moveable.on(\"clickGroup\", ({ inputTarget, isTarget, containsTarget, targetIndex }) => {\n *     // If you click on an element other than the target and not included in the target, index is -1.\n *     console.log(\"onClickGroup\", inputTarget, isTarget, containsTarget, targetIndex);\n * });\n */\n","import { hasClass } from \"@daybrush/utils\";\nimport { DraggableProps, MoveableGroupInterface, MoveableManagerInterface, Renderer } from \"../types\";\nimport { prefix } from \"../utils\";\nimport Draggable from \"./Draggable\";\nimport { makeAble } from \"./AbleManager\";\nimport { renderEdgeLines } from \"../renderDirections\";\n\nfunction getDraggableEvent(e: any) {\n    let datas = e.originalDatas.draggable;\n    if (!datas) {\n        e.originalDatas.draggable = {};\n        datas = e.originalDatas.draggable;\n    }\n    return { ...e, datas };\n}\nexport default makeAble(\"edgeDraggable\", {\n    css: [\n        `.edge.edgeDraggable.line {\n    cursor: move;\n}`,\n    ],\n    render(moveable: MoveableManagerInterface<DraggableProps>, React: Renderer) {\n        const props = moveable.props;\n        const edge = props.edgeDraggable!;\n\n        if (!edge) {\n            return [];\n        }\n        return renderEdgeLines(\n            React,\n            \"edgeDraggable\",\n            edge,\n            moveable.getState().renderPoses,\n            props.zoom!,\n        );\n    },\n    dragCondition(moveable: MoveableManagerInterface<DraggableProps>, e: any) {\n        const props = moveable.props;\n        const target = e.inputEvent?.target;\n\n        if (!props.edgeDraggable || !target) {\n            return false;\n        }\n\n        return !props.draggable\n            && hasClass(target, prefix(\"direction\"))\n            && hasClass(target, prefix(\"edge\"))\n            && hasClass(target, prefix(\"edgeDraggable\"));\n    },\n    dragStart(moveable: MoveableManagerInterface<DraggableProps>, e: any) {\n        return Draggable.dragStart(moveable, getDraggableEvent(e));\n    },\n    drag(moveable: MoveableManagerInterface<DraggableProps>, e: any) {\n        return Draggable.drag(moveable, getDraggableEvent(e));\n    },\n    dragEnd(moveable: MoveableManagerInterface<DraggableProps, any>, e: any) {\n        return Draggable.dragEnd(moveable, getDraggableEvent(e));\n    },\n    dragGroupCondition(moveable: MoveableGroupInterface<DraggableProps>, e: any) {\n        const props = moveable.props;\n        const target = e.inputEvent?.target;\n\n        if (!props.edgeDraggable || !target) {\n            return false;\n        }\n        return !props.draggable && hasClass(target, prefix(\"direction\")) && hasClass(target, prefix(\"line\"));\n    },\n    dragGroupStart(moveable: MoveableGroupInterface<DraggableProps>, e: any) {\n        return Draggable.dragGroupStart(moveable, getDraggableEvent(e));\n    },\n    dragGroup(moveable: MoveableGroupInterface<DraggableProps>, e: any) {\n        return Draggable.dragGroup(moveable, getDraggableEvent(e));\n    },\n    dragGroupEnd(moveable: MoveableGroupInterface<DraggableProps, any>, e: any) {\n        return Draggable.dragGroupEnd(moveable, getDraggableEvent(e));\n    },\n    unset(moveable: any) {\n        return Draggable.unset(moveable);\n    },\n});\n\n/**\n * Whether to move by dragging the edge line (default: false)\n * @name Moveable.Draggable#edgeDraggable\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *  draggable: true,\n *  edgeDraggable: false,\n * });\n *\n * moveable.edgeDraggable = true;\n */\n","export default {\n    name: \"individualGroupable\",\n    props: {\n        individualGroupable: Boolean,\n    } as const,\n    events: {} as const,\n} as const;\n","import Pinchable from \"./Pinchable\";\nimport Rotatable from \"./Rotatable\";\nimport Draggable from \"./Draggable\";\nimport Resizable from \"./Resizable\";\nimport Scalable from \"./Scalable\";\nimport Warpable from \"./Warpable\";\nimport Snappable from \"./Snappable\";\nimport DragArea from \"./DragArea\";\nimport Origin from \"./Origin\";\nimport Scrollable from \"./Scrollable\";\nimport Default from \"./Default\";\nimport Padding from \"./Padding\";\nimport Clippable from \"./Clippable\";\nimport OriginDraggable from \"./OriginDraggable\";\nimport Roundable from \"./Roundable\";\nimport { UnionToIntersection } from \"../types\";\nimport { invertObject } from \"../utils\";\nimport Groupable from \"./Groupable\";\nimport BeforeRenderable from \"./BeforeRenderable\";\nimport Renderable from \"./Renderable\";\nimport Clickable from \"./Clickable\";\nimport edgeDraggable from \"./edgeDraggable\";\nimport IndividualGroupable from \"./IndividualGroupable\";\n\nexport const MOVEABLE_ABLES = /*#__PURE__*/[\n    BeforeRenderable,\n    Default, Snappable, Pinchable, Draggable, edgeDraggable,\n    Resizable, Scalable, Warpable, Rotatable, Scrollable, Padding, Origin,\n    OriginDraggable,\n    Clippable, Roundable, Groupable, IndividualGroupable,\n    Clickable,\n    DragArea,\n    Renderable,\n] as const;\n\nexport const MOVEABLE_EVENTS_PROPS_MAP = /*#__PURE__*/MOVEABLE_ABLES.reduce((current, able) => {\n    return {...current, ...(\"events\" in able ? able.events : {})};\n}, {}) as UnionToIntersection<typeof MOVEABLE_ABLES[number][\"events\"]>;\nexport const MOVEABLE_PROPS_MAP = /*#__PURE__*/MOVEABLE_ABLES.reduce((current, able) => {\n    return {...current, ...able.props};\n}, {}) as UnionToIntersection<typeof MOVEABLE_ABLES[number][\"props\"]>;\n\nexport const MOVEABLE_EVENTS_MAP = /*#__PURE__*/invertObject(MOVEABLE_EVENTS_PROPS_MAP);\nexport const MOVEABLE_EVENTS: string[] = /*#__PURE__*/Object.keys(MOVEABLE_EVENTS_MAP);\nexport const MOVEABLE_PROPS: string[] = /*#__PURE__*/Object.keys(MOVEABLE_PROPS_MAP);\n","export function solveConstantsDistance(\n    [a, b, c]: [number, number, number],\n    pos: number[],\n) {\n    return (a * pos[0] + b * pos[1] + c) / Math.sqrt(a * a + b * b);\n}\nexport function solveC(\n    [a, b]: [number, number],\n    pos: number[],\n) {\n    // ax + by + c = 0\n    // -ax -by;\n    return -a * pos[0] - b * pos[1];\n}\n","import MoveableManager from \"./MoveableManager\";\nimport { GroupableProps, GroupRect, MoveableTargetGroupsType, RectInfo } from \"./types\";\nimport ChildrenDiffer from \"@egjs/children-differ\";\nimport { getAbleGesto, getTargetAbleGesto } from \"./gesto/getAbleGesto\";\nimport Groupable from \"./ables/Groupable\";\nimport { MIN_NUM, MAX_NUM, TINY_NUM } from \"./consts\";\nimport {\n    getAbsolutePosesByState, equals, unset, rotatePosesInfo,\n    convertTransformOriginArray,\n    isDeepArrayEquals,\n} from \"./utils\";\nimport { minus, plus } from \"@scena/matrix\";\nimport { getIntersectionPointsByConstants, getMinMaxs } from \"overlap-area\";\nimport { find, isArray, throttle } from \"@daybrush/utils\";\nimport { getMoveableTargetInfo } from \"./utils/getMoveableTargetInfo\";\nimport { solveC, solveConstantsDistance } from \"./Snappable/utils\";\n\nfunction getMaxPos(poses: number[][][], index: number) {\n    return Math.max(...poses.map(([pos1, pos2, pos3, pos4]) => {\n        return Math.max(pos1[index], pos2[index], pos3[index], pos4[index]);\n    }));\n}\nfunction getMinPos(poses: number[][][], index: number) {\n    return Math.min(...poses.map(([pos1, pos2, pos3, pos4]) => {\n        return Math.min(pos1[index], pos2[index], pos3[index], pos4[index]);\n    }));\n}\n\n\nfunction getGroupRect(parentPoses: number[][][], rotation: number): GroupRect {\n    let pos1 = [0, 0];\n    let pos2 = [0, 0];\n    let pos3 = [0, 0];\n    let pos4 = [0, 0];\n    let width = 0;\n    let height = 0;\n\n    if (!parentPoses.length) {\n        return {\n            pos1,\n            pos2,\n            pos3,\n            pos4,\n            minX: 0,\n            minY: 0,\n            maxX: 0,\n            maxY: 0,\n            width,\n            height,\n            rotation,\n        };\n    }\n    const fixedRotation = throttle(rotation, TINY_NUM);\n\n    if (fixedRotation % 90) {\n        const rad = fixedRotation / 180 * Math.PI;\n        const a1 = Math.tan(rad);\n        const a2 = -1 / a1;\n        // ax = y  // -ax + y = 0 // 0 => 1\n        // -ax = y // ax + y = 0  // 0 => 3\n        const a1MinMax = [MAX_NUM, MIN_NUM];\n        const a1MinMaxPos = [[0, 0], [0, 0]];\n        const a2MinMax = [MAX_NUM, MIN_NUM];\n        const a2MinMaxPos = [[0, 0], [0, 0]];\n\n        parentPoses.forEach(poses => {\n            poses.forEach(pos => {\n\n                // const b1 = pos[1] - a1 * pos[0];\n                // const b2 = pos[1] - a2 * pos[0];\n\n                const a1Dist = solveConstantsDistance([-a1, 1, 0], pos);\n                const a2Dist = solveConstantsDistance([-a2, 1, 0], pos);\n\n                if (a1MinMax[0] > a1Dist) {\n                    a1MinMaxPos[0] = pos;\n                    a1MinMax[0] = a1Dist;\n                }\n                if (a1MinMax[1] < a1Dist) {\n                    a1MinMaxPos[1] = pos;\n                    a1MinMax[1] = a1Dist;\n                }\n                if (a2MinMax[0] > a2Dist) {\n                    a2MinMaxPos[0] = pos;\n                    a2MinMax[0] = a2Dist;\n                }\n                if (a2MinMax[1] < a2Dist) {\n                    a2MinMaxPos[1] = pos;\n                    a2MinMax[1] = a2Dist;\n                }\n            });\n        });\n\n        const [a1MinPos, a1MaxPos] = a1MinMaxPos;\n        const [a2MinPos, a2MaxPos] = a2MinMaxPos;\n\n        const minHorizontalLine = [-a1, 1, solveC([-a1, 1], a1MinPos)];\n        const maxHorizontalLine = [-a1, 1, solveC([-a1, 1], a1MaxPos)];\n\n        const minVerticalLine = [-a2, 1, solveC([-a2, 1], a2MinPos)];\n        const maxVerticalLine = [-a2, 1, solveC([-a2, 1], a2MaxPos)];\n\n        [pos1, pos2, pos3, pos4] = [\n            [minHorizontalLine, minVerticalLine],\n            [minHorizontalLine, maxVerticalLine],\n            [maxHorizontalLine, minVerticalLine],\n            [maxHorizontalLine, maxVerticalLine],\n        ].map(([line1, line2]) => getIntersectionPointsByConstants(line1, line2)[0]);\n\n        width = a2MinMax[1] - a2MinMax[0];\n        height = a1MinMax[1] - a1MinMax[0];\n    } else {\n        const minX = getMinPos(parentPoses, 0);\n        const minY = getMinPos(parentPoses, 1);\n        const maxX = getMaxPos(parentPoses, 0);\n        const maxY = getMaxPos(parentPoses, 1);\n\n        pos1 = [minX, minY];\n        pos2 = [maxX, minY];\n        pos3 = [minX, maxY];\n        pos4 = [maxX, maxY];\n        width = maxX - minX;\n        height = maxY - minY;\n        if (fixedRotation % 180) {\n            // 0\n            // 1 2\n            // 3 4\n            // 90\n            // 3 1\n            // 4 2\n            // 180\n            // 4 3\n            // 2 1\n            // 270\n            // 2 4\n            // 1 3\n            // 1, 2, 3,4 = 3 1 4 2\n            const changedX = [pos3, pos1, pos4, pos2];\n\n            [pos1, pos2, pos3, pos4] = changedX;\n            width = maxY - minY;\n            height = maxX - minX;\n        }\n\n    }\n    if (fixedRotation % 360 > 180) {\n        // 1 2   4 3\n        // 3 4   2 1\n        const changedX = [pos4, pos3, pos2, pos1];\n\n        [pos1, pos2, pos3, pos4] = changedX;\n    }\n    const { minX, minY, maxX, maxY } = getMinMaxs([pos1, pos2, pos3, pos4]);\n\n    return {\n        pos1,\n        pos2,\n        pos3,\n        pos4,\n        width,\n        height,\n        minX,\n        minY,\n        maxX,\n        maxY,\n        rotation,\n    };\n}\ntype SelfGroup = Array<MoveableManager | null | SelfGroup>;\ntype CheckedMoveableManager = { finded: boolean; manager: MoveableManager };\n\nfunction findMoveableGroups(\n    moveables: CheckedMoveableManager[],\n    childTargetGroups: MoveableTargetGroupsType,\n): SelfGroup {\n    const groups = childTargetGroups.map(targetGroup => {\n        if (isArray(targetGroup)) {\n            const childMoveableGroups = findMoveableGroups(moveables, targetGroup);\n            const length = childMoveableGroups.length;\n\n            if (length > 1) {\n                return childMoveableGroups;\n            } else if (length === 1) {\n                return childMoveableGroups[0];\n            } else {\n                return null;\n            }\n        } else {\n            const checked = find(moveables, ({ manager }) => manager.props.target === targetGroup)!;\n\n            if (checked) {\n                checked.finded = true;\n                return checked.manager;\n            }\n            return null;\n        }\n    }).filter(Boolean);\n\n    if (groups.length === 1 && isArray(groups[0])) {\n        return groups[0];\n    }\n    return groups;\n}\n\n/**\n * @namespace Moveable.Group\n * @description You can make targets moveable.\n */\nclass MoveableGroup extends MoveableManager<GroupableProps> {\n    public static defaultProps = {\n        ...MoveableManager.defaultProps,\n        transformOrigin: [\"50%\", \"50%\"],\n        groupable: true,\n        dragArea: true,\n        keepRatio: true,\n        targets: [],\n        defaultGroupRotate: 0,\n        defaultGroupOrigin: \"50% 50%\",\n    };\n    public differ: ChildrenDiffer<HTMLElement | SVGElement> = new ChildrenDiffer();\n    public moveables: MoveableManager[] = [];\n    public transformOrigin = \"50% 50%\";\n    public renderGroupRects: GroupRect[] = [];\n    private _targetGroups: MoveableTargetGroupsType = [];\n    private _hasFirstTargets = false;\n\n    public componentDidMount() {\n        super.componentDidMount();\n    }\n    public checkUpdate() {\n        this._isPropTargetChanged = false;\n        this.updateAbles();\n    }\n    public getTargets() {\n        return this.props.targets!;\n    }\n    public updateRect(type?: \"Start\" | \"\" | \"End\", isTarget?: boolean, isSetState = true) {\n        const state = this.state;\n\n        if (!this.controlBox || state.isPersisted) {\n            return;\n        }\n        this.moveables.forEach(moveable => {\n            moveable.updateRect(type, false, false);\n        });\n\n        const props = this.props;\n        const moveables = this.moveables;\n        const target = state.target! || props.target!;\n        const checkeds = moveables.map(moveable => ({ finded: false, manager: moveable }));\n        const targetGroups = this.props.targetGroups || [];\n        const moveableGroups = findMoveableGroups(\n            checkeds,\n            targetGroups,\n        );\n\n        moveableGroups.push(...checkeds.filter(({ finded }) => !finded).map(({ manager }) => manager));\n\n        const renderGroupRects: GroupRect[] = [];\n        const isReset = !isTarget || (type !== \"\" && props.updateGroup);\n        let defaultGroupRotate = props.defaultGroupRotate || 0;\n\n        if (!this._hasFirstTargets) {\n            const persistedRoatation = this.props.persistData?.rotation;\n\n            if (persistedRoatation != null) {\n                defaultGroupRotate = persistedRoatation;\n            }\n        }\n\n        function getMoveableGroupRect(group: SelfGroup, parentRotation: number, isRoot?: boolean): GroupRect {\n            const posesRotations = group.map(moveable => {\n                if (isArray(moveable)) {\n                    const rect = getMoveableGroupRect(moveable, parentRotation);\n                    const poses = [rect.pos1, rect.pos2, rect.pos3, rect.pos4];\n\n                    renderGroupRects.push(rect);\n                    return { poses, rotation: rect.rotation };\n                } else {\n                    return {\n                        poses: getAbsolutePosesByState(moveable!.state),\n                        rotation: moveable!.getRotation(),\n                    };\n                }\n            });\n            const rotations = posesRotations.map(({ rotation }) => rotation);\n\n            let groupRotation = 0;\n            const firstRotation = rotations[0];\n            const isSameRotation = rotations.every(nextRotation => {\n                return Math.abs(firstRotation - nextRotation) < 0.1;\n            });\n\n            if (isReset) {\n                groupRotation = isSameRotation ? firstRotation : defaultGroupRotate;\n            } else {\n                groupRotation = !isRoot && isSameRotation ? firstRotation : parentRotation;\n            }\n            const groupPoses = posesRotations.map(({ poses }) => poses);\n            const groupRect = getGroupRect(\n                groupPoses,\n                groupRotation,\n            );\n\n            return groupRect;\n        }\n        const rootGroupRect = getMoveableGroupRect(moveableGroups, this.rotation, true);\n\n        if (isReset) {\n            // reset rotataion\n            this.rotation = rootGroupRect.rotation;\n            this.transformOrigin = props.defaultGroupOrigin || \"50% 50%\";\n            this.scale = [1, 1];\n        }\n\n\n        this._targetGroups = targetGroups;\n        this.renderGroupRects = renderGroupRects;\n        const transformOrigin = this.transformOrigin;\n        const rotation = this.rotation;\n        const scale = this.scale;\n        const { width, height, minX, minY } = rootGroupRect;\n        const posesInfo = rotatePosesInfo(\n            [\n                [0, 0],\n                [width, 0],\n                [0, height],\n                [width, height],\n            ],\n            convertTransformOriginArray(transformOrigin, width, height),\n            this.rotation / 180 * Math.PI,\n        );\n\n        const { minX: deltaX, minY: deltaY } = getMinMaxs(posesInfo.result);\n        const rotateScale = ` rotate(${rotation}deg)`\n            + ` scale(${scale[0] >= 0 ? 1 : -1}, ${scale[1] >= 0 ? 1 : -1})`;\n        const transform = `translate(${-deltaX}px, ${-deltaY}px)${rotateScale}`;\n\n        this.controlBox.getElement().style.transform\n            = `translate3d(${minX}px, ${minY}px, ${this.props.translateZ || 0})`;\n\n        target.style.cssText += `left:0px;top:0px;`\n            + `transform-origin:${transformOrigin};`\n            + `width:${width}px;height:${height}px;`\n            + `transform: ${transform}`;\n        state.width = width;\n        state.height = height;\n\n        const container = this.getContainer();\n        const info = getMoveableTargetInfo(\n            this.controlBox.getElement(),\n            target,\n            this.controlBox.getElement(),\n            this.getContainer(),\n            this._rootContainer || container,\n            [],\n        );\n        const pos = [info.left!, info.top!];\n        const [\n            pos1,\n            pos2,\n            pos3,\n            pos4,\n        ] = getAbsolutePosesByState(info); // info.left + info.pos(1 ~ 4)\n\n        const minPos = getMinMaxs([pos1, pos2, pos3, pos4]);\n        const delta = [minPos.minX, minPos.minY];\n        const direction = scale[0] * scale[1] > 0 ? 1 : -1;\n\n        info.pos1 = minus(pos1, delta);\n        info.pos2 = minus(pos2, delta);\n        info.pos3 = minus(pos3, delta);\n        info.pos4 = minus(pos4, delta);\n        // info.left = info.left + delta[0];\n        // info.top = info.top + delta[1];\n        info.left = minX - info.left! + delta[0];\n        info.top = minY - info.top! + delta[1];\n        info.origin = minus(plus(pos, info.origin!), delta);\n        info.beforeOrigin = minus(plus(pos, info.beforeOrigin!), delta);\n        info.originalBeforeOrigin = plus(pos, info.originalBeforeOrigin!);\n        info.transformOrigin = minus(plus(pos, info.transformOrigin!), delta);\n        target.style.transform\n            = `translate(${-deltaX - delta[0]}px, ${-deltaY - delta[1]}px)`\n            + rotateScale;\n        this.updateState(\n            {\n                ...info,\n                posDelta: delta,\n                direction,\n                beforeDirection: direction,\n            },\n            isSetState,\n        );\n    }\n    public getRect(): RectInfo {\n        return {\n            ...super.getRect(),\n            children: this.moveables.map(child => child.getRect()),\n        };\n    }\n    public triggerEvent(name: string, e: any, isManager?: boolean): any {\n        if (isManager || name.indexOf(\"Group\") > -1) {\n            return super.triggerEvent(name as any, e);\n        } else {\n            this._emitter.trigger(name, e);\n        }\n    }\n    protected updateAbles() {\n        super.updateAbles([...this.props.ables!, Groupable], \"Group\");\n    }\n    protected _updateTargets() {\n        super._updateTargets();\n        this._prevTarget = this.props.dragTarget || this.areaElement;\n    }\n    protected _updateEvents() {\n        const state = this.state;\n        const props = this.props;\n\n        const prevTarget = this._prevTarget;\n        const nextTarget = props.dragTarget || this.areaElement;\n\n        if (prevTarget !== nextTarget) {\n            unset(this, \"targetGesto\");\n            unset(this, \"controlGesto\");\n            state.target = null;\n        }\n        if (!state.target) {\n            state.target = this.areaElement;\n            this.controlBox.getElement().style.display = \"block\";\n        }\n        if (state.target) {\n            if (!this.targetGesto) {\n                this.targetGesto = getTargetAbleGesto(this, nextTarget, \"Group\");\n            }\n            if (!this.controlGesto) {\n                this.controlGesto = getAbleGesto(this, this.controlBox.getElement(), \"controlAbles\", \"GroupControl\");\n            }\n        }\n        const isContainerChanged = !equals(state.container, props.container);\n\n        if (isContainerChanged) {\n            state.container = props.container;\n        }\n        const targets = props.targets!;\n        const { added, changed, removed } = this.differ.update(targets);\n        const isTargetChanged = added.length || removed.length;\n\n        if (\n            isContainerChanged\n            || isTargetChanged\n            || this.transformOrigin !== (props.defaultGroupOrigin || \"50% 50%\")\n            || changed.length\n            || targets.length && !isDeepArrayEquals(this._targetGroups, props.targetGroups || [])\n        ) {\n            this.updateRect();\n            this._hasFirstTargets = true;\n        }\n        this._isPropTargetChanged = !!isTargetChanged;\n    }\n    protected _updateObserver() { }\n}\n\n/**\n * Sets the initial rotation of the group.\n * @name Moveable.Group#defaultGroupRotate\n * @default 0\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *   target: [].slice.call(document.querySelectorAll(\".target\")),\n *   defaultGroupRotate: 0,\n * });\n *\n * moveable.defaultGroupRotate = 40;\n */\n\n/**\n * Sets the initial origin of the group.\n * @name Moveable.Group#defaultGroupOrigin\n * @default 0\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *   target: [].slice.call(document.querySelectorAll(\".target\")),\n *   defaultGroupOrigin: \"50% 50%\",\n * });\n *\n * moveable.defaultGroupOrigin = \"20% 40%\";\n */\n\n\n/**\n * Whether to hide the line in child moveable for group corresponding to the rect of the target.\n * @name Moveable.Group#hideChildMoveableDefaultLines\n * @default false\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *   target: [].slice.call(document.querySelectorAll(\".target\")),\n *   hideChildMoveableDefaultLines: false,\n * });\n *\n * moveable.hideChildMoveableDefaultLines = true;\n */\nexport default MoveableGroup;\n","import { ref, refs } from \"framework-utils\";\nimport * as React from \"react\";\nimport MoveableManager from \"./MoveableManager\";\nimport { GroupableProps, RectInfo } from \"./types\";\nimport { prefix } from \"./utils\";\n\n/**\n * @namespace Moveable.IndividualGroup\n * @description Create targets individually, not as a group.Create targets individually, not as a group.\n */\nclass MoveableIndividualGroup extends MoveableManager<GroupableProps> {\n    public moveables: MoveableManager[] = [];\n    public render() {\n        const props = this.props;\n        const {\n            cspNonce,\n            cssStyled: ControlBoxElement,\n            persistData,\n        } = props;\n\n        let targets: Array<HTMLElement | SVGElement | null | undefined> = props.targets || [];\n        const length = targets.length;\n        const canPersist = this.isUnmounted || !length;\n        let persistDatChildren = persistData?.children ?? [];\n        if (canPersist && !length && persistDatChildren.length) {\n            targets = persistDatChildren.map(() => null);\n        } else if (!canPersist) {\n            persistDatChildren = [];\n        }\n\n        return <ControlBoxElement\n            cspNonce={cspNonce}\n            ref={ref(this, \"controlBox\")}\n            className={prefix(\"control-box\")}>\n            {targets!.map((target, i) => {\n                return <MoveableManager\n                    key={\"moveable\" + i}\n                    ref={refs(this, \"moveables\", i)}\n                    {...this.props}\n                    target={target}\n                    wrapperMoveable={this}\n                    isWrapperMounted={this.isMoveableMounted}\n                    persistData={persistDatChildren[i]}\n\n                />;\n            })}\n        </ControlBoxElement>;\n    }\n    public componentDidUpdate() {}\n    public getTargets() {\n        return this.props.targets!;\n    }\n    public updateRect(type?: \"Start\" | \"\" | \"End\", isTarget?: boolean, isSetState: boolean = true) {\n        this.moveables.forEach(moveable => {\n            moveable.updateRect(type, isTarget, isSetState);\n        });\n    }\n    public getRect(): RectInfo {\n        return {\n            ...super.getRect(),\n            children: this.moveables.map(child => child.getRect()),\n        };\n    }\n    public request() {\n        return {\n            request() {\n                return this;\n            },\n            requestEnd() {\n                return this;\n            },\n        };\n    }\n    public dragStart() {\n        return this;\n    }\n    public hitTest() {\n        return 0;\n    }\n    public isInside() {\n        return false;\n    }\n    public isDragging() {\n        return false;\n    }\n    public updateRenderPoses() { }\n    public checkUpdate() { }\n    public triggerEvent() { }\n    protected updateAbles() { }\n    protected _updateEvents() { }\n    protected _updateObserver() {}\n}\n\n/**\n * Create targets individually, not as a group.\n * @name Moveable.IndividualGroup#individualGroupable\n * @example\n * import Moveable from \"moveable\";\n *\n * const moveable = new Moveable(document.body, {\n *   target: [].slice.call(document.querySelectorAll(\".target\")),\n *   individualGroupable: true,\n * });\n */\nexport default MoveableIndividualGroup;\n","import * as React from \"react\";\nimport {\n    Able, MoveableInterface, GroupableProps, MoveableDefaultProps,\n    IndividualGroupableProps, MoveableManagerInterface, MoveableRefTargetsResultType,\n    MoveableTargetGroupsType, BeforeRenderableProps, RenderableProps, MoveableManagerState,\n} from \"./types\";\nimport MoveableManager from \"./MoveableManager\";\nimport MoveableGroup from \"./MoveableGroup\";\nimport { ref, withMethods, prefixCSS } from \"framework-utils\";\nimport { find, getKeys, IObject, isArray, isString } from \"@daybrush/utils\";\nimport { MOVEABLE_METHODS, PREFIX, MOVEABLE_CSS } from \"./consts\";\nimport Default from \"./ables/Default\";\nimport Groupable from \"./ables/Groupable\";\nimport DragArea from \"./ables/DragArea\";\nimport styled from \"react-css-styled\";\nimport { getRefTargets } from \"./utils\";\nimport IndividualGroupable from \"./ables/IndividualGroupable\";\nimport MoveableIndividualGroup from \"./MoveableIndividualGroup\";\nimport ChildrenDiffer from \"@egjs/children-differ\";\n\n\nfunction getElementTargets(\n    refTargets: MoveableRefTargetsResultType,\n    selectorMap: IObject<Array<HTMLElement | SVGElement>>,\n): Array<SVGElement | HTMLElement> {\n    const elementTargets: Array<SVGElement | HTMLElement> = [];\n\n    refTargets.forEach(target => {\n        if (!target) {\n            return;\n        }\n        if (isString(target)) {\n            if (selectorMap[target]) {\n                elementTargets.push(...selectorMap[target]);\n            }\n            return;\n        }\n        if (isArray(target)) {\n            elementTargets.push(...getElementTargets(target, selectorMap));\n        } else {\n            elementTargets.push(target);\n        }\n    });\n\n    return elementTargets;\n}\nfunction getTargetGroups(\n    refTargets: MoveableRefTargetsResultType,\n    selectorMap: IObject<Array<HTMLElement | SVGElement>>,\n) {\n    const targetGroups: MoveableTargetGroupsType = [];\n\n    refTargets.forEach(target => {\n        if (!target) {\n            return;\n        }\n        if (isString(target)) {\n            if (selectorMap[target]) {\n                targetGroups.push(...selectorMap[target]);\n            }\n            return;\n        }\n        if (isArray(target)) {\n            targetGroups.push(getTargetGroups(target, selectorMap));\n        } else {\n            targetGroups.push(target);\n        }\n    });\n\n    return targetGroups;\n}\nfunction compareRefTargets(\n    prevRefTargets: MoveableRefTargetsResultType,\n    nextRefTargets: MoveableRefTargetsResultType,\n): boolean {\n    return (prevRefTargets.length !== nextRefTargets.length) || prevRefTargets.some((target, i) => {\n        const nextTarget = nextRefTargets[i];\n\n        if (!target && !nextTarget) {\n            return false;\n        } else if (target != nextTarget) {\n            if (isArray(target) && isArray(nextTarget)) {\n                return compareRefTargets(target, nextTarget);\n            }\n            return true;\n        }\n        return false;\n    });\n}\n\ntype DefaultAbles = GroupableProps & IndividualGroupableProps & BeforeRenderableProps & RenderableProps;\n\nexport class InitialMoveable<T = {}>\n    extends React.PureComponent<MoveableDefaultProps & DefaultAbles & T> {\n    public static defaultAbles: Able[] = [];\n    public static customStyledMap: Record<string, any> = {};\n    public static defaultStyled: any = null;\n    public static makeStyled() {\n        const cssMap: IObject<boolean> = {};\n\n        const ables = this.getTotalAbles();\n        ables.forEach(({ css }: Able) => {\n            if (!css) {\n                return;\n            }\n            css.forEach(text => {\n                cssMap[text] = true;\n            });\n        });\n        const style = getKeys(cssMap).join(\"\\n\");\n\n        this.defaultStyled = styled(\"div\", prefixCSS(PREFIX, MOVEABLE_CSS + style));\n    }\n    public static getTotalAbles(): Able[] {\n\n        return [Default, Groupable, IndividualGroupable, DragArea, ...this.defaultAbles];\n    }\n    @withMethods(MOVEABLE_METHODS)\n    public moveable!: MoveableManager | MoveableGroup | MoveableIndividualGroup;\n    public refTargets: MoveableRefTargetsResultType = [];\n    public selectorMap: IObject<Array<HTMLElement | SVGElement>> = {};\n    private _differ: ChildrenDiffer<HTMLElement | SVGElement> = new ChildrenDiffer();\n    private _elementTargets: Array<HTMLElement | SVGElement> = [];\n    private _onChangeTargets: (() => void) | null = null;\n    public render() {\n        const moveableContructor = (this.constructor as typeof InitialMoveable);\n\n        if (!moveableContructor.defaultStyled) {\n            moveableContructor.makeStyled();\n        }\n        const {\n            ables: userAbles,\n            props: userProps,\n            ...props\n        } = this.props;\n        const refTargets = this._updateRefs(true);\n        const elementTargets = getElementTargets(refTargets, this.selectorMap);\n\n        let isGroup = elementTargets.length > 1;\n        const totalAbles = moveableContructor.getTotalAbles();\n        const ables = [\n            ...totalAbles,\n            ...(userAbles as any || []),\n        ];\n        const nextProps = {\n            ...props,\n            ...(userProps || {}),\n            ables,\n            cssStyled: moveableContructor.defaultStyled,\n            customStyledMap: moveableContructor.customStyledMap,\n        };\n\n        this._elementTargets = elementTargets;\n\n        let firstRenderState: MoveableManagerState | null = null;\n        const prevMoveable = this.moveable;\n\n\n        const persistData = props.persistData;\n\n        if (persistData?.children) {\n            isGroup = true;\n        }\n        if (isGroup) {\n            if (props.individualGroupable) {\n                return <MoveableIndividualGroup key=\"individual-group\" ref={ref(this, \"moveable\")}\n                    {...nextProps}\n                    target={null}\n                    targets={elementTargets}\n                />;\n            }\n            const targetGroups = getTargetGroups(refTargets, this.selectorMap);\n\n            // manager\n            if (prevMoveable && !prevMoveable.props.groupable && !(prevMoveable.props as any).individualGroupable) {\n                const target = prevMoveable.props.target!;\n\n                if (target && elementTargets.indexOf(target) > -1) {\n                    firstRenderState = { ...prevMoveable.state };\n                }\n            }\n\n            return <MoveableGroup key=\"group\" ref={ref(this, \"moveable\")}\n                {...nextProps}\n                {...props.groupableProps ?? {}}\n                target={null}\n                targets={elementTargets}\n                targetGroups={targetGroups}\n                firstRenderState={firstRenderState}\n            />;\n        } else {\n            const target = elementTargets[0];\n            // manager\n            if (prevMoveable && (prevMoveable.props.groupable || (prevMoveable.props as any).individualGroupable)) {\n                const moveables = (prevMoveable as MoveableGroup | MoveableIndividualGroup).moveables || [];\n                const prevTargetMoveable = find(moveables, mv => mv.props.target === target);\n\n                if (prevTargetMoveable) {\n                    firstRenderState = { ...prevTargetMoveable.state };\n                }\n            }\n\n            return <MoveableManager<any> key=\"single\" ref={ref(this, \"moveable\")}\n                {...nextProps}\n                target={target}\n                firstRenderState={firstRenderState} />;\n        }\n    }\n    public componentDidMount() {\n        this._checkChangeTargets();\n        this._updateRefs();\n    }\n    public componentDidUpdate() {\n        this._checkChangeTargets();\n    }\n    public componentWillUnmount() {\n        this.selectorMap = {};\n        this.refTargets = [];\n    }\n    /**\n     * Get targets set in moveable through target or targets of props.\n     * @method Moveable#getTargets\n     * @example\n     * import Moveable from \"moveable\";\n     *\n     * const moveable = new Moveable(document.body, {\n     *    target: [targetRef, \".target\", document.querySelectorAll(\".target\")],\n     * });\n     *\n     * console.log(moveable.getTargets());\n     */\n    public getTargets() {\n        return this.moveable?.getTargets() ?? [];\n    }\n    /**\n     * If the element list corresponding to the selector among the targets is changed, it is updated.\n     * @method Moveable#updateSelectors\n     * @example\n     * import Moveable from \"moveable\";\n     *\n     * const moveable = new Moveable(document.body, {\n     *    target: \".target\",\n     * });\n     *\n     * moveable.updateSelectors();\n     */\n    public updateSelectors() {\n        this.selectorMap = {};\n        this._updateRefs();\n    }\n    /**\n     * User changes target and waits for target to change.\n     * @method Moveable#waitToChangeTarget\n     * @story combination-with-other-components--use-selecto\n     * @example\n     * document.querySelector(\".target\").addEventListener(\"mousedown\", e => {\n     *   moveable.waitToChangeTarget().then(() => {\n     *      moveable.dragStart(e.currentTarget);\n     *   });\n     *   moveable.target = e.currentTarget;\n     * });\n     */\n    public waitToChangeTarget(): Promise<void> {\n        // let resolvePromise: (e: OnChangeTarget) => void;\n\n        // this._onChangeTargets = () => {\n        //     this._onChangeTargets = null;\n        //     resolvePromise({\n        //         moveable: this.getManager(),\n        //         targets: this._elementTargets,\n        //     });\n        // };\n\n        // return new Promise<OnChangeTarget>(resolve => {\n        //     resolvePromise = resolve;\n        // });\n        let resolvePromise: () => void;\n\n        this._onChangeTargets = () => {\n            this._onChangeTargets = null;\n            resolvePromise();\n        };\n\n        return new Promise(resolve => {\n            resolvePromise = resolve;\n        });\n    }\n    public waitToChangeTargets(): Promise<void> {\n        return this.waitToChangeTarget();\n    }\n    public getManager(): MoveableManagerInterface<any, any> {\n        return this.moveable;\n    }\n    private _updateRefs(isRender?: boolean) {\n        const prevRefTargets = this.refTargets;\n        const nextRefTargets = getRefTargets((this.props.target || this.props.targets) as any);\n        const isBrowser = typeof document !== \"undefined\";\n\n        let isUpdate = compareRefTargets(prevRefTargets, nextRefTargets);\n        const selectorMap = this.selectorMap;\n        const nextSelectorMap: IObject<Array<HTMLElement | SVGElement>> = {};\n\n        this.refTargets.forEach(function updateSelectorMap(target) {\n            if (isString(target)) {\n                const selectorTarget = selectorMap[target];\n\n                if (selectorTarget) {\n                    nextSelectorMap[target] = selectorMap[target];\n                } else if (isBrowser) {\n                    isUpdate = true;\n                    nextSelectorMap[target] = [].slice.call(document.querySelectorAll(target));\n                }\n            } else if (isArray(target)) {\n                target.forEach(updateSelectorMap);\n            }\n        });\n\n        this.refTargets = nextRefTargets;\n        this.selectorMap = nextSelectorMap;\n\n        if (!isRender && isUpdate) {\n            this.forceUpdate();\n        }\n        return nextRefTargets;\n    }\n    private _checkChangeTargets() {\n        const { added, removed } = this._differ.update(this._elementTargets);\n        const isTargetChanged = added.length || removed.length;\n\n        if (isTargetChanged) {\n            this.props.onChangeTargets?.({\n                moveable: this.moveable,\n                targets: this._elementTargets,\n            });\n            this._onChangeTargets?.();\n        }\n        this._updateRefs();\n\n    }\n}\nexport interface InitialMoveable<T = {}>\n    extends React.PureComponent<MoveableDefaultProps & DefaultAbles & T>,\n    MoveableInterface {\n    setState(state: any, callback?: () => any): any;\n    forceUpdate(callback?: () => any): any;\n}\n","import { MoveableProps, Able } from \"./types\";\nimport { MOVEABLE_ABLES } from \"./ables/consts\";\nimport { InitialMoveable } from \"./InitialMoveable\";\n\nexport default class Moveable<T = {}> extends InitialMoveable<MoveableProps & T> {\n    public static defaultAbles: Able[] = MOVEABLE_ABLES as any;\n}\n","import { IObject } from \"@daybrush/utils\";\nimport { Able } from \"./types\";\nimport { InitialMoveable } from \"./InitialMoveable\";\n\nexport function makeMoveable<T extends IObject<any> = {}>(\n    ables: Array<Able<T>>): typeof InitialMoveable & (new (...args: any[]) => InitialMoveable<T>) {\n    return class Moveable extends InitialMoveable<T> {\n        public static defaultAbles = ables;\n    };\n}\n","import Moveable, * as modules from \"./index.esm\";\n\nfor (const name in modules) {\n    (Moveable as any)[name] = (modules as any)[name];\n}\n\nmodule.exports = Moveable;\nexport * from \"./index.esm\";\nexport default Moveable;\n"],"names":["makeAble","name","able","__assign","events","props","_a","Boolean","getSVGCursor","scale","degree","concat","getCursorCSS","x1","degree45","Math","round","defaultCursor","agent","getAgent","IS_WEBKIT","browser","webkit","IS_WEBKIT605","navi","window","userAgent","navigator","res","exec","toLowerCase","parseFloat","IS_FIREFOX","IS_SAFARI_ABOVE15","parseInt","webkitVersion","version","PREFIX","MOVEABLE_CSS","map","join","NEARBY_POS","FLOAT_POINT_NUM","TINY_NUM","MIN_SCALE","MAX_NUM","pow","MIN_NUM","DIRECTIONS4","DIRECTIONS","DIRECTION_REGION_TO_DIRECTION","n","e","s","w","nw","ne","sw","se","DIRECTION_INDEXES","DIRECTION_ROTATIONS","MOVEABLE_METHODS","setCustomDrag","state","delta","isPinch","isConvert","ableName","result","_b","gestos","move","inputEvent","datas","originalDatas","ableDatas","convertDragDist","parentEvent","CustomGesto","prevX","prevY","startX","startY","isDrag","isFlag","draggable","dragStart","client","type","drag","clientX","clientY","isFirstDrag","isPrevDrag","distX","distY","deltaX","deltaY","parentGesto","calculatePointerDist","moveable","moveableClientRect","rootMatrix","is3d","pos1","left","top","minus","calculateInversePosition","posX","posY","_c","getDragDist","setDragStart","allMatrix","beforeMatrix","origin","offsetMatrix","targetMatrix","transformOrigin","matrix","inverseMatrix","invert","inverseBeforeMatrix","absoluteOrigin","convertPositionMatrix","plus","startDragBeforeDist","calculate","startDragDist","getTransformDirection","calculateMoveablePosition","beforeTransform","direction","resolveTransformEvent","event","functionName","beforeRenderable","index","transformIndex","nextTransforms","length","nextTransformAppendedIndexes","nextIndex","findIndex","text","match","find","info","filter","convertTransformInfo","targetFunction","matFunctionName","beforeFunctionTexts","afterFunctionTexts","beforeFunctionMatrix","beforeTransform2","beforeFunctionMatrix2","targetTansform","targetFunctionMatrix","afterTransform","afterFunctionMatrix","afterTransform2","afterFunctionMatrix2","targetAllTransform","allFunctionMatrix","splice","isAppendTransform","__spreadArray","isAppend","convertTransformFormat","value","dist","getTransformDist","getBeforeDragDist","bx","by","getTransfromMatrix","fromTranslation","isAfter","nextTargetMatrix","multiply","res1","afterTargetMatrix","isBefore","getInverseDragDist","calculateTransformOrigin","width","height","prevWidth","prevHeight","prevOrigin","pos","i","splitUnit","unit","prevSize","size","isNaN","measureRatio","getPosIndexesByDirection","indexes","push","getPosesByDirection","poses","getPosByDirection","xRatio","yRatio","dot","bottom","getDist","startPos","fixedDirection","calculatePoses","fixedPos","getNextMatrix","getAbsoluteMatrix","getNextTransformMatrix","transform","targetTransform","parseMat","convertDimension","scaleMatrix","createScaleMatrix","fillTransformStartEvent","getBeforeRenderableDatas","setTransform","startTransforms","isArray","splitSpace","setTransformIndex","setDefaultTransformIndex","property","func","indexOf","parse","startValue","functionValue","fillOriginalTransform","getNextTransforms","getNextTransformText","getNextStyle","nextStyle","fillTransformEvent","nextTransform","Draggable","fillCSSObject","getTranslateDist","fixedPosition","groupable","nextMatrix","groupLeft","groupTop","nextFixedPosition","getDirectionOffset","getScaleDist","scaleDist","getDirectionByPos","nextFixedOffset","calculatePosition","getRotateDist","rotateDist","getResizeDist","nextOrigin","getAbsolutePosition","getAbsolutePosesByState","getGestoData","targetGesto","controlGesto","data","getEventData","multiply2","pos2","prefix","classNames","_i","arguments","prefixNames","apply","defaultSync","fn","getTransformMatrix","isObject","multiplies","createOriginMatrix","a","measureSVGSize","el","isHorizontal","viewBox","getSVGViewBox","ownerSVGElement","getBeforeTransformOrigin","relativeOrigin","getTransformOrigin","getComputedStyle","o","style","split","getElementTransform","target","computedStyle","computedTransform","list","baseVal","matrixes","chr","getOffsetInfo","lastParent","isParent","checkZoom","targetStyle","doc","ownerDocument","document","documentElement","body","hasSlot","parentSlotElement","assignedSlotParentElement","assignedSlot","parentElement","isCustomElement","isEnd","position","offsetZoom","targetZoom","zoom","targetPosition","tagName","willChange","slotParentNode","parentNode","targetParentNode","nodeType","host","isStatic","offsetParent","getOffsetPosInfo","offsetLeft","offsetTop","isSVG","isUndefined","hasOffset","targetOrigin","slice","getSVGGraphicsOffset","offset","getBodyOffset","bodyStyle","bodyPosition","marginLeft","marginTop","right","convert3DMatrixes","forEach","getPositionFixedInfo","fixedContainer","hasTransform","makeMatrixCSS","convertMatrixtoCSS","clientWidth","clientHeight","x","y","getSVGMatrix","viewBoxWidth","viewBoxHeight","scaleX","scaleY","preserveAspectRatio","align","meetOrSlice","svgOrigin","translate","xAlign","yAlign","floor","scaleDimension","max","min","isGTarget","getBBox","bbox","getRect","posesX","posesY","rectWidth","rectHeight","calculateRect","getSVGOffset","offsetInfo","targetInfo","container","getSize","offsetWidth","offsetHeight","containerClientRect","getBoundingClientRect","margin","rect","rectLeft","scrollLeft","clientLeft","rectTop","scrollTop","clientTop","mat","prevLeft","prevTop","posOrigin","rectOrigin","count","mat2","_d","nextLeft","nextTop","distLeft","distTop","abs","p","calculateMoveableClientPositions","rootClientRect","rootPoses","y1","x2","y2","x3","y3","x4","y4","_e","originX","originY","getShapeDirection","pos3","pos4","getDistSize","vec","sqrt","getDiagonalSize","getLineStyle","rad","getRad","getControlTransform","rotation","reduce","prev","getProps","self","cssWidth","cssHeight","contentWidth","contentHeight","minWidth","minHeight","minOffsetWidth","minOffsetHeight","maxWidth","Infinity","maxHeight","maxOffsetWidth","maxOffsetHeight","inlineCSSWidth","inlineCSSHeight","svg","boxSizing","borderLeft","borderLeftWidth","borderRight","borderRightWidth","borderTop","borderTopWidth","borderBottom","borderBottomWidth","paddingLeft","paddingRight","paddingTop","paddingBottom","horizontalPadding","verticalPadding","horizontalBorder","verticalBorder","horizontalOffset","verticalOffset","containerWidth","containerHeight","parentStyle","convertUnitSize","between","getRotationRad","resetClientRect","scrollWidth","scrollHeight","getExtendsRect","isRoot","extendsRect","overflow","getClientRectByPosition","base","isExtends","baseTop","baseLeft","getClientRect","clientRect","getTotalDirection","parentDirection","getDirection","deg","getAttribute","direciton","dir","getAbsolutePoses","roundSign","num","unset","resolvedEvent","cssText","getKeys","decamelize","fillAfterTransform","prevEvent","nextEvent","fillParams","params","isBeforeEvent","nextParams","currentTarget","isTrusted","stopAble","isEventStart","stopDrag","stop","call","isStartEvent","lastEvent","fillEndParams","isDouble","catchEvent","callback","_emitter","on","triggerEvent","isManager","pseudoElt","filterAbles","ables","methods","triggerAblesSimultaneously","enabledAbles","ableGroups","some","method","ableGroup","equals","a1","a2","selectValue","values","groupBy","arr","groups","groupKeys","groupKey","keyIndex","group","groupByMap","flat","cur","maxOffset","args","sort","b","calculatePadding","convertCSSSize","isRelative","getTinyDist","v","getDirectionViewClassName","isDragging","getDirectionCondition","checkAbles","isRequest","requestAble","hasClass","invertObject","obj","nextObj","transforms","undefined","beforeFunctionTexts2","targetFunctionText","afterFunctionTexts2","beforeFunctions","beforeFunctions2","targetFunctions","afterFunctions","afterFunctions2","toMat","isArrayFormat","Element","getRefTarget","isSelector","isString","querySelector","isFunction","current","getRefTargets","targets","userTargets","querySelectorAll","getAbsoluteRotation","PI","getDragDistByState","calculateMatrixDist","getSizeDistByDist","startSize","ratio","keepRatio","startOffsetWidth","startOffsetHeight","distWidth","distHeight","standardRad","signSize","cos","startWidthSize","startHeightSize","distSize","ratioRad","sin","getOffsetSizeDist","sizeDirection","parentDistance","parentDist","parentScale","startFixedDirection","directionsDists","directionRatios","ratioDistance","dist_1","convertTransformUnit","xy","leftOrigin","rightOrigin","originObject","nextOriginObject","convertTransformOriginArray","rotatePosesInfo","prevPoses","nextPoses","rotate","next","isDeepArrayEquals","arr1","arr2","every","value1","value2","isArray1","isArray2","onPinchStart","onPinch","onPinchEnd","onPinchGroupStart","onPinchGroup","onPinchGroupEnd","pinchStart","angle","pinchable","eventName","controlEventName","pinchAbles","controlAbles","canPinch","ableEvent","parentRotate","snapRenderInfo","request","pinch","pinchScale","distance","pinchEnd","pinchGroupStart","pinchGroup","pinchGroupEnd","fillChildEvents","groupableDatas","childDatas","moveables","_","triggerChildGesto","isStart","childs","ev","childMoveable","childEvent","childGestos","parentFlag","child","triggerChildAbles","eachEvent","VERTICAL_NAMES","HORIZONTAL_NAMES","VERTICAL_NAMES_MAP","start","end","center","HORIZONTAL_NAMES_MAP","hasGuidelines","snappable","bounds","innerBounds","verticalGuidelines","horizontalGuidelines","snapGridWidth","snapGridHeight","guidelines","enableSnap","getSnapDirections","snapDirections","mapSnapDirectionPoses","snapPoses","nextSnapDirections","nextSnapPoses","splitSnapDirectionPoses","horizontalNames","verticalNames","horizontal","vertical","calculateContainerPos","containerRect","clientPos","solveLineConstants","point1","point2","dx","dy","c","throttle","checkMoveableSnapPoses","customSnapThreshold","snapThreshold","checkSnapPoses","checkSnap","checkSnapKeepRatio","endPos","endX","endY","isBottom","isRight","verticalInfo","isSnap","horizontalInfo","verticalSnapInfo","horizontalSnapInfo","posInfos","getNearestSnapGuidelineInfo","isVerticalSnap","verticalGuideline","guideline","isHorizontalSnap","horizontalGuideline","horizontalPos","verticalPos","checkSnaps","snapInfo","posInfo","guidelineInfo","guidelineInfos","targetType","targetPoses","isVertical","posType","snapPosInfos","targetPos","snapPosInfo","getSnapInfosByDirection","snapDirection","alignPoses","checkSnapBoundPriority","aDist","bDist","isBound","getNearOffsetInfo","offsets","aSign","sign","bSign","aOffset","bOffset","getCheckSnapDirections","directions","endDirection_1","signX","signY","nextDirection","signs","isStartLine","line","cx","average","cy","hitTestLine","test1","test2","isSameStartLine","dots","centerSign","error","checkInnerBoundDot","threshold","checkInnerBound","verticalSign","horizontalSign","lineConstants","isAllBound","isVerticalBound","isHorizontalBound","leftLine","topLine","rightLine","bottomLine","topBoundInfo","checkLineBoundCollision","bottomBoundInfo","leftBoundInfo","rightBoundInfo","isAllVerticalBound","isAllHorizontalBound","boundLine","isRender","dot1","boundDot1","boundDot2","dy2","dx2","hasDx","hasDy","slope","getInnerBoundInfo","lineInfos","multiple","sizeOffset","getInnerBoundDragInfo","lines","getCheckInnerBoundLineInfos","innerBoundInfo","widthOffsetInfo","heightOffsetInfo","getCheckSnapLineDirections","lineDirections","virtualPoses","dir1","dir2","virtualLine","isBoundRotate","relativePoses","boundDots","getDistPointLine","solveReverseLine","checkRotateInnerBounds","relativeLeft","relativeRight","relativeTop","relativeBottom","dotInfos","lineRad","lineDist","dotDist","dotRad","distRad","acos","nextRad1","nextRad2","nextRad","checkInnerBoundPoses","horizontalPoses","verticalPoses","boundMap","lineInfo","isHorizontalStart","isVerticalStart","checkBoundPoses","_f","nextBounds","checkBounds","getBounds","externalBounds","snapOffset","snapOffsetLeft","snapOffsetTop","snapOffsetRight","snapOffsetBottom","isCSS","_g","checkBoundKeepRatio","startBoundPos","endBoundPos","minPos","maxPos","boundInfos","boundRect","boundRotate","boundPos","r","nextPos","checkRotateBounds","relativeRad1","relativeRad2","renderGuideline","React","key","scaleType","createElement","className","renderInnerGuideline","sizeValue","posValue","renderSnapPoses","renderPos","renderGuidelines","targetRect","isDisplayInnerSnapDigit","mainNames","targetStart","targetEnd","hide","elementRect","element","renderDigitLine","lineType","gap","snapDigit","isDisplaySnapDigit","snapDistFormat","sizeName","absGap","snapSize","toFixed","groupByElementGuidelines","otherIndex","names","nextGuidelines","inner","elementRect1","elementRect2","nextPos1","nextPos2","total","renderDashedGuidelines","rendered","sideNames","sidePos","prevRect","nextRect","size1","size2","renderPos1","renderPos2","renderGapGuidelines","targetSideStart","targetSideEnd","gapRects","sideStartPos","sideEndPos","sideCenterPos","solveEquation","solveNextOffset","isOutside","dist1","dist2","widthOffset","heightOffset","getSnapBound","boundInfo","checkThrottleDragRotate","throttleDragRotate","offsetX","offsetY","adjustPoses","adjustPos","prevDistY","checkSnapBoundsDrag","absolutePoses","boundPoses","middle","checkMoveableSnapBounds","verticalSnapBoundInfo","horizontalSnapBoundInfo","verticalInnerBoundInfo","horizontalInnerBoundInfo","horizontalBoundInfos","verticalBoundInfos","horizontalDist","verticalDist","snapIndex","snap","checkSnapBounds","guideines","checkSnapRightLine","snapBoundInfo","rad180","isHorizontalLine","isVerticalLine","getSnapBoundInfo","startDirection","endDirection","otherStartPos","otherEndPos","checkSnapBoundsKeepRatio","otherHorizontalOffset","isOtherHorizontalBound","isOtherHorizontalSnap","otherVerticalOffset","isOtherVerticalBound","isOtherVerticalSnap","snapLine","getSnapBoundOffset","horizontalBoundInfo","verticalBoundInfo","checkMaxBounds","left_1","top_1","right_1","bottom_1","otherDirection","isCheckVertical","isCheckHorizontal","otherPos","nextOtherPos","isHeightOutside","isWidthOutside","getTotalGuidelines","hasFixed","containerClientHeight","containerClientWidth","snapGap","maxSnapElementGuidelineDistance","elementGuidelines","getElementGuidelines","totalGuidelines","getGapGuidelines","getGridGuidelines","getDefaultGuidelines","checkBetweenRects","maxSnapElementGapDistance","elementRects","gapGuidelines","targetCenter","targetStart2","targetEnd2","nextElementRects","snapRect1","snapRect2","rect1","rect2","rect1Start","rect1End","rect2Start","rect2End","isCenter","prevValues","snapRect","refresh","nextElementGuidelines","diff","maintained","added","nextValues","prevIndex","getSnapElementRects","elementSnapDirections","topValue","leftValue","rightValue","bottomValue","centerValue","middleValue","sizes","snapWidth","snapHeight","nextPosInfo","targetClientRect","containerLeft","containerTop","getMinMaxs","targetLeft","minX","targetTop","minY","elementLeft","elementTop","elementRight","elementBottom","checkSnapInfo","snapContainer","snapContainerTarget","snapContainerRect","offset1","offset2","getNextFixedPoses","nextFixedPos","getSizeOffsetInfo","innerBoundLineInfos","recheckSizeByTwoDirection","snapPos","nextWidthOffset","nextHeightOffset","nextWidth","nextHeight","checkSizeDist","getNextPoses","isWidthBound","isHeightBound","widthDist","heightDist","isGetWidthOffset","checkSnapRotate","origin2","checkSnapResize","nextAllMatrix","checkSnapScale","sizeDist","startCheckSnapDrag","getSnapGuidelines","addBoundGuidelines","verticalSnapPoses","horizontalSnapPoses","verticalInnerBoundPoses","horizontalInnerBoundPoses","innerPos","directionCondition","dragRelation","Array","Object","Number","snapRenderThreshold","Function","onSnap","css","render","minLeft","minTop","externalPoses","snapInfos","hasExternalPoses","externalRect","verticalPosInfos","horizontalPosInfos","allGuidelines","elements","gaps","dragEnd","dragControlCondition","rotatableDragControlCondtion","dragControlStart","dragControl","dragControlEnd","dragGroupStart","dragGroup","dragGroupEnd","dragGroupControlStart","dragGroupControl","dragGroupControlEnd","renderDirectionControlsByInfos","renderDirections","getState","renderPoses","rotationRad","degRotation","directionMap","renderState","renderDirectionMap","directionRotation","dataAttrs","renderDirectionControls","defaultDirections","renderAroundControls","renderLine","renderEdgeLines","edge","index1","index2","getRenderDirections","renderDiagonalDirections","renderAllDirections","throttleDrag","startDragRotate","edgeDraggable","onDragStart","onDrag","onDragEnd","onDragGroupStart","onDragGroup","onDragGroupEnd","requestStyle","dragInfo","beforeOrigin","prevDist","prevBeforeDist","deltaOffset","set","startRect","parentMoveable","dragRotateRad","ry","rx","beforeTranslate","throttleArray","beforeDist","beforeDelta","passDelta","passDist","dragAfter","param","isControl","requestStart","requestEnd","resizable","throttleResize","resizeFormat","keepRatioFinally","checkResizableError","onResizeStart","onBeforeResize","onResize","onResizeEnd","onResizeGroupStart","onBeforeResizeGroup","onResizeGroup","onResizeGroupEnd","viewClassName","isGroup","parentFixedDirection","minSize","startWidth","startHeight","maxSize","startOffsetMatrix","startTransformOrigin","isWidth","parentIsWidth","setRatio","isFinite","startPositions","setFixedDirection","setFixedPosition","setMin","setMax","nextMaxSize","isNumber","startRatio","setOrigin","startFixedPosition","isResize","parentKeepRatio","dragClient","resolveMatrix","targetN","getNextBoundingSize","nextSize","boundingWidth","boundingHeight","nextFixedDirection","setSize","snapDist","computeSize","isNoSnap","calculateBoundSize","inverseDelta","dragControlAfter","errorWidth","errorHeight","isErrorWidth","isErrorHeight","dragGroupControlCondition","originalEvents","setDist","createRotateMatrix","originalX","originalY","parentStartOffsetWidth","parentStartOffsetHeight","updateGroupMin","originalMinSize","childMinSize","childStartOffsetWidth","childStartOffsetHeight","parentMinWidth","parentMinHeight","updateGroupMax","originalMaxSize","childMaxSize","parentMaxWidth","parentMaxHeight","deltaWidth","deltaHeight","setRotateStartInfo","startAbsoluteOrigin","prevDeg","defaultDeg","prevSnapDeg","loop","startDist","getAbsoluteDist","normalizedPrevDeg","getAbsoluteDistByClient","getRotateInfo","moveableRect","throttleRotate","snapRotation","snapDeg","getRotationPositions","rotationPosition","radPoses","isReverse","rotationTarget","contains","directionCSS","rotatable","String","rotateAroundControls","resolveAblesWithRotatable","onRotateStart","onBeforeRotate","onRotate","onRotateEnd","onRotateGroupStart","onBeforeRotateGroup","onRotateGroup","onRotateGroupEnd","positions","jsxs","resolveMap_1","directionControlInfos","resolve","beforeDirection","resizeStart","startClientX","startClientY","externalRotate","beforeInfo","afterInfo","absoluteInfo","inputTarget","regionDirection","controlDirection","isAroundControl","resolveAble","clientPoses","originalFixedPosition_1","getOrigin","fixedBeforeOrigin","fixedAfterOrigin","posDelta","Resizable","parentPosition","controlPosition","parentFixedPosition","rotatation","isRotate","clientDistX","clientDistY","groupDelta","targetDirection","beforeRotation","absoluteDelta","absoluteDist","absoluteRotation","startRotation","absoluteStartRotation","nextClientX","nextClientY","setRotation","nextRotation","inverseDist","prevInverseDist","requestValue","dragEvent","transformEvent","resize","resizeEvent","beforeRotate","absoluteRotate","parentLeft","parentTop","parentBeforeOrigin","childClient","startGroupClient","groupClient","prevClientX","prevClientY","rotateMatrix","setGroupRotation","distRotate","getRotation","deltaRotate","scalable","throttleScale","onScaleStart","onBeforeScale","onScale","onScaleEnd","onScaleGroupStart","onBeforeScaleGroup","onScaleGroup","onScaleGroupEnd","scaleWidth","scaleHeight","scaleXRatio","scaleYRatio","isScale","getNextScale","stateDirection","setScale","nextScale","scaleEndParam","moveableScale","getMiddleLinePos","getTriangleRad","rad1","rad2","isValidPos","poses1","poses2","pi","warpable","onWarpStart","onWarp","onWarpEnd","linePosFrom1","linePosFrom2","linePosFrom3","linePosFrom4","linePosTo1","linePosTo2","linePosTo3","linePosTo4","warpTargetMatrix","targetInverseMatrix","ignoreDimension","createIdentityMatrix","prevMatrix","posIndexes","isWarp","selectedPoses","nearByPoses","h","createWarpMatrix","afterMatrix","totalMatrix","AREA_PIECES","AREA_PIECE","AVOID","VIEW_DRAGGING","restoreStyle","areaElement","removeClass","renderPieces","dragArea","passDragArea","onClick","onClickGroup","ref","isDragArea","rects","children","nextElementSibling","addClass","disableNativeEvent","enableNativeEvent","requestAnimationFrame","getDefaultScrollPosition","scrollContainer","scrollable","scrollThreshold","scrollThrottleTime","getScrollPosition","scrollOptions","onScroll","onScrollGroup","getContainer","dragScroll","DragScroll","scrollContainerElement","gestoName","scrollBy","getCurrentEvent","checkScroll","throttleTime","dragGroupControEnd","dragTarget","portalContainer","rootContainer","useResizeObserver","pinchThreshold","pinchOutside","checkInput","cspNonce","translateZ","hideDefaultLines","flushSync","stopPropagation","preventClickEventOnDrag","preventClickDefault","viewContainer","persistData","useAccuratePosition","firstRenderState","linePadding","onChangeTargets","padding","paddingDirections","paddingPos1","paddingPos2","paddingPos3","paddingPos4","RADIUS_DIRECTIONS","calculateRatio","sumSize","sumRatio","HORIZONTAL_RADIUS_ORDER","VERTICAL_RADIUS_ORDER","HORIZONTAL_RADIUS_DIRECTIONS","VERTICAL_RADIUS_DIRECTIONS","getRadiusStyles","clipStyles","radiusPoses","virtual","raws","rawPos","styles","getRadiusRange","controlPoses","horizontalRange","verticalRange","clipPose","sub","getRadiusValues","minCounts","full","splitIndex","splitLength","horizontalValues","verticalValues","horizontalValuesLength","verticalValuesLength","hasVerticalValues","nwValue","neValue","seValue","_h","swValue","_j","wnValue","_k","enValue","_l","esValue","_m","wsValue","horizontalRawPoses","verticalRawPoses","nextHorizontalPoses","nextVerticalPoses","raw","removeRadiusPos","startIndex","radiuslIndex","deleteCount","addRadiusPos","horizontalIndex","verticalIndex","radiusX","radiusY","startVerticalIndex","splitRadiusPoses","horizontals","verticals","CLIP_DIRECTIONS","CLIP_RECT_DIRECTIONS","getClipStyles","clipPath","clipRelative","clipType","clipPoses","isRect","isCircle","subWidth","subHeight","getRectPoses","xs","ys","dirx","diry","getControlSize","xRange","yRange","getClipPath","defaultClip","customClip","clipText","clip","splitBracket","clipPrefix","splitter","splitComma","xPos","yPos","minMaxs","maxX","maxY","radiusX_1","radiusY_1","radius","xRadius","yRadius","centerPos_1","roundIndex","rectLength","radiusValues","_o","_p","_q","_r","nextRight","nextBottom","_s","moveControlPos","dists","verticalDirections","horizontalDirections","verticalDirection_1","horizontalDirection_1","fixedIndex","nextDist","nextControlPoses_1","controlPose","controlDir","dirDir","dirHorizontal","dirVertical","addClipPath","clipIndex","clipStyle","clipEventType","removeClipPath","clippable","defaultClipPath","customClipPath","clipArea","dragWithClip","clipTargetBounds","clipVerticalGuidelines","clipHorizontalGuidelines","clipSnapThreshold","onClipStart","onClip","onClipEnd","clipPathState","snapBoundInfos","calculatedPos","controls","isInset","isPolygon","linePoses_1","to","from","clipLeft","clipTop","ellipseClipPath","piece","areaPoses","allWidth","allHeight","allLeft_1","allTop_1","directionType","snapPos1","snapPos2","isDragTarget","isClipStart","isLine","isArea","originalDraggable","originalDist","firstDist","isDragWithTarget","isAll","guidePoses","isEllipse","guideRect","guideXPoses","guideYPoses","rectPoses","rectDists_1","boundDelta","snapOffsetY","snapOffsetX","distSnapX","distSnapY","width_1","height_1","nextControlPoses_2","j","nextClipStyles","dragDist","originDraggable","originRelative","onDragOriginStart","onDragOrigin","onDragOriginEnd","startOrigin","startTargetOrigin","isDragOrigin","distOrigin","dragDelta","deltaOrigin","addBorderRadiusByLine","lineIndex","horizontalsLength","verticalsLength","controlIndex","controlPoseInfo","addBorderRadius","removeBorderRadius","getBorderRadius","borderRadius","triggerRoundEvent","roundRelative","borderRadiusState","getStyleBorderRadius","firstTarget","getTargets","roundable","minRoundControls","maxRoundControls","roundClickable","roundPadding","isDisplayShadowRoundControls","onRoundStart","onRound","onRoundEnd","onRoundGroupStart","onRoundGroup","onRoundGroupEnd","verticalCount","horizontalCount","basePos","originalPos","isDisplay","display","indexAttr","replace","isRound","selectedControlPose","selectedVertical","selectedHorizontal","pose","poseDist","isIdentityMatrix","identityMatrix","onBeforeRenderStart","onBeforeRender","onBeforeRenderEnd","onBeforeRenderGroupStart","onBeforeRenderGroup","onBeforeRenderGroupEnd","cssMatrix","startTransform","resetStyle","fillDragStartParams","fillDragParams","_this","onRenderStart","onRender","onRenderEnd","onRenderGroupStart","onRenderGroup","onRenderGroupEnd","resultCount","fillDragEndParams","triggerAble","ableType","eventOperation","eventAffix","eventType","requestInstant","conditionName","isFirstStart","updateRect","requestAble_1","eventAbles","BeforeRenderable","Renderable","elementFromPoint","isDragStop","results","nextDatas","off","isUpdate","isForceEnd","preventDefault","isUnmounted","forceUpdate","checkMoveableTarget","eventTarget","isMoveableElement","controlBox","getElement","getTargetAbleGesto","moveableTarget","getAbleGesto","conditionFunctions","isTargetAbles","options","preventRightClick","preventWheelClick","preventClickEventOnDragStart","preventClickEventByCondition","gesto","Gesto","EventManager","_onEvent","addEventListener","setAbles","destroy","removeEventListener","getShadowRoot","getRootNode","rootNode","getMatrixStackInfo","checkContainer","targetTransformOrigin","offsetContainer","convertCSStoMatrix","isFixed","fixedInfo","offsetPos","isOffsetEnd","customOffsetParent","customOffsetLeft","customOffsetTop","parentClientLeft","parentClientTop","fixedClientLeft","fixedClientTop","isElementTarget","calculateMatrixStack","isAbsolute3d","prevTargetMatrix","containerZoom","rootMatrixes","isRoot3d","offsetRootContainer","rootZoom","isNext3d","isSVGGraphicElement","reverse","originalRootContainer","endContainer","rootMatrixBeforeOffset","nextInfo","isMatrix3d","originalRootMatrix","hasZoom","calculateElementInfo","allResult","getElementInfo","getMoveableTargetInfo","moveableElement","parentContainer","rootContainerClientRect","offsetDelta","computedStyle_1","beforePosition","absoluteTargetPosition","absoluteContainerPosition","containerClientRectLeft","containerClientRectTop","containterClientLeft","containerClientTop","clientDelta","originalBeforeOrigin","getPersistState","isPersisted","MoveableManager","_super","__extends","targetAbles","isMoveableMounted","EventEmitter","_prevTarget","_prevDragArea","_isPropTargetChanged","_hasFirstTarget","_observer","_observerId","_rootContainer","_viewContainer","_viewClassNames","checkUpdateRect","cancelAnimationFrame","_onPreventClick","propsTarget","ControlBoxElement","cssStyled","_checkUpdateRootContainer","checkUpdate","updateRenderPoses","stateTarget","groupTargets","ableAttributes","getEnabledAbles","ableClassName","_getAbleClassName","isVisible","renderAbles","_renderLines","componentDidMount","wrapperMoveable","_checkUpdateViewContainer","_updateTargets","_updateNativeEvents","_updateEvents","updateCheckInput","_updateObserver","componentDidUpdate","prevProps","componentWillUnmount","_changeAbleViewClassNames","manager","getAble","triggerDragStart","hitTest","points","fitPoints","getOverlapSize","totalSize","getAreaSize","isInside","isTarget","isSetState","nextState","_getRequestStyles","persistState","updateState","updateTarget","statePos","getManager","isInstant","requsetAble","ableRequester","requester","ableParam","stateLeft","stateTop","stateContainer","updateAbles","isTargetChanged","isChanged","moveableContainer","unsetAbles","waitToChangeTarget","Promise","trigger","useCSS","tag","customStyleMap","customStyledMap","styled","hasControlBox","updateSelectors","setState","always","Renderer","styleNames","ableStyleNames","ResizeObserver","disconnect","observer","observe","box","controlBoxElement","hasTargetAble","hasControlAble","isUnset","_isTargetChanged","hideChildMoveableDefaultLines","useDragArea","prevTarget","prevDragArea","isDragAreaChanged","eventKeys","hasAbles","viewContainerOption","_getAbleViewClassNames","nextClassNames","prevClassNames","removed","classPrefix","targetGestoData","controlGestoData","trim","defaultProps","isWrapperMounted","PureComponent","defaultGroupRotate","defaultGroupOrigin","groupableProps","targetGroups","renderGroupRects","persistDatChildren","refs","clickable","containsElement","containsTarget","targetIndex","parentTarget","getDraggableEvent","dragCondition","dragGroupCondition","individualGroupable","MOVEABLE_ABLES","Default","Snappable","Pinchable","Scalable","Warpable","Rotatable","Scrollable","Padding","Origin","OriginDraggable","Clippable","Roundable","Groupable","IndividualGroupable","Clickable","DragArea","MOVEABLE_EVENTS_PROPS_MAP","MOVEABLE_PROPS_MAP","MOVEABLE_EVENTS_MAP","MOVEABLE_EVENTS","keys","MOVEABLE_PROPS","solveConstantsDistance","solveC","getMaxPos","getMinPos","getGroupRect","parentPoses","fixedRotation","a1_1","tan","a2_1","a1MinMax_1","a1MinMaxPos_1","a2MinMax_1","a2MinMaxPos_1","a1Dist","a2Dist","a1MinPos","a1MaxPos","a2MinPos","a2MaxPos","minHorizontalLine","maxHorizontalLine","minVerticalLine","maxVerticalLine","line1","line2","getIntersectionPointsByConstants","minX_1","minY_1","maxX_1","maxY_1","changedX","findMoveableGroups","childTargetGroups","targetGroup","childMoveableGroups","checked","finded","MoveableGroup","differ","ChildrenDiffer","_targetGroups","_hasFirstTargets","prototype","checkeds","moveableGroups","isReset","updateGroup","persistedRoatation","getMoveableGroupRect","parentRotation","posesRotations","rotations","groupRotation","firstRotation","isSameRotation","groupPoses","groupRect","rootGroupRect","posesInfo","rotateScale","nextTarget","isContainerChanged","update","changed","MoveableIndividualGroup","canPersist","getElementTargets","refTargets","selectorMap","elementTargets","getTargetGroups","compareRefTargets","prevRefTargets","nextRefTargets","InitialMoveable","_differ","_elementTargets","_onChangeTargets","makeStyled","cssMap","getTotalAbles","defaultStyled","prefixCSS","defaultAbles","moveableContructor","constructor","userAbles","userProps","__rest","_updateRefs","totalAbles","nextProps","prevMoveable","target_1","prevTargetMoveable","mv","_checkChangeTargets","resolvePromise","waitToChangeTargets","isBrowser","nextSelectorMap","updateSelectorMap","selectorTarget","__decorate","withMethods","Moveable","makeMoveable","modules","module","exports"],"mappings":"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"}